<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>Rollup | Hexo</title><meta name="description" content="12345678910111213141516171819# These commands assume the entry point to your application is named `main.js`, and that you&apos;d like all imports compiled into a single file named `bundle.js`.# For browser"><meta property="og:type" content="article"><meta property="og:title" content="Rollup"><meta property="og:url" content="https://molly2molly.github.io/Rollup/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="12345678910111213141516171819# These commands assume the entry point to your application is named `main.js`, and that you&apos;d like all imports compiled into a single file named `bundle.js`.# For browser"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2021-02-03T06:42:59.966Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Rollup"><meta name="twitter:description" content="12345678910111213141516171819# These commands assume the entry point to your application is named `main.js`, and that you&apos;d like all imports compiled into a single file named `bundle.js`.# For browser"><link rel="canonical" href="https://molly2molly.github.io/Rollup/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-javascript/">es6 javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/React/" style="font-size:13px">React</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/Webpack/" style="font-size:13px">Webpack</a> <a href="/tags/es6-javascript/" style="font-size:13px">es6 javascript</a> <a href="/tags/javascript/" style="font-size:14px">javascript</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/数据结构/" style="font-size:14px">数据结构</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Babel/" class="title">Babel</a></p><p class="item-date"><time datetime="2021-03-26T07:05:01.000Z" itemprop="datePublished">2021-03-26</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Yeoman/" class="title">Yeoman</a></p><p class="item-date"><time datetime="2021-03-23T06:56:23.000Z" itemprop="datePublished">2021-03-23</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/FreeOnlineProgrammingCSCourses/" class="title">FreeOnlineProgrammingCSCourses</a></p><p class="item-date"><time datetime="2021-01-13T01:18:08.000Z" itemprop="datePublished">2021-01-13</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Question/" class="title">Question</a></p><p class="item-date"><time datetime="2021-01-12T05:38:46.000Z" itemprop="datePublished">2021-01-12</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/URL/" class="title">URL</a></p><p class="item-date"><time datetime="2021-01-11T06:39:46.000Z" itemprop="datePublished">2021-01-11</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-Rollup" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">Rollup</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/Rollup/" class="article-date"><time datetime="2020-09-21T01:43:51.000Z" itemprop="datePublished">2020-09-21</time></a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/Rollup/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># These commands assume the entry point to your application is named `main.js`, and that you'd like all imports compiled into a single file named `bundle.js`.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For browsers</span></span><br><span class="line"><span class="comment"># compile to a &lt;script&gt; containing a self-executing function ('iife')</span></span><br><span class="line">rollup main.js --file bundle.js --format iife</span><br><span class="line"></span><br><span class="line"><span class="comment"># For Node.js</span></span><br><span class="line"><span class="comment"># compile to a CommonJS module ('cjs')</span></span><br><span class="line">rollup main.js --file bundle.js --format cjs</span><br><span class="line"></span><br><span class="line"><span class="comment"># For both browsers and Node.js</span></span><br><span class="line"><span class="comment"># UMD format requires a bundle name</span></span><br><span class="line">rollup main.js --file bundle.js --format umd --name <span class="string">"myBundle"</span></span><br><span class="line"></span><br><span class="line">--sourcemap</span><br><span class="line">--sourcemap inline</span><br><span class="line">--watch -w</span><br><span class="line">--no-wathch.clearScreen</span><br><span class="line">--config -c</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:right">option</th><th style="text-align:center">description</th></tr></thead><tbody><tr><td style="text-align:right"><code>iife</code></td><td style="text-align:center">wrap code in an Immediately Invoked Function Expression <code>(function () { ... }());</code> block so it cannot conflict with other libraries</td></tr><tr><td style="text-align:right"><code>es6</code></td><td style="text-align:center">standard ES6</td></tr><tr><td style="text-align:right"><code>cjs</code></td><td style="text-align:center">CommonJS for Node.js</td></tr><tr><td style="text-align:right"><code>umd</code></td><td style="text-align:center"><a href="https://github.com/umdjs/umd" target="_blank" rel="noopener">Universal Module Definition</a> for use on both the client and server</td></tr><tr><td style="text-align:right"><code>amd</code></td><td style="text-align:center"><a href="https://github.com/amdjs" target="_blank" rel="noopener">Asynchronous Module Definition</a></td></tr><tr><td style="text-align:right"><code>system</code></td><td style="text-align:center"><a href="https://github.com/systemjs/systemjs" target="_blank" rel="noopener">SystemJS modules</a></td></tr></tbody></table><h5 id="rollup-config-js"><a href="#rollup-config-js" class="headerlink" title="rollup.config.js"></a>rollup.config.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; <span class="comment">// can be an array (for multiple inputs)</span></span><br><span class="line">  <span class="comment">// core input options</span></span><br><span class="line">  external,</span><br><span class="line">  input, <span class="comment">// conditionally required</span></span><br><span class="line">  plugins,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// advanced input options</span></span><br><span class="line">  cache,</span><br><span class="line">  onwarn,</span><br><span class="line">  preserveEntrySignatures,</span><br><span class="line">  strictDeprecations,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// danger zone</span></span><br><span class="line">  acorn,</span><br><span class="line">  acornInjectPlugins,</span><br><span class="line">  context,</span><br><span class="line">  moduleContext,</span><br><span class="line">  preserveSymlinks,</span><br><span class="line">  shimMissingExports,</span><br><span class="line">  treeshake,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// experimental</span></span><br><span class="line">  experimentalCacheExpiry,</span><br><span class="line">  perf,</span><br><span class="line"></span><br><span class="line">  output: &#123; <span class="comment">// required (can be an array, for multiple outputs)</span></span><br><span class="line">    <span class="comment">// core output options</span></span><br><span class="line">    dir,</span><br><span class="line">    file,</span><br><span class="line">    format, <span class="comment">// required</span></span><br><span class="line">    globals,</span><br><span class="line">    name,</span><br><span class="line">    plugins,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// advanced output options</span></span><br><span class="line">    assetFileNames,</span><br><span class="line">    banner,</span><br><span class="line">    chunkFileNames,</span><br><span class="line">    compact,</span><br><span class="line">    entryFileNames,</span><br><span class="line">    extend,</span><br><span class="line">    footer,</span><br><span class="line">    hoistTransitiveImports,</span><br><span class="line">    inlineDynamicImports,</span><br><span class="line">    interop,</span><br><span class="line">    intro,</span><br><span class="line">    manualChunks,</span><br><span class="line">    minifyInternalExports,</span><br><span class="line">    outro,</span><br><span class="line">    paths,</span><br><span class="line">    preserveModules,</span><br><span class="line">    preserveModulesRoot,</span><br><span class="line">    sourcemap, <span class="comment">// true || false || 'inline'</span></span><br><span class="line">    sourcemapExcludeSources,</span><br><span class="line">    sourcemapFile,</span><br><span class="line">    sourcemapPathTransform,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// danger zone</span></span><br><span class="line">    amd,</span><br><span class="line">    esModule,</span><br><span class="line">    exports,</span><br><span class="line">    externalLiveBindings,</span><br><span class="line">    freeze,</span><br><span class="line">    indent,</span><br><span class="line">    namespaceToStringTag,</span><br><span class="line">    noConflict,</span><br><span class="line">    preferConst,</span><br><span class="line">    strict,</span><br><span class="line">    systemNullSetters</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  watch: &#123;</span><br><span class="line">    buildDelay,</span><br><span class="line">    chokidar,</span><br><span class="line">    clearScreen,</span><br><span class="line">    skipWrite,</span><br><span class="line">    exclude,</span><br><span class="line">    include</span><br><span class="line">  &#125; | <span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="Rollup-js-development-and-production-configurations"><a href="#Rollup-js-development-and-production-configurations" class="headerlink" title="Rollup.js development and production configurations"></a>Rollup.js development and production configurations</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dev = (process.env.NODE_ENV !== <span class="string">'production'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`running in <span class="subst">$&#123; dev ? <span class="string">'development'</span> : <span class="string">'production'</span> &#125;</span> mode`</span>);</span><br><span class="line"><span class="keyword">const</span> sourcemap = dev ? <span class="string">'inline'</span> : <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    input: <span class="string">'./src/main.js'</span>,</span><br><span class="line">    watch: &#123;</span><br><span class="line">      clearScreen: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    output: &#123;</span><br><span class="line">      file: <span class="string">'./build/bundle.js'</span>,</span><br><span class="line">      format: <span class="string">'iife'</span>,</span><br><span class="line">      sourcemap</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># The value of NODE_ENV can be set from the command line on macOS or Linux:</span><br><span class="line">$ NODE_ENV=production</span><br><span class="line"># This is the Windows cmd prompt:</span><br><span class="line">$ set NODE_ENV=production</span><br><span class="line"># For Windows Powershell:</span><br><span class="line">$ $env:NODE_ENV=<span class="string">"production"</span></span><br><span class="line"># Rollup.js also allows you to temporarily set/override environment variables in the --environment flag. For example:</span><br><span class="line">$ npx rollup --config --environment VAR1,<span class="attr">VAR2</span>:value2,<span class="attr">VAR3</span>:x</span><br><span class="line">$ npx rollup --config --environment NODE_ENV:production</span><br></pre></td></tr></table></figure><h4 id="If-you-want-to-create-your-config-asynchronously-Rollup-can-also-handle-a-Promise-which-resolves-to-an-object-or-an-array"><a href="#If-you-want-to-create-your-config-asynchronously-Rollup-can-also-handle-a-Promise-which-resolves-to-an-object-or-an-array" class="headerlink" title="If you want to create your config asynchronously, Rollup can also handle a Promise which resolves to an object or an array."></a>If you want to create your config asynchronously, Rollup can also handle a <code>Promise</code> which resolves to an object or an array.</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">'node-fetch'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> fetch(<span class="string">'/some-remote-service-or-file-which-returns-actual-config'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// rollup.config.js (Promise resolving an array)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="built_in">Promise</span>.all([</span><br><span class="line">  fetch(<span class="string">'get-config-1'</span>),</span><br><span class="line">  fetch(<span class="string">'get-config-2'</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># If you now run rollup --config --configDebug, the debug configuration will be used.</span><br><span class="line"></span><br><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">import</span> defaultConfig <span class="keyword">from</span> <span class="string">'./rollup.default.config.js'</span>;</span><br><span class="line"><span class="keyword">import</span> debugConfig <span class="keyword">from</span> <span class="string">'./rollup.debug.config.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> commandLineArgs =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (commandLineArgs.configDebug === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> debugConfig;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> defaultConfig;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> commandLineArgs =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> inputBase = commandLineArgs.input || <span class="string">'main.js'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// this will make Rollup ignore the CLI argument</span></span><br><span class="line">  <span class="keyword">delete</span> commandLineArgs.input;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    input: <span class="string">'src/entries/'</span> + inputBase,</span><br><span class="line">    output: &#123;...&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>While config files provide an easy way to configure Rollup, they also limit how Rollup can be invoked and where configuration is taken from. Especially if you are rebundling Rollup in another build tool or want to integrate it into an advanced build process, it may be better to directly invoke Rollup programmatically from your scripts.</p><h3 id="If-you-want-to-switch-from-config-files-to-using-the-JavaScript-API-at-some-point-there-are-some-important-differences-to-be-aware-of"><a href="#If-you-want-to-switch-from-config-files-to-using-the-JavaScript-API-at-some-point-there-are-some-important-differences-to-be-aware-of" class="headerlink" title="If you want to switch from config files to using the JavaScript API at some point, there are some important differences to be aware of:"></a>If you want to switch from config files to using the <a href="https://rollupjs.org/guide/en/#javascript-api" target="_blank" rel="noopener">JavaScript API</a> at some point, there are some important differences to be aware of:</h3><ul><li>When using the JavaScript API, the configuration passed to <code>rollup.rollup</code> must be an object and cannot be wrapped in a Promise or a function.</li><li>You can no longer use an array of configurations. Instead, you should run <code>rollup.rollup</code> once for each set of <code>inputOptions</code>.</li><li>The <code>output</code> option will be ignored. Instead, you should run <code>bundle.generate(outputOptions)</code> or <code>bundle.write(outputOptions)</code> once for each set of <code>outputOptions</code>.</li></ul><h3 id="Loading-a-configuration-from-a-Node-package"><a href="#Loading-a-configuration-from-a-Node-package" class="headerlink" title="Loading a configuration from a Node package"></a>Loading a configuration from a Node package</h3><p>For interoperability, Rollup also supports loading configuration files from packages installed into <code>node_modules</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># this will first try to load the package "rollup-config-my-special-config";</span></span><br><span class="line"><span class="comment"># if that fails, it will then try to load "my-special-config"</span></span><br><span class="line">rollup --config node:my-special-config</span><br></pre></td></tr></table></figure><h2 id="JavaScript-API"><a href="#JavaScript-API" class="headerlink" title="JavaScript API"></a>JavaScript API</h2><p>The <code>rollup.rollup</code> function receives an input options object as parameter and returns a Promise that resolves to a <code>bundle</code> object with various properties and methods as shown below. During this step, Rollup will build the module graph and perform tree-shaking, but will not generate any output.</p><p>On a <code>bundle</code> object, you can call <code>bundle.generate</code> multiple times with different output options objects to generate different bundles in-memory. If you directly want to write them to disk, use <code>bundle.write</code> instead.</p><p>Once you’re finished with the <code>bundle</code> object, you should call <code>bundle.close()</code>, which will let plugins clean up their external processes or services via the <a href="https://rollupjs.org/guide/en/#closebundle" target="_blank" rel="noopener"><code>closeBundle</code></a> hook.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rollup = <span class="built_in">require</span>(<span class="string">'rollup'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// see below for details on the options</span></span><br><span class="line"><span class="keyword">const</span> inputOptions = &#123;...&#125;;</span><br><span class="line"><span class="keyword">const</span> outputOptions = &#123;...&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">build</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// create a bundle</span></span><br><span class="line">  <span class="keyword">const</span> bundle = <span class="keyword">await</span> rollup.rollup(inputOptions);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(bundle.watchFiles); <span class="comment">// an array of file names this bundle depends on</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// generate output specific code in-memory</span></span><br><span class="line">  <span class="comment">// you can call this function multiple times on the same bundle object</span></span><br><span class="line">  <span class="keyword">const</span> &#123; output &#125; = <span class="keyword">await</span> bundle.generate(outputOptions);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> chunkOrAsset <span class="keyword">of</span> output) &#123;</span><br><span class="line">    <span class="keyword">if</span> (chunkOrAsset.type === <span class="string">'asset'</span>) &#123;</span><br><span class="line">      <span class="comment">// For assets, this contains</span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   fileName: string,              // the asset file name</span></span><br><span class="line">      <span class="comment">//   source: string | Uint8Array    // the asset source</span></span><br><span class="line">      <span class="comment">//   type: 'asset'                  // signifies that this is an asset</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Asset'</span>, chunkOrAsset);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// For chunks, this contains</span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   code: string,                  // the generated JS code</span></span><br><span class="line">      <span class="comment">//   dynamicImports: string[],      // external modules imported dynamically by the chunk</span></span><br><span class="line">      <span class="comment">//   exports: string[],             // exported variable names</span></span><br><span class="line">      <span class="comment">//   facadeModuleId: string | null, // the id of a module that this chunk corresponds to</span></span><br><span class="line">      <span class="comment">//   fileName: string,              // the chunk file name</span></span><br><span class="line">      <span class="comment">//   implicitlyLoadedBefore: string[]; // entries that should only be loaded after this chunk</span></span><br><span class="line">      <span class="comment">//   imports: string[],             // external modules imported statically by the chunk</span></span><br><span class="line">      <span class="comment">//   importedBindings: &#123;[imported: string]: string[]&#125; // imported bindings per dependency</span></span><br><span class="line">      <span class="comment">//   isDynamicEntry: boolean,       // is this chunk a dynamic entry point</span></span><br><span class="line">      <span class="comment">//   isEntry: boolean,              // is this chunk a static entry point</span></span><br><span class="line">      <span class="comment">//   isImplicitEntry: boolean,      // should this chunk only be loaded after other chunks</span></span><br><span class="line">      <span class="comment">//   map: string | null,            // sourcemaps if present</span></span><br><span class="line">      <span class="comment">//   modules: &#123;                     // information about the modules in this chunk</span></span><br><span class="line">      <span class="comment">//     [id: string]: &#123;</span></span><br><span class="line">      <span class="comment">//       renderedExports: string[]; // exported variable names that were included</span></span><br><span class="line">      <span class="comment">//       removedExports: string[];  // exported variable names that were removed</span></span><br><span class="line">      <span class="comment">//       renderedLength: number;    // the length of the remaining code in this module</span></span><br><span class="line">      <span class="comment">//       originalLength: number;    // the original length of the code in this module</span></span><br><span class="line">      <span class="comment">//     &#125;;</span></span><br><span class="line">      <span class="comment">//   &#125;,</span></span><br><span class="line">      <span class="comment">//   name: string                   // the name of this chunk as used in naming patterns</span></span><br><span class="line">      <span class="comment">//   referencedFiles: string[]      // files referenced via import.meta.ROLLUP_FILE_URL_&lt;id&gt;</span></span><br><span class="line">      <span class="comment">//   type: 'chunk',                 // signifies that this is a chunk</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Chunk'</span>, chunkOrAsset.modules);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// or write the bundle to disk</span></span><br><span class="line">  <span class="keyword">await</span> bundle.write(outputOptions);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// closes the bundle</span></span><br><span class="line">  <span class="keyword">await</span> bundle.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">build();</span><br></pre></td></tr></table></figure><p>Rollup also provides a <code>rollup.watch</code> function that rebuilds your bundle when it detects that the individual modules have changed on disk. It is used internally when you run Rollup from the command line with the <code>--watch</code> flag. Note that when using watch mode via the JavaScript API, it is your responsibility to call <code>event.result.close()</code> in response to the <code>BUNDLE_END</code> event to allow plugins to clean up resources in the <a href="https://rollupjs.org/guide/en/#closebundle" target="_blank" rel="noopener"><code>closeBundle</code></a> hook, see below.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rollup = <span class="built_in">require</span>(<span class="string">'rollup'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> watchOptions = &#123;...&#125;;</span><br><span class="line"><span class="keyword">const</span> watcher = rollup.watch(watchOptions);</span><br><span class="line"></span><br><span class="line">watcher.on(<span class="string">'event'</span>, event =&gt; &#123;</span><br><span class="line">  <span class="comment">// event.code can be one of:</span></span><br><span class="line">  <span class="comment">//   START        — the watcher is (re)starting</span></span><br><span class="line">  <span class="comment">//   BUNDLE_START — building an individual bundle</span></span><br><span class="line">  <span class="comment">//                  * event.input will be the input options object if present</span></span><br><span class="line">  <span class="comment">//                  * event.outputFiles cantains an array of the "file" or</span></span><br><span class="line">  <span class="comment">//                    "dir" option values of the generated outputs</span></span><br><span class="line">  <span class="comment">//   BUNDLE_END   — finished building a bundle</span></span><br><span class="line">  <span class="comment">//                  * event.input will be the input options object if present</span></span><br><span class="line">  <span class="comment">//                  * event.outputFiles cantains an array of the "file" or</span></span><br><span class="line">  <span class="comment">//                    "dir" option values of the generated outputs</span></span><br><span class="line">  <span class="comment">//                  * event.duration is the build duration in milliseconds</span></span><br><span class="line">  <span class="comment">//                  * event.result contains the bundle object that can be</span></span><br><span class="line">  <span class="comment">//                    used to generate additional outputs by calling</span></span><br><span class="line">  <span class="comment">//                    bundle.generate or bundle.write. This is especially</span></span><br><span class="line">  <span class="comment">//                    important when the watch.skipWrite option is used.</span></span><br><span class="line">  <span class="comment">//                  You should call "event.result.close()" once you are done</span></span><br><span class="line">  <span class="comment">//                  generating outputs, or if you do not generate outputs.</span></span><br><span class="line">  <span class="comment">//                  This will allow plugins to clean up resources via the</span></span><br><span class="line">  <span class="comment">//                  "closeBundle" hook.</span></span><br><span class="line">  <span class="comment">//   END          — finished building all bundles</span></span><br><span class="line">  <span class="comment">//   ERROR        — encountered an error while bundling</span></span><br><span class="line">  <span class="comment">//                  * event.error contains the error that was thrown</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This will make sure that bundles are properly closed after each run</span></span><br><span class="line">watcher.on(<span class="string">'event'</span>, (&#123; code, result &#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (code === <span class="string">'BUNDLE_END'</span>) &#123;</span><br><span class="line">  	result.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// stop watching</span></span><br><span class="line">watcher.close();</span><br></pre></td></tr></table></figure><h3 id="Programmatically-loading-a-config-file"><a href="#Programmatically-loading-a-config-file" class="headerlink" title="Programmatically loading a config file"></a>Programmatically loading a config file</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadConfigFile = <span class="built_in">require</span>(<span class="string">'rollup/dist/loadConfigFile'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> rollup = <span class="built_in">require</span>(<span class="string">'rollup'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// load the config file next to the current script;</span></span><br><span class="line"><span class="comment">// the provided config object has the same effect as passing "--format es"</span></span><br><span class="line"><span class="comment">// on the command line and will override the format of all outputs</span></span><br><span class="line">loadConfigFile(path.resolve(__dirname, <span class="string">'rollup.config.js'</span>), &#123; <span class="attr">format</span>: <span class="string">'es'</span> &#125;).then(</span><br><span class="line">  <span class="keyword">async</span> (&#123; options, warnings &#125;) =&gt; &#123;</span><br><span class="line">    <span class="comment">// "warnings" wraps the default `onwarn` handler passed by the CLI.</span></span><br><span class="line">    <span class="comment">// This prints all warnings up to this point:</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`We currently have <span class="subst">$&#123;warnings.count&#125;</span> warnings`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This prints all deferred warnings</span></span><br><span class="line">    warnings.flush();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// options is an array of "inputOptions" objects with an additional "output"</span></span><br><span class="line">    <span class="comment">// property that contains an array of "outputOptions".</span></span><br><span class="line">    <span class="comment">// The following will generate all outputs for all inputs, and write them to disk the same</span></span><br><span class="line">    <span class="comment">// way the CLI does it:</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> optionsObj <span class="keyword">of</span> options) &#123;</span><br><span class="line">      <span class="keyword">const</span> bundle = <span class="keyword">await</span> rollup.rollup(optionsObj);</span><br><span class="line">      <span class="keyword">await</span> <span class="built_in">Promise</span>.all(optionsObj.output.map(bundle.write));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// You can also pass this directly to "rollup.watch"</span></span><br><span class="line">    rollup.watch(options);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="Plugin-Development"><a href="#Plugin-Development" class="headerlink" title="Plugin Development"></a>Plugin Development</h3><h3 id="Conventions"><a href="#Conventions" class="headerlink" title="Conventions"></a>Conventions</h3><ul><li>Plugins should have a clear name with <code>rollup-plugin-</code> prefix.</li><li>Include <code>rollup-plugin</code> keyword in <code>package.json</code>.</li><li>Plugins should be tested. We recommend <a href="https://github.com/mochajs/mocha" target="_blank" rel="noopener">mocha</a> or <a href="https://github.com/avajs/ava" target="_blank" rel="noopener">ava</a> which support promises out of the box.</li><li>Use asynchronous methods when it is possible.</li><li>Document your plugin in English.</li><li>Make sure your plugin outputs correct source mappings if appropriate.</li><li>If your plugin uses ‘virtual modules’ (e.g. for helper functions), prefix the module ID with <code>\0</code>. This prevents other plugins from trying to process it.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup-plugin-my-example.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">myExample</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name: <span class="string">'my-example'</span>, <span class="comment">// this name will show up in warnings and errors</span></span><br><span class="line">    resolveId ( source ) &#123;</span><br><span class="line">      <span class="keyword">if</span> (source === <span class="string">'virtual-module'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> source; <span class="comment">// this signals that rollup should not ask other plugins or check the file system to find this id</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// other ids should be handled as usually</span></span><br><span class="line">    &#125;,</span><br><span class="line">    load ( id ) &#123;</span><br><span class="line">      <span class="keyword">if</span> (id === <span class="string">'virtual-module'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'export default "This is virtual!"'</span>; <span class="comment">// the source code for "virtual-module"</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// other ids should be handled as usually</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">import</span> myExample <span class="keyword">from</span> <span class="string">'./rollup-plugin-my-example.js'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123;</span><br><span class="line">  input: <span class="string">'virtual-module'</span>, <span class="comment">// resolved by our plugin</span></span><br><span class="line">  plugins: [myExample()],</span><br><span class="line">  output: [&#123;</span><br><span class="line">    file: <span class="string">'bundle.js'</span>,</span><br><span class="line">    format: <span class="string">'es'</span></span><br><span class="line">  &#125;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/Rollup/" title="Rollup" target="_blank" rel="external">https://molly2molly.github.io/Rollup/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/图形算法/" title="图形算法"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/JS-Plugin/" title="JS-Plugin"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html>