<!-- build time:Thu Dec 24 2020 15:45:30 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>Angular | Hexo</title><meta name="description" content="123456789101112131415npm install -g @angular/cling new my-appcd my-appng serve --openng analytics project offng build my-app -c productionng generate component heroesng generate component heroes -t #s"><meta property="og:type" content="article"><meta property="og:title" content="Angular"><meta property="og:url" content="https://molly2molly.github.io/Angular/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="123456789101112131415npm install -g @angular/cling new my-appcd my-appng serve --openng analytics project offng build my-app -c productionng generate component heroesng generate component heroes -t #s"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2020-09-21T03:33:38.816Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Angular"><meta name="twitter:description" content="123456789101112131415npm install -g @angular/cling new my-appcd my-appng serve --openng analytics project offng build my-app -c productionng generate component heroesng generate component heroes -t #s"><link rel="canonical" href="https://molly2molly.github.io/Angular/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-javascript/">es6 javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/React/" style="font-size:13px">React</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/es6-javascript/" style="font-size:13px">es6 javascript</a> <a href="/tags/javascript/" style="font-size:14px">javascript</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/webpack/" style="font-size:13px">webpack</a> <a href="/tags/数据结构/" style="font-size:14px">数据结构</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/" class="title">GridLayout</a></p><p class="item-date"><time datetime="2020-12-24T07:13:47.000Z" itemprop="datePublished">2020-12-24</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Flexbox/" class="title">Flexbox</a></p><p class="item-date"><time datetime="2020-12-24T06:01:50.000Z" itemprop="datePublished">2020-12-24</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/快速排序/" class="title">快速排序</a></p><p class="item-date"><time datetime="2020-12-14T06:10:04.000Z" itemprop="datePublished">2020-12-14</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/快速选择/" class="title">快速选择</a></p><p class="item-date"><time datetime="2020-12-14T06:10:04.000Z" itemprop="datePublished">2020-12-14</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/栈和队列/" class="title">栈和队列</a></p><p class="item-date"><time datetime="2020-12-07T08:13:41.000Z" itemprop="datePublished">2020-12-07</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-Angular" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">Angular</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/Angular/" class="article-date"><time datetime="2020-05-07T03:30:40.000Z" itemprop="datePublished">2020-05-07</time></a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/Angular/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @angular/cli</span><br><span class="line">ng new my-app</span><br><span class="line"><span class="built_in">cd</span> my-app</span><br><span class="line">ng serve --open</span><br><span class="line">ng analytics project off</span><br><span class="line">ng build my-app -c production</span><br><span class="line"></span><br><span class="line">ng generate component heroes</span><br><span class="line">ng generate component heroes -t <span class="comment">#short for inlineTemplate=true</span></span><br><span class="line">ng generate component heroes --inline-style</span><br><span class="line">ng generate class hero</span><br><span class="line">ng generate pipe </span><br><span class="line">ng generate directive highlight</span><br><span class="line">ng generate service hero</span><br><span class="line">ng generate module app-routing --flat --module=app</span><br></pre></td></tr></table></figure><p>test : Karma + jasmine + chai + puppeteer<br>build : gulp</p><h3 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; NgModule &#125; from &apos;@angular/core&apos;;</span><br><span class="line">import &#123; BrowserModule &#125; from &apos;@angular/platform-browser&apos;;</span><br><span class="line">import &#123; FormsModule &#125; from &apos;@angular/forms&apos;;</span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  imports:      [ BrowserModule, FormsModule ],</span><br><span class="line">  providers:    [ Logger ],</span><br><span class="line">  declarations: [ AppComponent ],</span><br><span class="line">  exports:      [ AppComponent ],</span><br><span class="line">  bootstrap:    [ AppComponent ]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure><h3 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, OnInit &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">class Hero &#123;</span><br><span class="line">  constructor(</span><br><span class="line">    public id: number,</span><br><span class="line">    public name: string) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-heros&apos;,</span><br><span class="line">  // styleUrls: [&apos;./app.component.css&apos;]</span><br><span class="line">  // templateUrl: &apos;./app.component.html&apos;,</span><br><span class="line">  template: `</span><br><span class="line">  &lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;My favorite hero is: &#123;&#123;myHero.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;p&gt;Heroes:&lt;/p&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li *ngFor=&quot;let hero of heroes&quot;&gt;</span><br><span class="line">      &#123;&#123; hero.name &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;p *ngIf=&quot;heroes.length &gt; 3&quot;&gt;There are many heroes!&lt;/p&gt;</span><br><span class="line">`</span><br><span class="line">&#125;)</span><br><span class="line">export class HerosComponent implements OnInit &#123;</span><br><span class="line"></span><br><span class="line">  title = &apos;Tour of Heroes&apos;;</span><br><span class="line">  heroes = [</span><br><span class="line">    new Hero(1, &apos;Windstorm&apos;),</span><br><span class="line">    new Hero(13, &apos;Bombasto&apos;),</span><br><span class="line">    new Hero(15, &apos;Magneta&apos;),</span><br><span class="line">    new Hero(20, &apos;Tornado&apos;)</span><br><span class="line">  ];</span><br><span class="line">  myHero = this.heroes[0];</span><br><span class="line"></span><br><span class="line">  constructor() &#123; &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit(): void &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Data-binding"><a href="#Data-binding" class="headerlink" title="Data binding"></a>Data binding</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># one-way from data source to view target</span><br><span class="line"></span><br><span class="line">&#123;&#123;expression&#125;&#125;  -  interpolation</span><br><span class="line">[target]=&quot;expression&quot;  -  property bounding</span><br><span class="line">bind-target=&quot;expression&quot;</span><br><span class="line"></span><br><span class="line"># one-way from view target to data source</span><br><span class="line"></span><br><span class="line">(target)=&quot;statement&quot;  -  event binding</span><br><span class="line">on-target=&quot;statement&quot;</span><br><span class="line"></span><br><span class="line"># two-way</span><br><span class="line"></span><br><span class="line">[(target)]=&quot;expression&quot;</span><br><span class="line">bindon-target=&quot;expression&quot;</span><br></pre></td></tr></table></figure><h4 id="User-Input"><a href="#User-Input" class="headerlink" title="User Input"></a>User Input</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;button (click)=&quot;onClickMe()&quot;&gt;Click me!&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;input (keyup)=&quot;onKey($event)&quot;&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;values&#125;&#125;&lt;/p&gt;</span><br><span class="line">export class KeyUpComponent &#123;</span><br><span class="line">  values = &apos;&apos;;</span><br><span class="line">  onKey(event: KeyboardEvent) &#123;</span><br><span class="line">    this.values += (event.target as HTMLInputElement).value + &apos; | &apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">缺点：包含全部 DOM event 信息的$event整个传入component method, 不符合关注点分离原则</span><br><span class="line">最佳实践：pass values, not element</span><br><span class="line"></span><br><span class="line">##### get user input from a template reference variable</span><br><span class="line">##### this won&apos;t work at all unless you bind to an event</span><br><span class="line">##### (keyup)=&quot;0&quot; the shortest template statement possible</span><br><span class="line">&lt;input #box (keyup)=&quot;0&quot;&gt; </span><br><span class="line">&lt;p&gt;&#123;&#123;box.value&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;input #box (keyup)=&quot;onKey(box.value)&quot;&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;values&#125;&#125;&lt;/p&gt;</span><br><span class="line">export class KeyUpComponent &#123;</span><br><span class="line">  values = &apos;&apos;;</span><br><span class="line">  onKey(value: string) &#123;</span><br><span class="line">    this.values += value + &apos; | &apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">##### key event filtering(with key.enter)</span><br><span class="line">&lt;input #box (keyup.enter)=&quot;update(box.value)&quot; (blur)=&quot;update(box.value);box.value=&apos;&apos;&quot;&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;value&#125;&#125;&lt;/p&gt;</span><br><span class="line">export class KeyUpComponent &#123;</span><br><span class="line">  value = &apos;&apos;;</span><br><span class="line">  update(value: string) &#123; this.value = value; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Pipes"><a href="#Pipes" class="headerlink" title="Pipes"></a>Pipes</h4><ul><li>AsyncPipe : impure pipe</li><li>CurrencyPipe</li><li>DatePipe</li><li>DecimalPipe</li><li>I18nPluralPipe</li><li>I18nSelectPipe</li><li>JsonPipe</li><li>KeyValuePipe</li><li>LowerCasePipe</li><li>PercentPipe</li><li>SlicePipe</li><li>TitleCasePipe</li><li>UpperCasePipe</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; birthday | date &#125;&#125;</span><br><span class="line">&#123;&#123; birthday | date:<span class="string">"yyyy-MM-dd HH:mm:ss"</span> &#125;&#125;</span><br><span class="line">&#123;&#123; birthday | date | uppercase&#125;&#125;</span><br><span class="line">&#123;&#123; amount | currency:<span class="string">'en-US'</span>&#125;&#125;</span><br><span class="line">&#123;&#123; amount | currency:<span class="string">'EUR'</span> &#125;&#125;</span><br><span class="line">&#123;&#123; amount | currency:<span class="string">'EUR'</span>:<span class="string">'Euros '</span>&#125;&#125;</span><br><span class="line">&#123;&#123; amount | slice:<span class="number">1</span>:<span class="number">5</span> &#125;&#125;</span><br></pre></td></tr></table></figure><h5 id="create-custom-pipe"><a href="#create-custom-pipe" class="headerlink" title="create custom pipe"></a>create custom pipe</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Pipe, PipeTransform &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Pipe(&#123; </span><br><span class="line">	name: <span class="string">'exponentialStrength'</span>,</span><br><span class="line">	pure: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ExponentialStrengthPipe</span> <span class="title">implements</span> <span class="title">PipeTransform</span> </span>&#123;</span><br><span class="line">  transform(value: number, exponent?: number): number &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.pow(value, <span class="built_in">isNaN</span>(exponent) ? <span class="number">1</span> : exponent);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; FormsModule &#125; <span class="keyword">from</span> <span class="string">'@angular/forms'</span>;</span><br><span class="line">&lt;div&gt;Normal power: &lt;input [(ngModel)]="power"&gt;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;Boost factor: &lt;input [(ngModel)]="factor"&gt;&lt;/div&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">  Super Hero Power: &#123;&#123;power | exponentialStrength: factor&#125;&#125;</span><br><span class="line">&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">export class PowerBoostCalculatorComponent &#123;</span></span><br><span class="line"><span class="regexp">  power = 5;</span></span><br><span class="line"><span class="regexp">  factor = 1;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h5 id="detecting-pure-changes-to-primitives-and-object-references"><a href="#detecting-pure-changes-to-primitives-and-object-references" class="headerlink" title="detecting pure changes to primitives and object references"></a>detecting pure changes to primitives and object references</h5><p>By default, pipes are defined as pure so that Angular executes the pipe only when it detects a pure change to the input value.<br>A pure change is either a change to a primitive input value (such as String, Number, Boolean, or Symbol), or a changed object reference (such as Date, Array, Function, or Object).</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Pipe, PipeTransform &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Pipe(&#123; <span class="attr">name</span>: <span class="string">'flyingHeroes'</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyingHeroesPipe</span> <span class="title">implements</span> <span class="title">PipeTransform</span> </span>&#123;</span><br><span class="line">  transform(allHeroes: Flyer[]) &#123;</span><br><span class="line">    <span class="keyword">return</span> allHeroes.filter(<span class="function"><span class="params">hero</span> =&gt;</span> hero.canFly);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@Pipe(&#123;</span><br><span class="line">  name: <span class="string">'flyingHeroesImpure'</span>,</span><br><span class="line">  pure: <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyingHeroesImpurePipe</span> <span class="keyword">extends</span> <span class="title">FlyingHeroesPipe</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><h5 id="Unwrapping-data-from-an-observable"><a href="#Unwrapping-data-from-an-observable" class="headerlink" title="Unwrapping data from an observable"></a>Unwrapping data from an observable</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Observable, interval &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; map, take &#125; <span class="keyword">from</span> <span class="string">'rxjs/operators'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-hero-message'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h2&gt;Async Hero Message and AsyncPipe&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;Message: &#123;&#123; message$ | async &#125;&#125;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;button (click)="resend()"&gt;Resend&lt;/button&gt;`</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HeroAsyncMessageComponent</span> </span>&#123;</span><br><span class="line">  message$: Observable&lt;string&gt;;</span><br><span class="line"></span><br><span class="line">  private messages = [</span><br><span class="line">    <span class="string">'You are my hero!'</span>,</span><br><span class="line">    <span class="string">'You are the best hero!'</span>,</span><br><span class="line">    <span class="string">'Will you be my hero?'</span></span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>() &#123; <span class="keyword">this</span>.resend(); &#125;</span><br><span class="line"></span><br><span class="line">  resend() &#123;</span><br><span class="line">    <span class="keyword">this</span>.message$ = interval(<span class="number">500</span>).pipe(</span><br><span class="line">      map(<span class="function"><span class="params">i</span> =&gt;</span> <span class="keyword">this</span>.messages[i]),</span><br><span class="line">      take(<span class="keyword">this</span>.messages.length)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Alternative message$ formula:</span></span><br><span class="line"><span class="comment">// this.message$ = fromArray(this.messages).pipe(</span></span><br><span class="line"><span class="comment">//   map(message =&gt; timer(500),</span></span><br><span class="line"><span class="comment">//   map(() =&gt; message)),</span></span><br><span class="line"><span class="comment">//   concatAll()</span></span><br><span class="line"><span class="comment">// );</span></span><br></pre></td></tr></table></figure><h5 id="caching-HTTP-requests"><a href="#caching-HTTP-requests" class="headerlink" title="caching HTTP requests"></a>caching HTTP requests</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; HttpClient &#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Pipe, PipeTransform &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line">@Pipe(&#123;</span><br><span class="line">  name: <span class="string">'fetch'</span>,</span><br><span class="line">  pure: <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">FetchJsonPipe</span> <span class="title">implements</span> <span class="title">PipeTransform</span> </span>&#123;</span><br><span class="line">  private cachedData: any = <span class="literal">null</span>;</span><br><span class="line">  private cachedUrl = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(private http: HttpClient) &#123; &#125;</span><br><span class="line"></span><br><span class="line">  transform(url: string): any &#123;</span><br><span class="line">    <span class="keyword">if</span> (url !== <span class="keyword">this</span>.cachedUrl) &#123;</span><br><span class="line">      <span class="keyword">this</span>.cachedData = <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">this</span>.cachedUrl = url;</span><br><span class="line">      <span class="keyword">this</span>.http.get(url).subscribe(<span class="function"><span class="params">result</span> =&gt;</span> <span class="keyword">this</span>.cachedData = result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.cachedData;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div *ngFor=<span class="string">"let hero of ('assets/heroes.json' | fetch) "</span>&gt;</span><br><span class="line">  &#123;&#123;hero.name&#125;&#125;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;Heroes as JSON:</span></span><br><span class="line"><span class="regexp">  &#123;&#123;'assets/</span>heroes.json<span class="string">' | fetch | json&#125;&#125;</span></span><br><span class="line"><span class="string">&lt;/p&gt;`</span></span><br></pre></td></tr></table></figure><h4 id="Component-lifecycle-hooks"><a href="#Component-lifecycle-hooks" class="headerlink" title="Component lifecycle hooks"></a>Component lifecycle hooks</h4><table><thead><tr><th>Hook</th><th>Purpose</th><th>Timing</th></tr></thead><tbody><tr><td>ngOnChanges()</td><td>Respond when Angular sets or resets data-bound input properties. The method receives a <code>SimpleChanges</code> object of current and previous property values. Note that this happens very frequently, so any operation you perform here impacts performance significantly.</td><td>Called before <code>ngOnInit()</code> and whenever one or more data-bound input properties change.</td></tr><tr><td>ngOnInit()</td><td>Initialize the directive or component after Angular first displays the data-bound properties and sets the directive or component’s input properties.</td><td>Called once, after the first <code>ngOnChanges()</code>.</td></tr><tr><td>ngDoCheck()</td><td>Detect and act upon changes that Angular can’t or won’t detect on its own.</td><td>Called immediately after <code>ngOnChanges()</code> on every change detection run, and immediately after <code>ngOnInit()</code> on the first run.</td></tr><tr><td>ngAfterContentInit()</td><td>Respond after Angular projects external content into the component’s view, or into the view that a directive is in.</td><td>Called <em>once</em> after the first <code>ngDoCheck()</code>.</td></tr><tr><td>ngAfterContentChecked()</td><td>Respond after Angular checks the content projected into the directive or component.</td><td>Called after <code>ngAfterContentInit()</code> and every subsequent <code>ngDoCheck()</code>.</td></tr><tr><td>ngAfterViewInit()</td><td>Respond after Angular initializes the component’s views and child views, or the view that contains the directive.</td><td>Called <em>once</em> after the first <code>ngAfterContentChecked()</code>.</td></tr><tr><td>ngAfterViewChecked()</td><td>Respond after Angular checks the component’s views and child views, or the view that contains the directive.</td><td>Called after the <code>ngAfterViewInit()</code> and every subsequent <code>ngAfterContentChecked()</code>.</td></tr><tr><td>ngOnDestroy()</td><td>Cleanup just before Angular destroys the directive or component. Unsubscribe Observables and detach event handlers to avoid memory leaks.</td><td>Called immediately before Angular destroys the directive or component.</td></tr></tbody></table><h5 id="Initializing-a-component-or-directive"><a href="#Initializing-a-component-or-directive" class="headerlink" title="Initializing a component or directive"></a>Initializing a component or directive</h5><p>Use the <code>ngOnInit()</code> method to perform the following initialization tasks.</p><ul><li>Perform complex initializations outside of the constructor. Components should be cheap and safe to construct. You should not, for example, fetch data in a component constructor.</li><li>Set up the component after Angular sets the input properties. Constructors should do no more than set the initial local variables to simple values.</li></ul><h5 id="Cleaning-up-on-instance-destruction"><a href="#Cleaning-up-on-instance-destruction" class="headerlink" title="Cleaning up on instance destruction"></a>Cleaning up on instance destruction</h5><p>Put cleanup logic in <code>ngOnDestroy()</code>, the logic that must run before Angular destroys the directive.</p><ul><li><p>Unsubscribe from Observables and DOM events.</p></li><li><p>Stop interval timers.</p></li><li><p>Unregister all callbacks that the directive registered with global or application services.</p></li><li><p>notify another part of the application that the component is going away.</p></li></ul><h4 id="Component-Interaction"><a href="#Component-Interaction" class="headerlink" title="Component Interaction"></a>Component Interaction</h4><ul><li><p>pass data from parent to child with input binding</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># parent</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-hero-parent'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;app-hero-child *ngFor="let hero of heroes"</span></span><br><span class="line"><span class="string">      [hero]="hero"</span></span><br><span class="line"><span class="string">      [master]="master"&gt;</span></span><br><span class="line"><span class="string">    &lt;/app-hero-child&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HeroParentComponent</span> </span>&#123;</span><br><span class="line">  heroes = HEROES;</span><br><span class="line">  master = <span class="string">'Master'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># child</span><br><span class="line"><span class="keyword">import</span> &#123; Component, Input &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-hero-child'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;p&gt;I, &#123;&#123;hero.name&#125;&#125;, am at your service, &#123;&#123;masterName&#125;&#125;.&lt;/p&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HeroChildComponent</span> </span>&#123;</span><br><span class="line">  @Input() hero: Hero;</span><br><span class="line">  @Input(<span class="string">'master'</span>) masterName: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>intercept input property changes with a setter</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># parent</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-name-parent'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;app-name-child *ngFor="let name of names" [name]="name"&gt;&lt;/app-name-child&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">NameParentComponent</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Displays 'Dr IQ', '&lt;no name set&gt;', 'Bombasto'</span></span><br><span class="line">  names = [<span class="string">'Dr IQ'</span>, <span class="string">'   '</span>, <span class="string">'  Bombasto  '</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># child</span><br><span class="line"><span class="keyword">import</span> &#123; Component, Input &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-name-child'</span>,</span><br><span class="line">  template: <span class="string">'&lt;h3&gt;"&#123;&#123;name&#125;&#125;"&lt;/h3&gt;'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">NameChildComponent</span> </span>&#123;</span><br><span class="line">  private _name = <span class="string">''</span>;</span><br><span class="line">  @Input()</span><br><span class="line">  get name(): string &#123; <span class="keyword">return</span> <span class="keyword">this</span>._name; &#125;</span><br><span class="line">  set name(name: string) &#123;</span><br><span class="line">    <span class="keyword">this</span>._name = (name &amp;&amp; name.trim()) || <span class="string">'&lt;no name set&gt;'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>intercept input property changes with ngOnChanges()</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"># parent</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-version-parent'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;button (click)="newMinor()"&gt;New minor version&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;button (click)="newMajor()"&gt;New major version&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;app-version-child [major]="major" [minor]="minor"&gt;&lt;/app-version-child&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">VersionParentComponent</span> </span>&#123;</span><br><span class="line">  major = <span class="number">1</span>;</span><br><span class="line">  minor = <span class="number">23</span>;</span><br><span class="line"></span><br><span class="line">  newMinor() &#123;</span><br><span class="line">    <span class="keyword">this</span>.minor++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  newMajor() &#123;</span><br><span class="line">    <span class="keyword">this</span>.major++;</span><br><span class="line">    <span class="keyword">this</span>.minor = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># child</span><br><span class="line"><span class="keyword">import</span> &#123; Component, Input, OnChanges, SimpleChange &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-version-child'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h3&gt;Version &#123;&#123;major&#125;&#125;.&#123;&#123;minor&#125;&#125;&lt;/h3&gt;</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">      &lt;li *ngFor="let change of changeLog"&gt;&#123;&#123;change&#125;&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">VersionChildComponent</span> <span class="title">implements</span> <span class="title">OnChanges</span> </span>&#123;</span><br><span class="line">  @Input() major: number;</span><br><span class="line">  @Input() minor: number;</span><br><span class="line">  changeLog: string[] = [];</span><br><span class="line"></span><br><span class="line">  ngOnChanges(changes: &#123; [propKey: string]: SimpleChange &#125; ) &#123;</span><br><span class="line">    <span class="keyword">const</span> log: string[] = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> propName <span class="keyword">in</span> changes) &#123;</span><br><span class="line">      <span class="keyword">const</span> changedProp = changes[propName];</span><br><span class="line">      <span class="keyword">const</span> to = <span class="built_in">JSON</span>.stringify(changedProp.currentValue);</span><br><span class="line">      <span class="keyword">if</span> (changedProp.isFirstChange()) &#123;</span><br><span class="line">        log.push(<span class="string">`Initial value of <span class="subst">$&#123;propName&#125;</span> set to <span class="subst">$&#123;to&#125;</span>`</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">from</span> = <span class="built_in">JSON</span>.stringify(changedProp.previousValue);</span><br><span class="line">        log.push(<span class="string">`<span class="subst">$&#123;propName&#125;</span> changed from <span class="subst">$&#123;<span class="keyword">from</span>&#125;</span> to <span class="subst">$&#123;to&#125;</span>`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.changeLog.push(log.join(<span class="string">', '</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>parent listens for child event</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># parent</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-vote-taker'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h3&gt;Agree: &#123;&#123;agreed&#125;&#125;, Disagree: &#123;&#123;disagreed&#125;&#125;&lt;/h3&gt;</span></span><br><span class="line"><span class="string">    &lt;app-voter *ngFor="let voter of voters"</span></span><br><span class="line"><span class="string">      [name]="voter"</span></span><br><span class="line"><span class="string">      (voted)="onVoted($event)"&gt;</span></span><br><span class="line"><span class="string">    &lt;/app-voter&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">VoteTakerComponent</span> </span>&#123;</span><br><span class="line">  agreed = <span class="number">0</span>;</span><br><span class="line">  disagreed = <span class="number">0</span>;</span><br><span class="line">  voters = [<span class="string">'Narco'</span>, <span class="string">'Celeritas'</span>, <span class="string">'Bombasto'</span>];</span><br><span class="line"></span><br><span class="line">  onVoted(agreed: boolean) &#123;</span><br><span class="line">    agreed ? <span class="keyword">this</span>.agreed++ : <span class="keyword">this</span>.disagreed++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># child</span><br><span class="line"><span class="keyword">import</span> &#123; Component, EventEmitter, Input, Output &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-voter'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h4&gt;&#123;&#123;name&#125;&#125;&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;button (click)="vote(true)"  [disabled]="didVote"&gt;Agree&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;button (click)="vote(false)" [disabled]="didVote"&gt;Disagree&lt;/button&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">VoterComponent</span> </span>&#123;</span><br><span class="line">  @Input()  name: string;</span><br><span class="line">  @Output() voted = <span class="keyword">new</span> EventEmitter&lt;boolean&gt;();</span><br><span class="line">  didVote = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  vote(agreed: boolean) &#123;</span><br><span class="line">    <span class="keyword">this</span>.voted.emit(agreed);</span><br><span class="line">    <span class="keyword">this</span>.didVote = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>parent interacts with child via local variable</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"># parent</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-countdown-parent-lv'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;button (click)="timer.start()"&gt;Start&lt;/button&gt;</span></span><br><span class="line"><span class="string">  &lt;button (click)="timer.stop()"&gt;Stop&lt;/button&gt;</span></span><br><span class="line"><span class="string">  &lt;div class="seconds"&gt;&#123;&#123;timer.seconds&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;app-countdown-timer #timer&gt;&lt;/app-countdown-timer&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">CountdownLocalVarParentComponent</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"># child</span><br><span class="line"><span class="keyword">import</span> &#123; Component, OnDestroy, OnInit &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-countdown-timer'</span>,</span><br><span class="line">  template: <span class="string">'&lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">CountdownTimerComponent</span> <span class="title">implements</span> <span class="title">OnInit</span>, <span class="title">OnDestroy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  intervalId = <span class="number">0</span>;</span><br><span class="line">  message = <span class="string">''</span>;</span><br><span class="line">  seconds = <span class="number">11</span>;</span><br><span class="line"></span><br><span class="line">  clearTimer() &#123; clearInterval(<span class="keyword">this</span>.intervalId); &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit()    &#123; <span class="keyword">this</span>.start(); &#125;</span><br><span class="line">  ngOnDestroy() &#123; <span class="keyword">this</span>.clearTimer(); &#125;</span><br><span class="line"></span><br><span class="line">  start() &#123; <span class="keyword">this</span>.countDown(); &#125;</span><br><span class="line">  stop()  &#123;</span><br><span class="line">    <span class="keyword">this</span>.clearTimer();</span><br><span class="line">    <span class="keyword">this</span>.message = <span class="string">`Holding at T-<span class="subst">$&#123;<span class="keyword">this</span>.seconds&#125;</span> seconds`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private countDown() &#123;</span><br><span class="line">    <span class="keyword">this</span>.clearTimer();</span><br><span class="line">    <span class="keyword">this</span>.intervalId = <span class="built_in">window</span>.setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.seconds -= <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.seconds === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.message = <span class="string">'Blast off!'</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.seconds &lt; <span class="number">0</span>) &#123; <span class="keyword">this</span>.seconds = <span class="number">10</span>; &#125; <span class="comment">// reset</span></span><br><span class="line">        <span class="keyword">this</span>.message = <span class="string">`T-<span class="subst">$&#123;<span class="keyword">this</span>.seconds&#125;</span> seconds and counting`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>parent calls an @ViewChild()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># parent</span><br><span class="line">import &#123; AfterViewInit, ViewChild &#125; from &apos;@angular/core&apos;;</span><br><span class="line">import &#123; Component &#125; from &apos;@angular/core&apos;;</span><br><span class="line">import &#123; CountdownTimerComponent &#125; from &apos;./countdown-timer.component&apos;;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-countdown-parent-vc&apos;,</span><br><span class="line">  template: `</span><br><span class="line">  &lt;h3&gt;Countdown to Liftoff (via ViewChild)&lt;/h3&gt;</span><br><span class="line">  &lt;button (click)=&quot;start()&quot;&gt;Start&lt;/button&gt;</span><br><span class="line">  &lt;button (click)=&quot;stop()&quot;&gt;Stop&lt;/button&gt;</span><br><span class="line">  &lt;div class=&quot;seconds&quot;&gt;&#123;&#123; seconds() &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;app-countdown-timer&gt;&lt;/app-countdown-timer&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class CountdownViewChildParentComponent implements AfterViewInit &#123;</span><br><span class="line"></span><br><span class="line">  @ViewChild(CountdownTimerComponent) </span><br><span class="line">  private timerComponent: CountdownTimerComponent;</span><br><span class="line"></span><br><span class="line">  seconds() &#123; return 0; &#125;</span><br><span class="line"></span><br><span class="line">  ngAfterViewInit() &#123;</span><br><span class="line">    // Redefine `seconds()` to get from the `CountdownTimerComponent.seconds` ...</span><br><span class="line">    // but wait a tick first to avoid one-time devMode</span><br><span class="line">    // unidirectional-data-flow-violation error</span><br><span class="line">    //  Angular&apos;s unidirectional data flow rule prevents updating the parent view&apos;s in the same cycle. </span><br><span class="line">    setTimeout(() =&gt; this.seconds = () =&gt; this.timerComponent.seconds, 0);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  start() &#123; this.timerComponent.start(); &#125;</span><br><span class="line">  stop() &#123; this.timerComponent.stop(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>parent and children communicate via a service</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"># service</span><br><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Subject &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line">@Injectable()</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MissionService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  private missionAnnouncedSource = <span class="keyword">new</span> Subject&lt;string&gt;();</span><br><span class="line">  private missionConfirmedSource = <span class="keyword">new</span> Subject&lt;string&gt;();</span><br><span class="line"></span><br><span class="line">  missionAnnounced$ = <span class="keyword">this</span>.missionAnnouncedSource.asObservable();</span><br><span class="line">  missionConfirmed$ = <span class="keyword">this</span>.missionConfirmedSource.asObservable();</span><br><span class="line"></span><br><span class="line">  announceMission(mission: string) &#123;</span><br><span class="line">    <span class="keyword">this</span>.missionAnnouncedSource.next(mission);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  confirmMission(astronaut: string) &#123;</span><br><span class="line">    <span class="keyword">this</span>.missionConfirmedSource.next(astronaut);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># parent</span><br><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MissionService &#125; <span class="keyword">from</span> <span class="string">'./mission.service'</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-mission-control'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;button (click)="announce()"&gt;Announce mission&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;app-astronaut *ngFor="let astronaut of astronauts"</span></span><br><span class="line"><span class="string">      [astronaut]="astronaut"&gt;</span></span><br><span class="line"><span class="string">    &lt;/app-astronaut&gt;</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">      &lt;li *ngFor="let event of history"&gt;&#123;&#123;event&#125;&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  providers: [MissionService]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MissionControlComponent</span> </span>&#123;</span><br><span class="line">  astronauts = [<span class="string">'Lovell'</span>, <span class="string">'Swigert'</span>, <span class="string">'Haise'</span>];</span><br><span class="line">  history: string[] = [];</span><br><span class="line">  missions = [<span class="string">'Fly to the moon!'</span>,</span><br><span class="line">              <span class="string">'Fly to mars!'</span>,</span><br><span class="line">              <span class="string">'Fly to Vegas!'</span>];</span><br><span class="line">  nextMission = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(private missionService: MissionService) &#123;</span><br><span class="line">    missionService.missionConfirmed$.subscribe(</span><br><span class="line">      astronaut =&gt; &#123;</span><br><span class="line">        <span class="keyword">this</span>.history.push(<span class="string">`<span class="subst">$&#123;astronaut&#125;</span> confirmed the mission`</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  announce() &#123;</span><br><span class="line">    <span class="keyword">const</span> mission = <span class="keyword">this</span>.missions[<span class="keyword">this</span>.nextMission++];</span><br><span class="line">    <span class="keyword">this</span>.missionService.announceMission(mission);</span><br><span class="line">    <span class="keyword">this</span>.history.push(<span class="string">`Mission "<span class="subst">$&#123;mission&#125;</span>" announced`</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.nextMission &gt;= <span class="keyword">this</span>.missions.length) &#123; <span class="keyword">this</span>.nextMission = <span class="number">0</span>; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># child</span><br><span class="line"><span class="keyword">import</span> &#123; Component, Input, OnDestroy &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; MissionService &#125; <span class="keyword">from</span> <span class="string">'./mission.service'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Subscription &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-astronaut'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;p&gt;</span></span><br><span class="line"><span class="string">      &#123;&#123;astronaut&#125;&#125;: &lt;strong&gt;&#123;&#123;mission&#125;&#125;&lt;/strong&gt;</span></span><br><span class="line"><span class="string">      &lt;button</span></span><br><span class="line"><span class="string">        (click)="confirm()"</span></span><br><span class="line"><span class="string">        [disabled]="!announced || confirmed"&gt;</span></span><br><span class="line"><span class="string">        Confirm</span></span><br><span class="line"><span class="string">      &lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AstronautComponent</span> <span class="title">implements</span> <span class="title">OnDestroy</span> </span>&#123;</span><br><span class="line">  @Input() astronaut: string;</span><br><span class="line">  mission = <span class="string">'&lt;no mission announced&gt;'</span>;</span><br><span class="line">  confirmed = <span class="literal">false</span>;</span><br><span class="line">  announced = <span class="literal">false</span>;</span><br><span class="line">  subscription: Subscription;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(private missionService: MissionService) &#123;</span><br><span class="line">    <span class="keyword">this</span>.subscription = missionService.missionAnnounced$.subscribe(</span><br><span class="line">      mission =&gt; &#123;</span><br><span class="line">        <span class="keyword">this</span>.mission = mission;</span><br><span class="line">        <span class="keyword">this</span>.announced = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.confirmed = <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  confirm() &#123;</span><br><span class="line">    <span class="keyword">this</span>.confirmed = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">this</span>.missionService.confirmMission(<span class="keyword">this</span>.astronaut);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngOnDestroy() &#123;</span><br><span class="line">    <span class="comment">// prevent memory leak when component destroyed</span></span><br><span class="line">    <span class="keyword">this</span>.subscription.unsubscribe();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="Component-Styles"><a href="#Component-Styles" class="headerlink" title="Component Styles"></a>Component Styles</h4><ul><li><p>using component styles</p><ul><li>The styles specified in <code>@Component</code> metadata <em>apply only within the template of that component</em>.</li><li>They are <em>not inherited</em> by any components nested within the template nor by any content projected into the component.</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-root&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;h1&gt;Tour of Heroes&lt;/h1&gt;</span><br><span class="line">  `,</span><br><span class="line">  styles: [&apos;h1 &#123; font-weight: normal; &#125;&apos;]</span><br><span class="line">&#125;)</span><br><span class="line">export class HeroAppComponent &#123;</span><br><span class="line">/* . . . */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Special selectors</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># The :host selector is the only way to target the host element. You can't reach the host element from inside the component with other selectors because it's not part of the component's own template. The host element is in a parent component's template.</span><br><span class="line"><span class="selector-pseudo">:host</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:host(.active)</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">looks</span> <span class="selector-tag">for</span> <span class="selector-tag">a</span> <span class="selector-tag">CSS</span> <span class="selector-tag">class</span> <span class="selector-tag">in</span> <span class="selector-tag">any</span> <span class="selector-tag">ancestor</span> <span class="selector-tag">of</span> <span class="selector-tag">the</span> <span class="selector-tag">component</span> <span class="selector-tag">host</span> <span class="selector-tag">element</span>, <span class="selector-tag">up</span> <span class="selector-tag">to</span> <span class="selector-tag">the</span> <span class="selector-tag">document</span> <span class="selector-tag">root</span></span><br><span class="line"><span class="selector-pseudo">:host-context(.theme-light)</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eef</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="Dynamic-Component-loader"><a href="#Dynamic-Component-loader" class="headerlink" title="Dynamic Component loader"></a>Dynamic Component loader</h4><ul><li>the anchor directive</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Directive, ViewContainerRef &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line">@Directive(&#123;</span><br><span class="line">  selector: <span class="string">'[adHost]'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AdDirective</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(public viewContainerRef: ViewContainerRef) &#123; &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Resolving components</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, Input, OnInit, ViewChild, ComponentFactoryResolver, OnDestroy &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AdDirective &#125; <span class="keyword">from</span> <span class="string">'./ad.directive'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AdItem &#125; <span class="keyword">from</span> <span class="string">'./ad-item'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AdComponent &#125; <span class="keyword">from</span> <span class="string">'./ad.component'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-ad-banner'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">              &lt;div class="ad-banner-example"&gt;</span></span><br><span class="line"><span class="string">                &lt;h3&gt;Advertisements&lt;/h3&gt;</span></span><br><span class="line"><span class="string">                &lt;ng-template adHost&gt;&lt;/ng-template&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">            `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AdBannerComponent</span> <span class="title">implements</span> <span class="title">OnInit</span>, <span class="title">OnDestroy</span> </span>&#123;</span><br><span class="line">  @Input() ads: AdItem[];</span><br><span class="line">  currentAdIndex = <span class="number">-1</span>;</span><br><span class="line">  @ViewChild(AdDirective, &#123; <span class="attr">static</span>: <span class="literal">true</span> &#125;) adHost: AdDirective;</span><br><span class="line">  interval: any;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(private componentFactoryResolver: ComponentFactoryResolver) &#123; &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.loadComponent();</span><br><span class="line">    <span class="keyword">this</span>.getAds();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngOnDestroy() &#123;</span><br><span class="line">    clearInterval(<span class="keyword">this</span>.interval);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  loadComponent() &#123;</span><br><span class="line">    <span class="keyword">this</span>.currentAdIndex = (<span class="keyword">this</span>.currentAdIndex + <span class="number">1</span>) % <span class="keyword">this</span>.ads.length;</span><br><span class="line">    <span class="keyword">const</span> adItem = <span class="keyword">this</span>.ads[<span class="keyword">this</span>.currentAdIndex];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> componentFactory = <span class="keyword">this</span>.componentFactoryResolver.resolveComponentFactory(adItem.component);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> viewContainerRef = <span class="keyword">this</span>.adHost.viewContainerRef;</span><br><span class="line">    viewContainerRef.clear();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> componentRef = viewContainerRef.createComponent(componentFactory);</span><br><span class="line">    (&lt;AdComponent&gt;componentRef.instance).data = adItem.data;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getAds() &#123;</span><br><span class="line">    this.interval = setInterval(() =&gt; &#123;</span><br><span class="line">      this.loadComponent();</span><br><span class="line">    &#125;, 3000);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, OnInit &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AdService &#125; <span class="keyword">from</span> <span class="string">'./ad.service'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AdItem &#125; <span class="keyword">from</span> <span class="string">'./ad-item'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-ad-app'</span>,</span><br><span class="line">  providers: [AdService],</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;app-ad-banner [ads]="ads"&gt;&lt;/app-ad-banner&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AdAppComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">  ads: AdItem[];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(private adService: AdService) &#123; &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.ads = <span class="keyword">this</span>.adService.getAds();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Templates"><a href="#Templates" class="headerlink" title="Templates"></a>Templates</h3><blockquote><p>not allowed in template statement - event</p><ul><li>new</li><li>++ –</li><li>+= -= *= \=</li><li>| &amp;</li><li>Pipe operator</li></ul></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form #heroForm (ngSubmit)="onSubmit(heroForm)"&gt; ... &lt;/form&gt;</span><br></pre></td></tr></table></figure><h5 id="HTML-attributes-vs-DOM-property"><a href="#HTML-attributes-vs-DOM-property" class="headerlink" title="HTML attributes vs. DOM property"></a>HTML attributes vs. DOM property</h5><p>The distinction between an HTML attribute and a DOM property is key to understanding how Angular binding works. <strong>Attributes are defined by HTML. Properties are accessed from DOM (Document Object Model) nodes.</strong></p><ul><li>A few HTML attributes have 1:1 mapping to properties; for example, <code>id</code>.</li><li>Some HTML attributes don’t have corresponding properties; for example, <code>aria-*</code>.</li><li>Some DOM properties don’t have corresponding attributes; for example, <code>textContent</code>.</li></ul><p><strong>Template binding works with properties and events, not attributes.</strong></p><p><strong>Attributes initialize DOM properties and then they are done. Property values can change; attribute values can’t.</strong> There is one exception to this rule. Attributes can be changed by <code>setAttribute()</code>, which re-initializes corresponding DOM properties.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input [disabled]=&quot;condition ? true : false&quot;&gt;</span><br><span class="line">&lt;input [attr.disabled]=&quot;condition ? &apos;disabled&apos; : null&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># element property</span><br><span class="line">&lt;img [src]=&quot;heroImageUrl&quot;&gt;</span><br><span class="line"></span><br><span class="line"># component property</span><br><span class="line">&lt;app-hero-detail [hero]=&quot;currentHero&quot;&gt;&lt;/app-hero-detail&gt;</span><br><span class="line"></span><br><span class="line"># directive property</span><br><span class="line">&lt;div [ngClass]=&quot;&#123;&apos;special&apos;: isSpecial&#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"># element event</span><br><span class="line">&lt;button (click)=&quot;onSave($event)&quot;&gt;Save&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"># component event</span><br><span class="line">&lt;app-hero-detail (deleteRequest)=&quot;deleteHero()&quot;&gt;&lt;/app-hero-detail&gt;</span><br><span class="line"></span><br><span class="line"># directive event</span><br><span class="line">&lt;div (myClick)=&quot;clicked=$event&quot; clickable&gt;click me&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"># event and property</span><br><span class="line">&lt;input [(ngModel)]=&quot;name&quot;&gt;</span><br><span class="line"></span><br><span class="line"># attribute</span><br><span class="line">&lt;button [attr.aria-label]=&quot;help&quot;&gt;help&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"># class property</span><br><span class="line">&lt;div [class.special]=&quot;isSpecial&quot;&gt;Special&lt;/div&gt;</span><br><span class="line">[class.foo]=&quot;hasFoo&quot; ( boolean | undefined | null )</span><br><span class="line">[class]=&quot;class1 class2 class3&quot;</span><br><span class="line">[class]=&#123;foo: true, bar: false&#125;</span><br><span class="line">[class]=[foo, bar]</span><br><span class="line"></span><br><span class="line"># style property</span><br><span class="line">&lt;button [style.color]=&quot;isSpecial ? &apos;red&apos; : &apos;green&apos;&quot;&gt;</span><br><span class="line">[style.width]=&quot;100px&quot;</span><br><span class="line">[style.width.px]=&quot;100&quot;</span><br><span class="line">[style]=&quot;width:100px;height:100px;&quot;</span><br><span class="line">[style]=&#123;width:100px, height:100px&#125;</span><br><span class="line">[style]=[&apos;width&apos;,&apos;100px&apos;,&apos;height&apos;,&apos;100px&apos;]</span><br></pre></td></tr></table></figure><h4 id="Property-binding"><a href="#Property-binding" class="headerlink" title="Property binding"></a>Property binding</h4><p>Interpolation is a convenient alternative to property binding in many cases. When rendering data values as strings, there is no technical reason to prefer one form to the other, though readability tends to favor interpolation. However, <em>when setting an element property to a non-string data value, you must use property binding</em>.</p><h4 id="Event-binding"><a href="#Event-binding" class="headerlink" title="Event binding"></a>Event binding</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># without ngModel</span><br><span class="line">&lt;input [value]=&quot;currentItem.name&quot;</span><br><span class="line">       (input)=&quot;currentItem.name=$event.target.value&quot; &gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// This component makes a request but it can&apos;t actually delete a hero.</span><br><span class="line">@Output() deleteRequest = new EventEmitter&lt;Item&gt;();</span><br><span class="line"></span><br><span class="line">delete() &#123;</span><br><span class="line">  this.deleteRequest.emit(this.item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Two-way-binding-…"><a href="#Two-way-binding-…" class="headerlink" title="Two-way binding [(…)]"></a>Two-way binding [(…)]</h4><p>The <code>[()]</code> syntax is easy to demonstrate when the element has a settable property called <code>x</code> and a corresponding event named <code>xChange</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, Input, Output, EventEmitter &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-sizer&apos;,</span><br><span class="line">  template: `</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button (click)=&quot;dec()&quot; title=&quot;smaller&quot;&gt;-&lt;/button&gt;</span><br><span class="line">    &lt;button (click)=&quot;inc()&quot; title=&quot;bigger&quot;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;label [style.font-size.px]=&quot;size&quot;&gt;FontSize: &#123;&#123;size&#125;&#125;px&lt;/label&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  `,</span><br><span class="line">  styleUrls: [&apos;./sizer.component.css&apos;]</span><br><span class="line">&#125;)</span><br><span class="line">export class SizerComponent &#123;</span><br><span class="line"></span><br><span class="line">  @Input()  size: number | string;</span><br><span class="line">  @Output() sizeChange = new EventEmitter&lt;number&gt;();</span><br><span class="line"></span><br><span class="line">  dec() &#123; this.resize(-1); &#125;</span><br><span class="line">  inc() &#123; this.resize(+1); &#125;</span><br><span class="line"></span><br><span class="line">  resize(delta: number) &#123;</span><br><span class="line">    this.size = Math.min(40, Math.max(8, +this.size + delta));</span><br><span class="line">    this.sizeChange.emit(this.size);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># two-way binding  size property &amp;&amp; sizeChange event</span><br><span class="line">&lt;app-sizer [(size)]=&quot;fontSizePx&quot;&gt;&lt;/app-sizer&gt;</span><br><span class="line">&lt;div [style.font-size.px]=&quot;fontSizePx&quot;&gt;Resizable Text&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"># equal to</span><br><span class="line">&lt;app-sizer [size]=&quot;fontSizePx&quot; (sizeChange)=&quot;fontSizePx=$event&quot;&gt;&lt;/app-sizer&gt;</span><br></pre></td></tr></table></figure><h4 id="Template-reference-variable"><a href="#Template-reference-variable" class="headerlink" title="Template reference variable"></a>Template reference variable</h4><p>Angular assigns each template reference variable a value based on where you declare the variable:</p><ul><li>If you declare the variable on a component, the variable refers to the component instance.</li><li>If you declare the variable on a standard HTML tag, the variable refers to the element.</li><li>If you declare the variable on an <code>&lt;ng-template&gt;</code> element, the variable refers to a <code>TemplateRef</code> instance, which represents the template.</li><li>If the variable specifies a name on the right-hand side, such as <code>#var=&quot;ngModel&quot;</code>, the variable refers to the directive or component on the element with a matching <code>exportAs</code> name.</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;input #phone placeholder=&quot;phone number&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- lots of other elements --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- phone refers to the input element; pass its `value` to an event handler --&gt;</span><br><span class="line">&lt;button (click)=&quot;callPhone(phone.value)&quot;&gt;Call&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"># alternative syntax</span><br><span class="line">&lt;input ref-fax placeholder=&quot;fax number&quot; /&gt;</span><br><span class="line">&lt;button (click)=&quot;callFax(fax.value)&quot;&gt;Fax&lt;/button&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;form #itemForm=&quot;ngForm&quot; (ngSubmit)=&quot;onSubmit(itemForm)&quot;&gt;</span><br><span class="line">  &lt;label for=&quot;name&quot;&gt;</span><br><span class="line">  	Name &lt;input class=&quot;form-control&quot; name=&quot;name&quot; ngModel required /&gt;</span><br><span class="line">  &lt;/label&gt;</span><br><span class="line">  &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;div [hidden]=&quot;!itemForm.form.valid&quot;&gt;</span><br><span class="line">  &lt;p&gt;JSON: &#123;&#123; itemForm.form.value | json &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// tslint:disable: no-inputs-metadata-property no-outputs-metadata-property</span><br><span class="line">inputs: [&apos;input1: saveForLaterItem&apos;], // propertyName:alias</span><br><span class="line">outputs: [&apos;outputEvent1: saveForLaterEvent&apos;]</span><br><span class="line">// tslint:disable: no-inputs-metadata-property no-outputs-metadata-property</span><br><span class="line"></span><br><span class="line">@Input(&apos;wishListItem&apos;) input2: string; //  @Input(alias)</span><br><span class="line">@Output(&apos;wishEvent&apos;) outputEvent2 = new EventEmitter&lt;string&gt;(); //  @Output(alias) propertyName = ...</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># safe navigation operator</span><br><span class="line">&lt;p&gt;The item name is: &#123;&#123;item?.name&#125;&#125;&lt;/p&gt;</span><br><span class="line">a?.b?.c?.d</span><br><span class="line"></span><br><span class="line"># non-null operator</span><br><span class="line">&lt;p&gt;The item&apos;s color is: &#123;&#123;item.color!.toUpperCase()&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;The item&apos;s undeclared best by date is: &#123;&#123;$any(item).bestByDate&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;The item&apos;s undeclared best by date is: &#123;&#123;$any(this).bestByDate&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-svg&apos;,</span><br><span class="line">  template: `</span><br><span class="line">  &lt;svg&gt;</span><br><span class="line">    &lt;g&gt;</span><br><span class="line">      &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;100&quot; height=&quot;100&quot; [attr.fill]=&quot;fillColor&quot; (click)=&quot;changeColor()&quot; /&gt;</span><br><span class="line">      &lt;text x=&quot;120&quot; y=&quot;50&quot;&gt;click the rectangle to change the fill color&lt;/text&gt;</span><br><span class="line">    &lt;/g&gt;</span><br><span class="line">  &lt;/svg&gt;</span><br><span class="line">  `,</span><br><span class="line">  styleUrls: [&apos;./svg.component.css&apos;]</span><br><span class="line">&#125;)</span><br><span class="line">export class SvgComponent &#123;</span><br><span class="line">  fillColor = &apos;rgb(255, 0, 0)&apos;;</span><br><span class="line"></span><br><span class="line">  changeColor() &#123;</span><br><span class="line">    const r = Math.floor(Math.random() * 256);</span><br><span class="line">    const g = Math.floor(Math.random() * 256);</span><br><span class="line">    const b = Math.floor(Math.random() * 256);</span><br><span class="line">    this.fillColor = `rgb($&#123;r&#125;, $&#123;g&#125;, $&#123;b&#125;)`;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Directives"><a href="#Directives" class="headerlink" title="Directives"></a>Directives</h3><h4 id="Built-in-directives"><a href="#Built-in-directives" class="headerlink" title="Built-in directives"></a>Built-in directives</h4><ul><li>Attribute directives<ul><li>NgClass</li><li>NgStyle</li><li>NgModel</li><li>NgSwitch</li><li>…</li></ul></li><li>structural directives<ul><li>NgIf</li><li>NgFor</li><li>NgSwitchCase</li><li>NgSwitchDefault</li><li>…</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- toggle the &quot;special&quot; class on/off with a property --&gt;</span><br><span class="line">&lt;div [ngClass]=&quot;isSpecial ? &apos;special&apos; : &apos;&apos;&quot;&gt;This div is special&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">currentStyles: &#123;&#125;;</span><br><span class="line">/* . . . */</span><br><span class="line">  setCurrentStyles() &#123;</span><br><span class="line">    // CSS styles: set per current state of component properties</span><br><span class="line">    this.currentStyles = &#123;</span><br><span class="line">      &apos;font-style&apos;:  this.canSave      ? &apos;italic&apos; : &apos;normal&apos;,</span><br><span class="line">      &apos;font-weight&apos;: !this.isUnchanged ? &apos;bold&apos;   : &apos;normal&apos;,</span><br><span class="line">      &apos;font-size&apos;:   this.isSpecial    ? &apos;24px&apos;   : &apos;12px&apos;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;div [ngStyle]=&quot;currentStyles&quot;&gt;</span><br><span class="line">  This div is initially italic, normal weight, and extra large (24px).</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ngModel only works for element supported by a ControlValueAccessor</span><br><span class="line">&lt;input [(ngModel)]=&quot;currentItem.name&quot; id=&quot;example-ngModel&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;input [value]=&quot;currentItem.name&quot; (input)=&quot;currentItem.name=$event.target.value&quot; id=&quot;without&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;input [ngModel]=&quot;currentItem.name&quot; (ngModelChange)=&quot;currentItem.name=$event&quot; id=&quot;example-change&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;app-item-detail *ngIf=&quot;isActive&quot; [item]=&quot;item&quot;&gt;&lt;/app-item-detail&gt;</span><br><span class="line"></span><br><span class="line">&lt;div *ngFor=&quot;let item of items&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div *ngFor=&quot;let item of items; let i=index&quot;&gt;&#123;&#123;i + 1&#125;&#125; - &#123;&#123;item.name&#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">trackByItems(index: number, item: Item): number &#123; return item.id; &#125;</span><br><span class="line">&lt;div *ngFor=&quot;let item of items; trackBy: trackByItems&quot;&gt;</span><br><span class="line">  (&#123;&#123;item.id&#125;&#125;) &#123;&#123;item.name&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div [ngSwitch]=&quot;currentItem.feature&quot;&gt;</span><br><span class="line">  &lt;app-stout-item    *ngSwitchCase=&quot;&apos;stout&apos;&quot;    [item]=&quot;currentItem&quot;&gt;&lt;/app-stout-item&gt;</span><br><span class="line">  &lt;app-device-item   *ngSwitchCase=&quot;&apos;slim&apos;&quot;     [item]=&quot;currentItem&quot;&gt;&lt;/app-device-item&gt;</span><br><span class="line">  &lt;app-lost-item     *ngSwitchCase=&quot;&apos;vintage&apos;&quot;  [item]=&quot;currentItem&quot;&gt;&lt;/app-lost-item&gt;</span><br><span class="line">  &lt;app-best-item     *ngSwitchCase=&quot;&apos;bright&apos;&quot;   [item]=&quot;currentItem&quot;&gt;&lt;/app-best-item&gt;</span><br><span class="line">&lt;!-- . . . --&gt;</span><br><span class="line">  &lt;app-unknown-item  *ngSwitchDefault           [item]=&quot;currentItem&quot;&gt;&lt;/app-unknown-item&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="Attribute-Directives"><a href="#Attribute-Directives" class="headerlink" title="Attribute Directives"></a>Attribute Directives</h4><p>There are three kinds of directives in Angular:</p><ol><li>Components—directives with a template.</li><li>Structural directives—change the DOM layout by adding and removing DOM elements.</li><li>Attribute directives—change the appearance or behavior of an element, component, or another directive.</li></ol></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/Angular/" title="Angular" target="_blank" rel="external">https://molly2molly.github.io/Angular/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/Decorators/" title="Decorators"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/Nginx/" title="Nginx"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(T){var n={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=n}(window)</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta="nick,mail,link";meta=meta.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html><!-- rebuild by neat -->