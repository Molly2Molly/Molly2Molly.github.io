<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>单向用户接口结构_UNIDIRECTIONAL_USER_INTERFACE_ARCHITECHURES | Hexo</title><meta name="description" content="A unidirectional architecture is said to be fractal if subcomponents are structured in the same way as the whole is.FluxDispatcheran event bus for all actions，每个应用中只有一个单例Dispatcher, Dispather收到actions"><meta property="og:type" content="article"><meta property="og:title" content="单向用户接口结构_UNIDIRECTIONAL_USER_INTERFACE_ARCHITECHURES"><meta property="og:url" content="https://molly2molly.github.io/单向用户接口结构-UNIDIRECTIONAL-USER-INTERFACE-ARCHITECHURES/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="A unidirectional architecture is said to be fractal if subcomponents are structured in the same way as the whole is.FluxDispatcheran event bus for all actions，每个应用中只有一个单例Dispatcher, Dispather收到actions"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2020-08-24T07:19:39.379Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="单向用户接口结构_UNIDIRECTIONAL_USER_INTERFACE_ARCHITECHURES"><meta name="twitter:description" content="A unidirectional architecture is said to be fractal if subcomponents are structured in the same way as the whole is.FluxDispatcheran event bus for all actions，每个应用中只有一个单例Dispatcher, Dispather收到actions"><link rel="canonical" href="https://molly2molly.github.io/单向用户接口结构-UNIDIRECTIONAL-USER-INTERFACE-ARCHITECHURES/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-javascript/">es6 javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/React/" style="font-size:13px">React</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/Webpack/" style="font-size:13px">Webpack</a> <a href="/tags/es6-javascript/" style="font-size:13px">es6 javascript</a> <a href="/tags/javascript/" style="font-size:14px">javascript</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/数据结构/" style="font-size:14px">数据结构</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Babel/" class="title">Babel</a></p><p class="item-date"><time datetime="2021-03-26T07:05:01.000Z" itemprop="datePublished">2021-03-26</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Yeoman/" class="title">Yeoman</a></p><p class="item-date"><time datetime="2021-03-23T06:56:23.000Z" itemprop="datePublished">2021-03-23</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/FreeOnlineProgrammingCSCourses/" class="title">FreeOnlineProgrammingCSCourses</a></p><p class="item-date"><time datetime="2021-01-13T01:18:08.000Z" itemprop="datePublished">2021-01-13</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Question/" class="title">Question</a></p><p class="item-date"><time datetime="2021-01-12T05:38:46.000Z" itemprop="datePublished">2021-01-12</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/URL/" class="title">URL</a></p><p class="item-date"><time datetime="2021-01-11T06:39:46.000Z" itemprop="datePublished">2021-01-11</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-单向用户接口结构-UNIDIRECTIONAL-USER-INTERFACE-ARCHITECHURES" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">单向用户接口结构_UNIDIRECTIONAL_USER_INTERFACE_ARCHITECHURES</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/单向用户接口结构-UNIDIRECTIONAL-USER-INTERFACE-ARCHITECHURES/" class="article-date"><time datetime="2020-08-21T03:24:19.000Z" itemprop="datePublished">2020-08-21</time></a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/单向用户接口结构-UNIDIRECTIONAL-USER-INTERFACE-ARCHITECHURES/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><blockquote><p>A unidirectional architecture is said to be fractal if subcomponents are structured in the same way as the whole is.</p></blockquote><h3 id="Flux"><a href="#Flux" class="headerlink" title="Flux"></a>Flux</h3><h4 id="Dispatcher"><a href="#Dispatcher" class="headerlink" title="Dispatcher"></a>Dispatcher</h4><p>an event bus for all actions，每个应用中只有一个单例Dispatcher, Dispather收到actions后，发送它们给已经注册到Dispather中的stores，每一个store会收到每一个action。</p><p>Because this is an event bus, it’s a singleton. Many Flux variants remove the need for a dispatcher, and other unidirectional architectures don’t have an equivalent to the dispatcher.</p><h4 id="Stores"><a href="#Stores" class="headerlink" title="Stores"></a>Stores</h4><p>Store就是应用中存储数据的地方。store会向Dispather注册以接收actions。 store中的数据只能在对action做出反应时才能被修改。store中不能有public的修改数据的方法，只能有获取数据的方法。store决定哪种action它想有所反应。每当store的数据改变了，它一定要发出一个“change”的事件。一个应用中会有很多个store。</p><h4 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h4><p>actions里面定义应用的内部api。它们描绘了如何与你的应用进行交互。它们是包含一个“type”的字段和一些数据的简单对象。actions应该是对那些发生的动作进行的语义化和描述化。actions里面不应该描述如何应对这些动作。用“delete-user”而不是“delete-user-id”，“clear-user-data”，“refresh-credentials”这一连串。</p><h4 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h4><p>stores中的数据被展现在views中。views可以使用你喜欢的任何一种框架。一个view能展现store中的数据的前提是它必须在那个store中订阅了change的事件。每当store中的数据改变了，view就能获得新的数据并且重新绘制。典型的情况是，当一个用户和你的应用进行交互时，actions就从views中dispatcher出去了。</p><p>Only View has composable components. Hierarchical composition happens only among React components, not with Stores neither with Actions. A React component is a UI program, and is usually not written as a Flux architecture internally. Hence Flux is not fractal(分形), where the orchestrators(协调器) are the Dispatcher and the Stores.</p><p>User event handlers are declared in the rendering. In other words, the render() function of React components handles both directions of interaction with the user: rendering and user event handlers (e.g. onClick={this.clickHandler}).</p><h4 id="Flow-of-data"><a href="#Flow-of-data" class="headerlink" title="Flow of data"></a>Flow of data</h4><ol><li>Views发送actions到Dispatcher</li><li>Dispather发送actions到每一个注册的store中</li><li>Stores发送修改的数据到Views</li></ol><h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><p>Redux is a predictable state container for javascript apps. It can be used standalone or in connection with libraries, like React and Angular, to manage state in javascript apps.</p><h6 id="Redux-Reducer-Flux"><a href="#Redux-Reducer-Flux" class="headerlink" title="Redux = Reducer + Flux"></a>Redux = Reducer + Flux</h6><h4 id="Action-s"><a href="#Action-s" class="headerlink" title="Action(s)"></a>Action(s)</h4><p>an action in Redux is a javascript object, it has a type and an optional payload.</p><h4 id="Reducer-s"><a href="#Reducer-s" class="headerlink" title="Reducer(s)"></a>Reducer(s)</h4><p>a reducer is a pure function. It always produces the same output when the input stays the same. It has no side effects. A reducer has two inputs: state and action. The state is always the global state object from the Redux store.</p><pre><code>(prevState, action) =&gt; newState
</code></pre><h4 id="Redux-Store-singleton"><a href="#Redux-Store-singleton" class="headerlink" title="Redux Store singleton"></a>Redux Store singleton</h4><p>manages state and has a dispatch(action) function. the store holds one global state object.</p><p>A Store is created using the createStore() factory function, taking a composition of reducer functions as argument. There is also a meta-factory applyMiddleware() function which takes middleware functions as arguments. Middlewares are mechanisms of overriding the dispatch() function of a store with additional chained functionality.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createStore, applyMiddleware, combineReducers &#125; from &quot;redux&quot;;</span><br><span class="line">const store = createStore(combineReducers(&#123;</span><br><span class="line">  counters,</span><br><span class="line">  todos: undoableTodos</span><br><span class="line">&#125;), initState, applyMiddleware(logger));</span><br><span class="line">	</span><br><span class="line">store.dispatch(&#123;type:&quot;TODO_ADD&quot;, todo:&#123;id:0, name:&quot;xxx&quot;, completed: false&#125;&#125;);</span><br><span class="line">	</span><br><span class="line">store.getState();</span><br><span class="line">	</span><br><span class="line">const unsubscribe = store.subscribe(()=&gt;&#123;console.log(store.getState());&#125;);</span><br><span class="line">unsubscribe();</span><br></pre></td></tr></table></figure><h4 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h4><p>a subscriber to the Store which interfaces with some “View” framework like React or Angular</p><p>Redux is unopinionated with regards to the “View” framework used to make the UI program. It can be used with React or Angular or others. In the context of this architecture, “View” is a UI program. Like Flux, Redux is not (by design) fractal and the Store is an orchestrator.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Provider &#125; from &quot;react-redux&quot;;</span><br><span class="line">ReactDOM.render(&lt;Provider store=&#123;store&#125;&gt;&lt;App /&gt;&lt;/Provider&gt;, document.getElementById(&quot;root&quot;));</span><br></pre></td></tr></table></figure><h4 id="In-a-real-application-you-want-to-avoid-the-following-bad-practices"><a href="#In-a-real-application-you-want-to-avoid-the-following-bad-practices" class="headerlink" title="In a real application you want to avoid the following bad practices:"></a>In a real application you want to avoid the following bad practices:</h4><ol><li>Re-rendering every component.</li><li>Using the store instance directly. The store should be injected somehow into your component tree to make it accessible for components that need to have access to the store.</li><li>Making the store globally available.</li></ol><h4 id="Redux-can-be-described-in-three-fundamental-principles"><a href="#Redux-can-be-described-in-three-fundamental-principles" class="headerlink" title="Redux can be described in three fundamental principles:"></a>Redux can be described in three fundamental principles:</h4><ol><li>Single source of truth</li><li>State is read-only</li><li>Changes are made with pure functions</li></ol><p>Technically, a container component is just a React component that uses store.subscribe() to read a part of the Redux state tree and supply props to a presentational component it renders.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect(mapStateToProps(state, ownProps?), mapDispatchToProps(dispatch, ownProps?))(Component)</span><br></pre></td></tr></table></figure><h4 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h4><pre><code>function createThunkMiddleware(extraArgument) {
  return ({ dispatch, getState }) =&gt; (next) =&gt; (action) =&gt; {
    if (typeof action === &apos;function&apos;) {
      return action(dispatch, getState, extraArgument);
    }

    return next(action);
  };
}

const thunk = createThunkMiddleware();
thunk.withExtraArgument = createThunkMiddleware;

export default thunk;
</code></pre><p>thunks are a functional programming technique used to delay computation. Instead of performing some work now, you produce a function body or unevaluated expression (the “thunk”) which can optionally be used to perform the work later.</p><p>In React / Redux, thunks enable us to avoid directly causing side effects in our actions, action creators, or components. Instead, anything impure will be wrapped in a thunk. Later, that thunk will be invoked by middleware to actually cause the effect. By transferring our side effects to running at a single point of the Redux loop (at the middleware level), the rest of our app stays relatively pure. Pure functions and components are easier to reason about, test, maintain, extend, and reuse.</p><p>Redux-Promise<br>Redux-Promise-Middleware<br>Redux-Saga, based on generator functions<br>Redux-Observable, based on RxJS observables<br>Redux-Loop, modeled after Elm’s effect system</p><h4 id="react-redux-connect"><a href="#react-redux-connect" class="headerlink" title="react-redux - connect()"></a>react-redux - connect()</h4><pre><code>// connect() is a function that injects Redux-related props into your component.
// You can inject data and callbacks that change that data by dispatching actions.
function connect(mapStateToProps, mapDispatchToProps) {
  // It lets us inject component as the last step so people can use it as a decorator.
  // Generally you don&apos;t need to worry about it.
  return function (WrappedComponent) {
    // It returns a component
    return class extends React.Component {
      render() {
        return (
          // that renders your component
          &lt;WrappedComponent
            {/* with its props  */}
            {...this.props}
            {/* and additional props calculated from Redux store */}
            {...mapStateToProps(store.getState(), this.props)}
            {...mapDispatchToProps(store.dispatch, this.props)}
          /&gt;
        )
      }

      componentDidMount() {
        // it remembers to subscribe to the store so it doesn&apos;t miss updates
        this.unsubscribe = store.subscribe(this.handleChange.bind(this))
      }

      componentWillUnmount() {
        // and unsubscribe later
        this.unsubscribe()
      }

      handleChange() {
        // and whenever the store state changes, it re-renders.
        this.forceUpdate()
      }
    }
  }
}

// This is not the real implementation but a mental model.
// It skips the question of where we get the &quot;store&quot; from (answer: &lt;Provider&gt; puts it in React context)
// and it skips any performance optimizations (real connect() makes sure we don&apos;t re-render in vain).

// The purpose of connect() is that you don&apos;t have to think about
// subscribing to the store or perf optimizations yourself, and
// instead you can specify how to get props based on Redux store state:

const ConnectedCounter = connect(
  // Given Redux state, return props
  state =&gt; ({
    value: state.counter,
  }),
  // Given Redux dispatch, return callback props
  dispatch =&gt; ({
    onIncrement() {
      dispatch({ type: &apos;INCREMENT&apos; })
    }
  })
)(Counter)
</code></pre><h3 id="BEST-Behavior-Event-State-Tree"><a href="#BEST-Behavior-Event-State-Tree" class="headerlink" title="BEST Behavior-Event-State-Tree"></a>BEST Behavior-Event-State-Tree</h3><h4 id="State"><a href="#State" class="headerlink" title="State"></a>State</h4><p>JSON-like declaration of initial state</p><h4 id="Tree"><a href="#Tree" class="headerlink" title="Tree"></a>Tree</h4><p>a declarative hierarchical composition of components</p><h4 id="Event"><a href="#Event" class="headerlink" title="Event"></a>Event</h4><p>event listeners (on tree) that mutate state</p><h4 id="Behavior"><a href="#Behavior" class="headerlink" title="Behavior"></a>Behavior</h4><p>dynamic properties (of tree) dependent on the state</p><h4 id="Peculiarities"><a href="#Peculiarities" class="headerlink" title="Peculiarities:"></a>Peculiarities:</h4><p><strong>Multi-paradigm.</strong> State and Tree are fully declarative. Event is imperative(命令式). Behavior is functional. Some parts are reactive(反应式), other parts are passive(被动式) (e.g. Behavior reacts to State, and Tree is passive to the Behavior).</p><p><strong>Behavior.</strong> Not seen in any other architecture in this post, the Behavior separates UI rendering (Tree) from its dynamic properties. These are allegedly different concerns: Tree is comparable to HTML, Behavior is comparable to CSS.</p><p><strong>User event handlers are declared separately from rendering.</strong> BEST is one of the few unidirectional architectures that do not attach user event handlers in the rendering. User event handlers belong to Event, not to Tree.</p><p>In the context of this architecture, “View” is a Tree, and a “Component” is a Behavior-Event-Tree-State tuple. Components are UI programs. BEST is a fractal architecture.</p><h3 id="Model-View-Update"><a href="#Model-View-Update" class="headerlink" title="Model-View-Update"></a>Model-View-Update</h3><h4 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h4><p>a type defining the structure of state data</p><h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><p>a pure function transforming state into rendering</p><h4 id="Actions-1"><a href="#Actions-1" class="headerlink" title="Actions"></a>Actions</h4><p>a type defining user events sent through mailboxes</p><h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><p>a pure function from previous state and an action to new state</p><h4 id="Peculiarities-1"><a href="#Peculiarities-1" class="headerlink" title="Peculiarities:"></a>Peculiarities:</h4><p><strong>Hierarchical composition everywhere.</strong> The previous architectures had hierarchical composition only in their “View”, however in the MVU architecture such composition is also found in Model and Update. Even Actions may contain nested Actions.</p><p><strong>Components are exported as pieces.</strong> Because of the hierarchical composition everywhere, a “component” in the Elm Architecture is a tuple of: a Model type, an initial Model instance, a View function, an Action type, and an Update function. There cannot be components which deviate from this structure throughout the whole architecture. Each component is a UI program, and this architecture is fractal.</p><h3 id="Model-View-Intent"><a href="#Model-View-Intent" class="headerlink" title="Model-View-Intent"></a>Model-View-Intent</h3><h4 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h4><p>function from Observable of user events to Observable of “actions”</p><h4 id="Model-1"><a href="#Model-1" class="headerlink" title="Model"></a>Model</h4><p>function from Observable of actions to Observable of state</p><h4 id="View-1"><a href="#View-1" class="headerlink" title="View"></a>View</h4><p>function from Observable of state to Observable of rendering</p><h4 id="Custom-element"><a href="#Custom-element" class="headerlink" title="Custom element"></a>Custom element</h4><p>subsection of the rendering which is in itself a UI program. May be implemented as MVI, or as a Web Component. Is optional to use in a View.</p><h4 id="Peculiarities-2"><a href="#Peculiarities-2" class="headerlink" title="Peculiarities:"></a>Peculiarities:</h4><p><strong>Heavily based on Observables.</strong> The outcome of each part of the architecture is expressed as an Observable event stream. Because of this, it is hard or impossible to express any “data flow” or “change” without using Observables.</p><p><strong>Intent.</strong> Roughly comparable to Event in BEST, user event handlers are declared in the Intent, separately from rendering. Unlike BEST, Intent produces Observable streams of actions, which are like those in Flux, Redux, and Elm. Unlike Flux and others, though, actions in MVI are not directly sent to a Dispatcher or a Store. They are simply available for the Model to listen.</p><p><strong>Fully reactive.</strong> The user’s rendering reacts to the View’s output, which reacts to the Model’s output, which reacts to the Intent’s output (actions), which reacts to user events.</p><p>A MVI tuple is a UI program. This architecture is fractal if and only if all custom elements are implemented with MVI.</p><h3 id="Nested-Dialogues"><a href="#Nested-Dialogues" class="headerlink" title="Nested Dialogues"></a>Nested Dialogues</h3><p>a Dialogue is a function taking an Observable of user events as input (the input of Intent) and outputting an Observable of renderings (the output of View). Therefore a Dialogue is a UI program.</p><p>We generalize the definition of a Dialogue to allow other targets beyond the user, with an input Observable and an output Observable for each target. For example, if a Dialogue interfaces with a user and a server over HTTP, the Dialogue would take two Observables as input: Observable of user events and Observable of HTTP responses. Then, it would output two Observables as output: Observable of renderings and Observable of HTTP requests. This is the concept of Drivers in Cycle.js.</p><p>Nested Dialogues is in fact a meta-architecture: it has no convention for the internal structure of a component, allowing us to embed any of the aforementioned architectures into a Nested Dialogue component. The only convention regards the interface of a Dialogue’s extremes: input must be a (collection of) Observable(s), output also must be a (collection of) Observable(s). If a UI program structured as Flux or Model-View-Update or others can have its output and inputs expressed as Observables, then that UI program can be embedded into a Nested Dialogues program as a Dialogue function.</p><p>This architecture is therefore fractal (with regards to the Dialogue interface only) and general.</p><p>参考链接：</p><ol><li><a href="https://staltz.com/unidirectional-user-interface-architectures.html" target="_blank" rel="noopener">https://staltz.com/unidirectional-user-interface-architectures.html</a></li></ol></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/单向用户接口结构-UNIDIRECTIONAL-USER-INTERFACE-ARCHITECHURES/" title="单向用户接口结构_UNIDIRECTIONAL_USER_INTERFACE_ARCHITECHURES" target="_blank" rel="external">https://molly2molly.github.io/单向用户接口结构-UNIDIRECTIONAL-USER-INTERFACE-ARCHITECHURES/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/ES6Proxy/" title="Proxy"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/坐标系/" title="坐标系"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html>