<!-- build time:Wed Jul 08 2020 13:37:23 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>git操作指南 | Hexo</title><meta name="description" content="12345678910111213$ git --verion	$ tar zxf git-2.0.0.tar.gz$ cd git-2.0.0$ make configure$ ./configure prefix=/usr$ make all doc info$ sudo make install install-doc install-html install-info``` 	 1. /e"><meta property="og:type" content="article"><meta property="og:title" content="git操作指南"><meta property="og:url" content="https://molly2molly.github.io/git操作指南/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="12345678910111213$ git --verion	$ tar zxf git-2.0.0.tar.gz$ cd git-2.0.0$ make configure$ ./configure prefix=/usr$ make all doc info$ sudo make install install-doc install-html install-info``` 	 1. /e"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2020-01-08T06:26:29.574Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="git操作指南"><meta name="twitter:description" content="12345678910111213$ git --verion	$ tar zxf git-2.0.0.tar.gz$ cd git-2.0.0$ make configure$ ./configure prefix=/usr$ make all doc info$ sudo make install install-doc install-html install-info``` 	 1. /e"><link rel="canonical" href="https://molly2molly.github.io/git操作指南/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-javascript/">es6 javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/React/" style="font-size:13px">React</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/es6-javascript/" style="font-size:13px">es6 javascript</a> <a href="/tags/javascript/" style="font-size:14px">javascript</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/webpack/" style="font-size:13px">webpack</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/test/" class="title">algorithm/test</a></p><p class="item-date"><time datetime="2020-07-08T05:36:49.000Z" itemprop="datePublished">2020-07-08</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/npm与yarn的异同/" class="title">npm与yarn的异同</a></p><p class="item-date"><time datetime="2020-07-06T06:50:24.000Z" itemprop="datePublished">2020-07-06</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/工程/" class="title">工程</a></p><p class="item-date"><time datetime="2020-06-29T23:52:50.000Z" itemprop="datePublished">2020-06-30</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/svg/" class="title">svg</a></p><p class="item-date"><time datetime="2020-06-16T02:20:11.000Z" itemprop="datePublished">2020-06-16</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/" class="title">类与对象</a></p><p class="item-date"><time datetime="2020-06-11T06:08:23.000Z" itemprop="datePublished">2020-06-11</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-git操作指南" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">git操作指南</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/git操作指南/" class="article-date"><time datetime="2019-11-21T07:29:43.000Z" itemprop="datePublished">2019-11-21</time></a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/git操作指南/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git --verion</span><br><span class="line">	</span><br><span class="line">$ tar zxf git-2.0.0.tar.gz</span><br><span class="line">$ cd git-2.0.0</span><br><span class="line">$ make configure</span><br><span class="line">$ ./configure prefix=/usr</span><br><span class="line">$ make all doc info</span><br><span class="line">$ sudo make install install-doc install-html install-info</span><br><span class="line">``` </span><br><span class="line">	 </span><br><span class="line">1. /etc/gitconfig  对应于 --system  </span><br><span class="line">2. ~/.gitconfig or  ~/.config/git/config 对应于 --global  </span><br><span class="line">3. .git/config 对应于 --local</span><br></pre></td></tr></table></figure><p>$ git config –list –show-origin<br>$ git config –global user.name “xxx yyy”<br>$ git config –global user.email “<a href="mailto:zzz@example.com" target="_blank" rel="noopener">zzz@example.com</a>“</p><p>$ git config –global core.editor emacs</p><p>$ git help<verb><br>$ git<verb>–help<br>$ man git-<verb></verb></verb></verb></p><p>$ git init<br>$ git add .<br>$ git commit -m “initial”</p><p>$ git clone <a href="https://xxx.example.com/xxxx.git" target="_blank" rel="noopener">https://xxx.example.com/xxxx.git</a><newlocalrepositoryname></newlocalrepositoryname></p><p>$ git status<br><code>`</code></p><h5 id="ignore-files"><a href="#ignore-files" class="headerlink" title="ignore files"></a>ignore files</h5><pre><code>$ cat .gitignore

    *.[oa]
    *~
</code></pre><h5 id="view-staged-and-unstaged-changes"><a href="#view-staged-and-unstaged-changes" class="headerlink" title="view staged and unstaged changes"></a>view staged and unstaged changes</h5><pre><code>$ git diff
$ git diff --staged
$ git difftool --tool-help
</code></pre><h5 id="skip-the-stage-area"><a href="#skip-the-stage-area" class="headerlink" title="skip the stage area"></a>skip the stage area</h5><pre><code>$ git commit -a -m &quot;infomation&quot;
</code></pre><h5 id="remove-files"><a href="#remove-files" class="headerlink" title="remove files"></a>remove files</h5><pre><code>$ git rm &lt;file&gt;
$ git rm -f &lt;file&gt;  #remove from stage area not commit 
$ git rm --cached &lt;file&gt; #remove from stage area alreay commit
</code></pre><h5 id="move-files"><a href="#move-files" class="headerlink" title="move files"></a>move files</h5><pre><code>$ git mv file_form file_to
</code></pre><h5 id="view-commit-history"><a href="#view-commit-history" class="headerlink" title="view commit history"></a>view commit history</h5><pre><code>$ git log
$ git log -p / --patch -&lt;n&gt;
$ git log --stat
$ git log --pretty=oneline
$ git log --pretty=format:&quot;%h - %an, %ar : %s&quot;
$ git log --pretty=format:&quot;%h - %an, %ar : %s&quot; --graph
$ git log --since=2.week
$ git log -S &lt;file or function_name&gt;
$ git log --grep &lt;commit_message&gt;
$ git log --author &lt;author&gt;
</code></pre><h5 id="撤销提交-不会改变历史"><a href="#撤销提交-不会改变历史" class="headerlink" title="撤销提交, 不会改变历史"></a>撤销提交, 不会改变历史</h5><pre><code>$ git revert HEAD
$ git revert [倒数第一个提交] [倒数第二个提交]
--no-edit：执行时不打开默认编辑器，直接使用 Git 自动生成的提交信息。  
--no-commit：只抵消暂存区和工作区的文件变化，不产生新的提交。  
</code></pre><h5 id="Fix-the-last-commit"><a href="#Fix-the-last-commit" class="headerlink" title="Fix the last commit"></a>Fix the last commit</h5><pre><code>$ git commit --amend # overwrite previous commit
$ git commit --amend -m &quot;new message&quot;
</code></pre><h5 id="unstage-a-staged-file"><a href="#unstage-a-staged-file" class="headerlink" title="unstage a staged file"></a>unstage a staged file</h5><pre><code>$ git reset HEAD &lt;file&gt;
# 丢弃提交，不改变工作区的文件（但会改变暂存区）
$ git reset [last good SHA]
# --hard参数可以让工作区里面的文件也回到以前的状态
$ git reset --hard [last good SHA]

执行`git reset`命令之后，如果想找回那些丢弃掉的提交，可以使用`git reflog`命令。不过，这种做法有时效性，时间长了可能找不回来。
</code></pre><h5 id="unmodifying-a-modified-file"><a href="#unmodifying-a-modified-file" class="headerlink" title="unmodifying a modified file"></a>unmodifying a modified file</h5><pre><code>$ git checkout -- &lt;file&gt;
$ git checkout &lt;SHA&gt; -- &lt;filename&gt;
</code></pre><h5 id="remotes"><a href="#remotes" class="headerlink" title="remotes"></a>remotes</h5><pre><code>$ git remote -v
$ git remote add &lt;shortname&gt; &lt;url&gt;
$ git fetch &lt;remote&gt;
$ git push origin master
$ git remote show &lt;remote&gt;
$ git remote rename &lt;originRemote&gt; &lt;newRemote&gt;
$ git remote rm &lt;remote&gt;
</code></pre><h5 id="tagging"><a href="#tagging" class="headerlink" title="tagging"></a>tagging</h5><pre><code>$ git tag
$ git tag -l &quot;searchText&quot;
$ git tag &lt;tagname&gt; # lightweight tag
$ git tag -a &lt;tagname&gt;  -m &lt;tagmessage&gt; # annotated tag
$ git tag -a &lt;tagname&gt; &lt;checksum&gt; 
$ git show &lt;tagname&gt;
$ git push origin &lt;tagname&gt;
$ git push origin --tags
$ git tag -d &lt;tagname&gt; # delete tag
$ git push origin :ref/tags/&lt;tagname&gt;
</code></pre><hr><h3 id="Undo-a-“public”-change"><a href="#Undo-a-“public”-change" class="headerlink" title="Undo a “public” change"></a>Undo a “public” change</h3><p><strong>Scenario:</strong><br>You just ran git push, sending your changes to GitHub, now you realize there’s a problem with one of those commits. You’d like to undo that commit.</p><p><strong>Undo with:</strong><br><code>git revert &lt;SHA&gt;</code></p><p><strong>What’s happening:</strong><br>git revert will create a new commit that’s the opposite (or inverse) of the given SHA. If the old commit is “matter”, the new commit is “anti-matter”—anything removed in the old commit will be added in the new commit and anything added in the old commit will be removed in the new commit.</p><p>This is Git’s safest, most basic “undo” scenario, because it doesn’t alter history—so you can now git push the new “inverse” commit to undo your mistaken commit.</p><hr><h3 id="Fix-the-last-commit-message"><a href="#Fix-the-last-commit-message" class="headerlink" title="Fix the last commit message"></a>Fix the last commit message</h3><p><strong>Scenario:</strong><br>You just typo’d the last commit message, you did git commit -m “Fxies bug #42” but before git push you realized that really should say “Fixes bug #42”.</p><p><strong>Undo with:</strong><br><code>git commit --amend</code> or <code>git commit --amend -m &quot;Fixes bug #42&quot;</code></p><p><strong>What’s happening:</strong><br><code>git commit --amend</code> will update and replace the most recent commit with a new commit that combines any staged changes with the contents of the previous commit. With nothing currently staged, this just rewrites the previous commit message.</p><hr><h3 id="Undo-“local”-changes"><a href="#Undo-“local”-changes" class="headerlink" title="Undo “local” changes"></a>Undo “local” changes</h3><p><strong>Scenario:</strong><br>The cat walked across the keyboard and somehow saved the changes, then crashed the editor. You haven’t committed those changes, though. You want to undo everything in that file—just go back to the way it looked in the last commit.</p><p><strong>Undo with:</strong><br><code>git checkout -- &lt;bad filename&gt;</code></p><p><strong>What’s happening:</strong><br><code>git checkout</code> alters files in the working directory to a state previously known to Git. You could provide a branch name or specific SHA you want to go back to or, by default, Git will assume you want to checkout HEAD, the last commit on the currently-checked-out branch.</p><p>Keep in mind: any changes you “undo” this way are really gone. They were never committed, so Git can’t help us recover them later. Be sure you know what you’re throwing away here! (Maybe use <code>git diff</code> to confirm.)</p><hr><h3 id="Reset-“local”-changes"><a href="#Reset-“local”-changes" class="headerlink" title="Reset “local” changes"></a>Reset “local” changes</h3><p><strong>Scenario:</strong><br>You’ve made some commits locally (not yet pushed), but everything is terrible, you want to undo the last three commits—like they never happened.</p><p><strong>Undo with:</strong><br><code>git reset &lt;last good SHA&gt;</code> or <code>git reset --hard &lt;last good SHA&gt;</code></p><p><strong>What’s happening:</strong><br>git reset rewinds your repository’s history all the way back to the specified SHA. It’s as if those commits never happened. By default, git reset preserves the working directory. The commits are gone, but the contents are still on disk. This is the safest option, but often, you’ll want to “undo” the commits and the changes in one move—that’s what –hard does.</p><hr><h3 id="Redo-after-undo-“local”"><a href="#Redo-after-undo-“local”" class="headerlink" title="Redo after undo “local”"></a>Redo after undo “local”</h3><p><strong>Scenario:</strong><br>You made some commits, did a git reset –hard to “undo” those changes (see above), and then realized: you want those changes back!</p><p><strong>Undo with:</strong><br><code>git reflog</code> and <code>git reset</code> or <code>git checkout</code></p><p><strong>What’s happening:</strong><br><code>git reflog</code> is an amazing resource for recovering project history. You can recover almost anything—anything you’ve committed—via the reflog.</p><p>You’re probably familiar with the <code>git log</code> command, which shows a list of commits. <code>git reflog</code> is similar, but instead shows a list of times when HEAD changed.</p><p><strong>Some caveats:</strong></p><ul><li>HEAD changes only.HEAD changes when you switch branches, make commits with git commit and un-make commits with git reset, but HEAD does not change when you git checkout –<bad filename="">(from an earlier scenario—as mentioned before, those changes were never committed, so the reflog can’t help us recover those.</bad></li><li>git reflog doesn’t last forever. Git will periodically clean up objects which are “unreachable.” Don’t expect to find months-old commits lying around in the reflog forever.</li><li>Your reflog is yours and yours alone. You can’t use git reflog to restore another developer’s un-pushed commits.</li></ul><p>So… how do you use the reflog to “redo” a previously “undone” commit or commits? It depends on what exactly you want to accomplish:</p><ul><li>If you want to restore the project’s history as it was at that moment in time use <code>git reset --hard &lt;SHA&gt;</code></li><li>If you want to recreate one or more files in your working directory as they were at that moment in time, without altering history use <code>git checkout &lt;SHA&gt; -- &lt;filename&gt;</code></li><li>If you want to replay exactly one of those commits into your repository use <code>git cherry-pick &lt;SHA&gt;</code></li></ul><hr><h3 id="branching"><a href="#branching" class="headerlink" title="branching"></a>branching</h3><p><strong>Scenario:</strong><br>You made some commits, then realized you were checked out on master. You wish you could make those commits on a feature branch instead.</p><p><strong>Undo with:</strong><br><code>git branch feature</code><br><code>git reset --hard origin/master</code><br><code>git checkout feature</code></p><p><strong>What’s happening:</strong><br>You may be used to creating new branches with git checkout -b<name>—it’s a popular short-cut for creating a new branch and checking it out right away—but you don’t want to switch branches just yet. Here, git branch feature creates a new branch called feature pointing at your most recent commit, but leaves you checked out to master.</name></p><p>Next, git reset –hard rewinds master back to origin/master, before any of your new commits. Don’t worry, though, they are still available on feature.</p><p>Finally, git checkout switches to the new feature branch, with all of your recent work intact.</p><hr><h3 id="Branch-in-time-saves-nine"><a href="#Branch-in-time-saves-nine" class="headerlink" title="Branch in time saves nine"></a>Branch in time saves nine</h3><p><strong>Scenario:</strong><br>You started a new branch feature based on master, but master was pretty far behind origin/master. Now that master branch is in sync with origin/master, you wish commits on feature were starting now, instead of being so far behind.</p><p><strong>Undo with:</strong><br><code>git checkout feature</code> and <code>git rebase master</code></p><p><strong>What’s happening:</strong><br>You could have done this with <code>git reset</code> (no –hard, intentionally preserving changes on disk) then <code>git checkout -b &lt;new branch name&gt;</code> and then re-commit the changes, but that way, you’d lose the commit history. There’s a better way.</p><p><code>git rebase master</code> does a couple of things:</p><ul><li>First it locates the common ancestor between your currently-checked-out branch and master.</li><li>Then it resets the currently-checked-out branch to that ancestor, holding all later commits in a temporary holding area.</li><li>Then it advances the currently-checked-out-branch to the end of master and replays the commits from the holding area after master‘s last commit.</li></ul><hr><h3 id="Mass-undo-redo"><a href="#Mass-undo-redo" class="headerlink" title="Mass undo/redo"></a>Mass undo/redo</h3><p><strong>Scenario:</strong><br>You started this feature in one direction, but mid-way through, you realized another solution was better. You’ve got a dozen or so commits, but you only want some of them. You’d like the others to just disappear.</p><p><strong>Undo with:</strong><br><code>git rebase -i &lt;earlier SHA&gt;</code></p><p><strong>What’s happening:</strong><br>-i puts rebase in “interactive mode”. It starts off like the rebase discussed above, but before replaying any commits, it pauses and allows you to gently modify each commit as it’s replayed.</p><hr><h3 id="Fix-an-earlier-commit"><a href="#Fix-an-earlier-commit" class="headerlink" title="Fix an earlier commit"></a>Fix an earlier commit</h3><p><strong>Scenario:</strong><br>You failed to include a file in an earlier commit, it’d be great if that earlier commit could somehow include the stuff you left out. You haven’t pushed, yet, but it wasn’t the most recent commit, so you can’t use commit –amend.</p><p><strong>Undo with:</strong><br><code>git commit --squash &lt;SHA of the earlier commit&gt;</code> and <code>git rebase --autosquash -i &lt;even earlier SHA&gt;</code></p><p><strong>What’s happening:</strong><br><code>git commit --squash</code> will create a new commit with a commit message like squash! Earlier commit. (You could manually create a commit with a message like that, but commit –squash saves you some typing.)</p><p>You can also use <code>git commit --fixup</code> if you don’t want to be prompted to write a new commit message for the combined commit. In this scenario, you’d probably use commit –fixup, since you just want to use the earlier commit’s commit message during rebase.</p><p><code>rebase --autosquash -i</code> will launch an interactive rebase editor, but the editor will open with any squash! and fixup! commits already paired to the commit target in the list of commits, like so:</p><p>When using –squash and –fixup, you might not remember the SHA of the commit you want to fix—only that it was one or five commits ago. You might find using Git’s ^ and ~ operators especially handy. HEAD^ is one commit before HEAD. HEAD~4 is four commits before HEAD – or, altogether, five commits back.</p><hr><h3 id="Stop-tracking-a-tracked-file"><a href="#Stop-tracking-a-tracked-file" class="headerlink" title="Stop tracking a tracked file"></a>Stop tracking a tracked file</h3><p><strong>Scenario:</strong><br>You accidentally added application.log to the repository, now every time you run the application, Git reports there are unstaged changes in application.log. You put *.log in the .gitignore file, but it’s still there—how do you tell git to to “undo” tracking changes in this file?</p><p><strong>Undo with:</strong><br><code>git rm --cached application.log</code></p><p><strong>What’s happening:</strong><br>While .gitignore prevents Git from tracking changes to files or even noticing the existence of files it’s never tracked before, once a file has been added and committed, Git will continue noticing changes in that file. Similarly, if you’ve used git add -f to “force”, or override, .gitignore, Git will keep tracking changes. You won’t have to use -f to add it in the future.</p><p>If you want to remove that should-be-ignored file from Git’s tracking, git rm –cached will remove it from tracking but leave the file untouched on disk. Since it’s now being ignored, you won’t see that file in git status or accidentally commit changes from that file again.</p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/git操作指南/" title="git操作指南" target="_blank" rel="external">https://molly2molly.github.io/git操作指南/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/FunctionalProgramming函数式编程/" title="FunctionalProgramming函数式编程"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/RESTful/" title="RESTful"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(T){var n={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=n}(window)</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta="nick,mail,link";meta=meta.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html><!-- rebuild by neat -->