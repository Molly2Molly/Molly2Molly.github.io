<!-- build time:Thu Dec 24 2020 15:32:29 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>git操作指南 | Hexo</title><meta name="description" content="配置/etc/gitconfig 对应于 –system~/.gitconfig or ~/.config/git/config 对应于 –global.git/config 对应于 –local1234567891011121314151617181920212223242526272829303132$ git --verion$ git config --list --show-origin"><meta property="og:type" content="article"><meta property="og:title" content="git操作指南"><meta property="og:url" content="https://molly2molly.github.io/git操作指南/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="配置/etc/gitconfig 对应于 –system~/.gitconfig or ~/.config/git/config 对应于 –global.git/config 对应于 –local1234567891011121314151617181920212223242526272829303132$ git --verion$ git config --list --show-origin"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2020-12-09T07:04:32.928Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="git操作指南"><meta name="twitter:description" content="配置/etc/gitconfig 对应于 –system~/.gitconfig or ~/.config/git/config 对应于 –global.git/config 对应于 –local1234567891011121314151617181920212223242526272829303132$ git --verion$ git config --list --show-origin"><link rel="canonical" href="https://molly2molly.github.io/git操作指南/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-javascript/">es6 javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/React/" style="font-size:13px">React</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/es6-javascript/" style="font-size:13px">es6 javascript</a> <a href="/tags/javascript/" style="font-size:14px">javascript</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/webpack/" style="font-size:13px">webpack</a> <a href="/tags/数据结构/" style="font-size:14px">数据结构</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/GridLayout/" class="title">GridLayout</a></p><p class="item-date"><time datetime="2020-12-24T07:13:47.000Z" itemprop="datePublished">2020-12-24</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Flexbox/" class="title">Flexbox</a></p><p class="item-date"><time datetime="2020-12-24T06:01:50.000Z" itemprop="datePublished">2020-12-24</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/快速排序/" class="title">快速排序</a></p><p class="item-date"><time datetime="2020-12-14T06:10:04.000Z" itemprop="datePublished">2020-12-14</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/快速选择/" class="title">快速选择</a></p><p class="item-date"><time datetime="2020-12-14T06:10:04.000Z" itemprop="datePublished">2020-12-14</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/栈和队列/" class="title">栈和队列</a></p><p class="item-date"><time datetime="2020-12-07T08:13:41.000Z" itemprop="datePublished">2020-12-07</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-git操作指南" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">git操作指南</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/git操作指南/" class="article-date"><time datetime="2019-11-21T07:29:43.000Z" itemprop="datePublished">2019-11-21</time></a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/git操作指南/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><ol><li>/etc/gitconfig 对应于 –system</li><li>~/.gitconfig or ~/.config/git/config 对应于 –global</li><li>.git/config 对应于 –local</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">$ git --verion</span><br><span class="line"></span><br><span class="line">$ git config --list --show-origin</span><br><span class="line">$ git config --global user.name &quot;xxx&quot;</span><br><span class="line">$ git config --global user.email &quot;zzz@example.com&quot;</span><br><span class="line">$ git config --global core.editor emacs</span><br><span class="line">$ git config --global push.default simple</span><br><span class="line"></span><br><span class="line"># 别名</span><br><span class="line"># git c “some comment”</span><br><span class="line">$ git config --global alias.c &apos;commit -m&apos;</span><br><span class="line">$ git config --global alias.co &apos;checkout&apos;</span><br><span class="line">$ git config --global alias.cob &apos;checkout -b&apos;</span><br><span class="line">$ git config --global alias.br &apos;branch&apos;</span><br><span class="line">$ git config --global alias.m &apos;merge&apos;</span><br><span class="line">$ git config --global alias.a &apos;add .&apos;</span><br><span class="line">$ git config --global alias.s &apos;status&apos;</span><br><span class="line">$ git config --global alias.dbr &apos;branch -d&apos;</span><br><span class="line"></span><br><span class="line">$ git config --global http.proxy &apos;socks5://127.0.0.1:1080&apos;</span><br><span class="line">$ git config --global https.proxy &apos;socks5://127.0.0.1:1080&apos;</span><br><span class="line">$ git config --global --unset http.proxy</span><br><span class="line">$ git config --global --unset https.proxy</span><br><span class="line"></span><br><span class="line">$ git config http.postBuffer 524288000</span><br><span class="line">$ git config https.postBuffer 524288000</span><br><span class="line"></span><br><span class="line">$ git config --list</span><br><span class="line">	</span><br><span class="line">$ git help &lt;verb&gt;</span><br><span class="line">$ git &lt;verb&gt;  --help</span><br><span class="line">$ man git-&lt;verb&gt;</span><br></pre></td></tr></table></figure><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m &quot;initial&quot;</span><br><span class="line">$ git clone https://xxx.example.com/xxxx.git &lt;newLocalRepositoryName&gt;</span><br><span class="line">$ git pull origin master</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">$ git remote -v</span><br><span class="line">$ git remote add &lt;shortname&gt; &lt;url&gt;</span><br><span class="line">$ git fetch &lt;remote&gt;</span><br><span class="line">$ git push origin master</span><br><span class="line">$ git remote show &lt;remote&gt;</span><br><span class="line">$ git remote rename &lt;originRemote&gt; &lt;newRemote&gt;</span><br><span class="line">$ git remote rm &lt;remote&gt;</span><br><span class="line"></span><br><span class="line">$ git remote rm origin</span><br><span class="line"></span><br><span class="line">$ cat .gitignore</span><br><span class="line"></span><br><span class="line">$ git rm -rf 文件夹</span><br><span class="line">$ git rm &lt;file&gt;</span><br><span class="line">$ git rm -f &lt;file&gt;  #remove from stage area not commit </span><br><span class="line">$ git rm --cached &lt;file&gt; #remove from stage area alreay commit</span><br><span class="line"></span><br><span class="line">$ git mv file_form file_to</span><br></pre></td></tr></table></figure><h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 创建分支</span><br><span class="line">$ git checkout -b new_feature</span><br><span class="line"></span><br><span class="line"># 创建分支</span><br><span class="line">$ git branch new_feature</span><br><span class="line">$ git checkout new_feature</span><br><span class="line"></span><br><span class="line"># 查看所有的分支</span><br><span class="line">$ git branch</span><br><span class="line"></span><br><span class="line"># 合并分支</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m &quot;adds my new feature&quot;</span><br><span class="line">$ git checkout master</span><br><span class="line">$ git merge new_feature</span><br><span class="line"></span><br><span class="line"># 丢弃分支</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m &quot;feature to be discarded&quot;</span><br><span class="line">$ git checkout master</span><br><span class="line"></span><br><span class="line"># 删除分支</span><br><span class="line">$ git branch -d new_feature</span><br><span class="line">$ git branch -D new_feature</span><br></pre></td></tr></table></figure><h3 id="迁出"><a href="#迁出" class="headerlink" title="迁出"></a>迁出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">$ git checkout 085bb3bcb</span><br><span class="line"></span><br><span class="line"># 签出到一个新的分支</span><br><span class="line">$ git checkout -b feature_version_name 085bb3bcb</span><br><span class="line"></span><br><span class="line">$ git checkout &lt;SHA&gt; -- &lt;filename&gt;</span><br></pre></td></tr></table></figure><h3 id="撤销还未commit的修改"><a href="#撤销还未commit的修改" class="headerlink" title="撤销还未commit的修改"></a>撤销还未commit的修改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- &lt;bad filename&gt;</span><br></pre></td></tr></table></figure><h3 id="转移某些在master分支上的commit到新的分支上"><a href="#转移某些在master分支上的commit到新的分支上" class="headerlink" title="转移某些在master分支上的commit到新的分支上"></a>转移某些在master分支上的commit到新的分支上</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch feature</span><br><span class="line">$ git reset --hard origin/master</span><br><span class="line">$ git checkout feature</span><br></pre></td></tr></table></figure><h3 id="本地旧master分支落后于远程最新master分支时，修改新分支的起点"><a href="#本地旧master分支落后于远程最新master分支时，修改新分支的起点" class="headerlink" title="本地旧master分支落后于远程最新master分支时，修改新分支的起点"></a>本地旧master分支落后于远程最新master分支时，修改新分支的起点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout feature</span><br><span class="line">$ git rebase master</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">You could have done this with `git reset` (no --hard, intentionally preserving changes on disk) then `git checkout -b &lt;new branch name&gt;` and then re-commit the changes, but that way, you’d lose the commit history. There’s a better way.</span><br><span class="line"></span><br><span class="line">`git rebase master` does a couple of things:</span><br><span class="line"></span><br><span class="line">- First it locates the common ancestor between your currently-checked-out branch and master.</span><br><span class="line">- Then it resets the currently-checked-out branch to that ancestor, holding all later commits in a temporary holding area.</span><br><span class="line">- Then it advances the currently-checked-out-branch to the end of master and replays the commits from the holding area after master‘s last commit.</span><br></pre></td></tr></table></figure><h3 id="删除一系列commit历史中间的某些commit"><a href="#删除一系列commit历史中间的某些commit" class="headerlink" title="删除一系列commit历史中间的某些commit"></a>删除一系列commit历史中间的某些commit</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i &lt;earlier SHA&gt;</span><br><span class="line"></span><br><span class="line">-i puts rebase in “interactive mode”. It starts off like the rebase discussed above, but before replaying any commits, it pauses and allows you to gently modify each commit as it’s replayed.</span><br></pre></td></tr></table></figure><h3 id="修改最后一个commit"><a href="#修改最后一个commit" class="headerlink" title="修改最后一个commit"></a>修改最后一个commit</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --amend # overwrite previous commit</span><br><span class="line">$ git commit --amend -m &quot;new message&quot;</span><br><span class="line"></span><br><span class="line">`git commit --amend` will update and replace the most recent commit with a new commit that combines any staged changes with the contents of the previous commit. With nothing currently staged, this just rewrites the previous commit message.</span><br></pre></td></tr></table></figure><h3 id="修改不是最后一个的commit"><a href="#修改不是最后一个的commit" class="headerlink" title="修改不是最后一个的commit"></a>修改不是最后一个的commit</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git commit --squash &lt;SHA of the earlier commit&gt;</span><br><span class="line">$ git rebase --autosquash -i &lt;even earlier SHA&gt;</span><br><span class="line"></span><br><span class="line">`git commit --squash` will create a new commit with a commit message like squash! Earlier commit. (You could manually create a commit with a message like that, but commit --squash saves you some typing.)</span><br><span class="line"></span><br><span class="line">You can also use `git commit --fixup` if you don’t want to be prompted to write a new commit message for the combined commit. In this scenario, you’d probably use commit --fixup, since you just want to use the earlier commit’s commit message during rebase.</span><br><span class="line"></span><br><span class="line">`rebase --autosquash -i` will launch an interactive rebase editor, but the editor will open with any squash! and fixup! commits already paired to the commit target in the list of commits</span><br><span class="line"></span><br><span class="line">When using --squash and --fixup, you might not remember the SHA of the commit you want to fix—only that it was one or five commits ago. You might find using Git’s ^ and ~ operators especially handy. HEAD^ is one commit before HEAD. HEAD~4 is four commits before HEAD – or, altogether, five commits back.</span><br></pre></td></tr></table></figure><h3 id="撤销commit-不会改变历史"><a href="#撤销commit-不会改变历史" class="headerlink" title="撤销commit, 不会改变历史"></a>撤销commit, 不会改变历史</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git revert HEAD</span><br><span class="line">$ git revert &lt;SHA&gt;</span><br><span class="line">$ git revert [倒数第一个提交] [倒数第二个提交]</span><br><span class="line">	--no-edit：执行时不打开默认编辑器，直接使用 Git 自动生成的提交信息。  </span><br><span class="line">	--no-commit：只抵消暂存区和工作区的文件变化，不产生新的提交。 </span><br><span class="line">	</span><br><span class="line">You just ran git push, sending your changes to GitHub, now you realize there’s a problem with one of those commits. You’d like to undo that commit.</span><br><span class="line"></span><br><span class="line">git revert will create a new commit that’s the opposite (or inverse) of the given SHA. If the old commit is “matter”, the new commit is “anti-matter”—anything removed in the old commit will be added in the new commit and anything added in the old commit will be removed in the new commit.</span><br><span class="line"></span><br><span class="line">This is Git’s safest, most basic “undo” scenario, because it doesn’t alter history</span><br><span class="line">so you can now git push the new “inverse” commit to undo your mistaken commit.</span><br></pre></td></tr></table></figure><h3 id="撤销commit，改变历史"><a href="#撤销commit，改变历史" class="headerlink" title="撤销commit，改变历史"></a>撤销commit，改变历史</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line"></span><br><span class="line">$ git reset HEAD &lt;file&gt;</span><br><span class="line"></span><br><span class="line"># 丢弃提交，不改变工作区的文件（但会改变暂存区）</span><br><span class="line">$ git reset [last good SHA]</span><br><span class="line">	</span><br><span class="line"># --hard参数可以让工作区里面的文件也回到以前的状态</span><br><span class="line">$ git reset --hard [last good SHA]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git reset rewinds your repository’s history all the way back to the specified SHA. It’s as if those commits never happened. By default, git reset preserves the working directory. The commits are gone, but the contents are still on disk. This is the safest option, but often, you’ll want to “undo” the commits and the changes in one move—that’s what --hard does.</span><br><span class="line">执行`git reset`命令之后，如果想找回那些丢弃掉的提交，可以使用`git reflog`命令。不过，这种做法有时效性，时间长了可能找不回来。</span><br><span class="line"></span><br><span class="line">$ git reflog</span><br><span class="line">$ git reset --hard &lt;SHA&gt;</span><br><span class="line">$ or git checkout &lt;SHA&gt; -- &lt;filename&gt;</span><br><span class="line">$ or git cherry-pick &lt;SHA&gt;</span><br></pre></td></tr></table></figure><h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br><span class="line">$ git tag -l &quot;searchText&quot;</span><br><span class="line"></span><br><span class="line"># lightweight tag</span><br><span class="line">$ git tag &lt;tagname&gt; </span><br><span class="line"></span><br><span class="line"># annotated tag</span><br><span class="line">$ git tag -a &lt;tagname&gt;  -m &lt;tagmessage&gt; </span><br><span class="line"></span><br><span class="line">$ git tag -a &lt;tagname&gt; &lt;checksum&gt; </span><br><span class="line"></span><br><span class="line">$ git show &lt;tagname&gt;</span><br><span class="line">$ git push origin &lt;tagname&gt;</span><br><span class="line">$ git push origin --tags</span><br><span class="line"></span><br><span class="line"># delete tag</span><br><span class="line">$ git tag -d &lt;tagname&gt;</span><br><span class="line"></span><br><span class="line">$ git push origin :ref/tags/&lt;tagname&gt;</span><br></pre></td></tr></table></figure><h3 id="staged-和-unstaged-文件的变化"><a href="#staged-和-unstaged-文件的变化" class="headerlink" title="staged 和 unstaged 文件的变化"></a>staged 和 unstaged 文件的变化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">$ git diff --staged</span><br><span class="line">$ git difftool --tool-help</span><br><span class="line">	</span><br><span class="line">$ git diff HEAD 24b26b91634cd73f1001e10d6edd8f7056f15a1c</span><br></pre></td></tr></table></figure><h3 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># 打包master分支的所有文件,git支持zip和tar两种输出格式</span><br><span class="line">$ git archive --format=zip --output master.zip master</span><br><span class="line"></span><br><span class="line"># 打包当前分支当前HEAD的所有文件</span><br><span class="line">$ git archive --format=zip --output head.zip HEAD</span><br><span class="line"></span><br><span class="line"># 打包v1.2标签的所有文件</span><br><span class="line">$ git archive --format=zip --output v1.2.zip v1.2</span><br><span class="line"></span><br><span class="line"># 打包最后修改的文件</span><br><span class="line">$ git archive --format=zip -o update.zip HEAD $(git diff --name-only HEAD^)</span><br><span class="line"></span><br><span class="line"># 打包最后两个版本修改的文件</span><br><span class="line">$ git archive --format=zip -o update.zip HEAD $(git diff --name-only HEAD~2)</span><br><span class="line"></span><br><span class="line"># 打包两个分支之间差别的文件</span><br><span class="line">$ git archive --format=zip -o update.zip HEAD $(git diff --name-only master fix-error)</span><br><span class="line"></span><br><span class="line">Added (A)</span><br><span class="line">Copied (C)</span><br><span class="line">Deleted (D)</span><br><span class="line">Modified (M)</span><br><span class="line">Renamed (R)</span><br><span class="line">changed (T)</span><br><span class="line">Unmerged (U)</span><br><span class="line">Unknown (X)</span><br><span class="line">Broken (B)</span><br><span class="line"></span><br><span class="line">$ git archive --format=zip --output=update.zip HEAD $(git diff --name-only --diff-filter=ACMRT  eff0748  055dcb1 )</span><br><span class="line"></span><br><span class="line">$ git archive --format=zip --output=update.zip  HEAD $(git diff --name-only --diff-filter=CMRT  eff0748  055dcb1 )</span><br><span class="line"></span><br><span class="line">$ git diff --name-only eff0748  055dcb1</span><br></pre></td></tr></table></figure><h3 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">$ git log -p / --patch -&lt;n&gt;</span><br><span class="line">$ git log --stat</span><br><span class="line">$ git log --pretty=oneline</span><br><span class="line">$ git log --pretty=format:&quot;%h - %an, %ar : %s&quot;</span><br><span class="line">$ git log --pretty=format:&quot;%h - %an, %ar : %s&quot; --graph</span><br><span class="line">$ git log --since=2.week</span><br><span class="line">$ git log -S &lt;file or function_name&gt;</span><br><span class="line">$ git log --grep &lt;commit_message&gt;</span><br><span class="line">$ git log --author &lt;author&gt;</span><br></pre></td></tr></table></figure><h3 id="Stop-tracking-a-tracked-file"><a href="#Stop-tracking-a-tracked-file" class="headerlink" title="Stop tracking a tracked file"></a>Stop tracking a tracked file</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git rm --cached application.log</span><br><span class="line"></span><br><span class="line">While .gitignore prevents Git from tracking changes to files or even noticing the existence of files it’s never tracked before, once a file has been added and committed, Git will continue noticing changes in that file. Similarly, if you’ve used git add -f to “force”, or override, .gitignore, Git will keep tracking changes. You won’t have to use -f to add it in the future.</span><br><span class="line"></span><br><span class="line">If you want to remove that should-be-ignored file from Git’s tracking, git rm --cached will remove it from tracking but leave the file untouched on disk. Since it’s now being ignored, you won’t see that file in git status or accidentally commit changes from that file again.</span><br></pre></td></tr></table></figure><h3 id="github"><a href="#github" class="headerlink" title="github"></a>github</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;489573239@qq.com&quot;</span><br><span class="line"></span><br><span class="line"># 确认ssh-agent是可用的</span><br><span class="line">$ eval $(ssh-agent -s)</span><br><span class="line"></span><br><span class="line"># 将ssh key添加到ssh-agent</span><br><span class="line">$ ssh-add ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"># 复制key内容</span><br><span class="line">$ clip &lt; ~/.ssh/id_rsa.pub</span><br><span class="line"></span><br><span class="line"># 配置key到github</span><br><span class="line">登录github-&gt;选择Settings-&gt;SSH keys-&gt;New SSH key</span><br><span class="line"></span><br><span class="line"># 测试ssh key的配置情况</span><br><span class="line">$ ssh -t git@github.com</span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/git操作指南/" title="git操作指南" target="_blank" rel="external">https://molly2molly.github.io/git操作指南/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/FunctionalProgramming函数式编程/" title="FunctionalProgramming函数式编程"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/RESTful/" title="RESTful"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(T){var n={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=n}(window)</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta="nick,mail,link";meta=meta.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html><!-- rebuild by neat -->