<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>Yeoman | Hexo</title><meta name="description" content="123456789101112131415161718192021222324# 安装Yeomannpm i -g yo@latestnpm install yeoman-environment@latest -gnpm install -g generator-webappyo webappyo webapp --help# Easily access a generator’s home pa"><meta property="og:type" content="article"><meta property="og:title" content="Yeoman"><meta property="og:url" content="https://molly2molly.github.io/Yeoman/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="123456789101112131415161718192021222324# 安装Yeomannpm i -g yo@latestnpm install yeoman-environment@latest -gnpm install -g generator-webappyo webappyo webapp --help# Easily access a generator’s home pa"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2021-03-24T07:48:34.627Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Yeoman"><meta name="twitter:description" content="123456789101112131415161718192021222324# 安装Yeomannpm i -g yo@latestnpm install yeoman-environment@latest -gnpm install -g generator-webappyo webappyo webapp --help# Easily access a generator’s home pa"><link rel="canonical" href="https://molly2molly.github.io/Yeoman/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-javascript/">es6 javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/React/" style="font-size:13px">React</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/Webpack/" style="font-size:13px">Webpack</a> <a href="/tags/es6-javascript/" style="font-size:13px">es6 javascript</a> <a href="/tags/javascript/" style="font-size:14px">javascript</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/数据结构/" style="font-size:14px">数据结构</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Babel/" class="title">Babel</a></p><p class="item-date"><time datetime="2021-03-26T07:05:01.000Z" itemprop="datePublished">2021-03-26</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Yeoman/" class="title">Yeoman</a></p><p class="item-date"><time datetime="2021-03-23T06:56:23.000Z" itemprop="datePublished">2021-03-23</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/FreeOnlineProgrammingCSCourses/" class="title">FreeOnlineProgrammingCSCourses</a></p><p class="item-date"><time datetime="2021-01-13T01:18:08.000Z" itemprop="datePublished">2021-01-13</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Question/" class="title">Question</a></p><p class="item-date"><time datetime="2021-01-12T05:38:46.000Z" itemprop="datePublished">2021-01-12</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/URL/" class="title">URL</a></p><p class="item-date"><time datetime="2021-01-11T06:39:46.000Z" itemprop="datePublished">2021-01-11</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-Yeoman" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">Yeoman</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/Yeoman/" class="article-date"><time datetime="2021-03-23T06:56:23.000Z" itemprop="datePublished">2021-03-23</time></a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/Yeoman/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装Yeoman</span></span><br><span class="line">npm i -g yo@latest</span><br><span class="line">npm install yeoman-environment@latest -g</span><br><span class="line"></span><br><span class="line">npm install -g generator-webapp</span><br><span class="line"></span><br><span class="line">yo webapp</span><br><span class="line">yo webapp --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Easily access a generator’s home page by running</span></span><br><span class="line">npm home generator-webapp</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generators scaffolding complex frameworks are likely to provide additional generators to scaffold smaller parts of a project. These generators are usually referred to as sub-generators, and are accessed as generator:sub-generator.</span></span><br><span class="line"><span class="comment"># To add a new controller to the project, run the controller sub-generator:</span></span><br><span class="line">yo angular:controller MyNewController</span><br><span class="line"></span><br><span class="line"><span class="comment"># Access the full help screen</span></span><br><span class="line">yo --<span class="built_in">help</span> </span><br><span class="line"><span class="comment"># List every installed generators</span></span><br><span class="line">yo --generators </span><br><span class="line"><span class="comment"># Get the version</span></span><br><span class="line">yo --version </span><br><span class="line"><span class="comment"># The doctor command will diagnose and provide steps to resolve the most common issues.</span></span><br><span class="line">yo doctor</span><br></pre></td></tr></table></figure><h3 id="创建-generator"><a href="#创建-generator" class="headerlink" title="创建 generator"></a>创建 generator</h3><ol><li><p>创建一个<code>generator-name</code>的文件夹</p></li><li><p>run <code>npm init</code></p><p>The <code>name</code> property must be prefixed by <code>generator-</code>. The <code>keywords</code> property must contain <code>&quot;yeoman-generator&quot;</code> and the repo must have a description to be indexed by our <a href="https://yeoman.io/generators/" target="_blank" rel="noopener">generators page</a>.</p></li><li><p>run <code>npm install --save yeoman-generator</code> or <code>npm install --save yeoman-generator@4</code></p></li><li><p>The default generator used when you call <code>yo name</code> is the <code>app</code> generator. This must be contained within the <code>app/</code> directory.</p><p>Sub-generators, used when you call <code>yo name:subcommand</code>, are stored in folders named exactly like the sub command.</p><p>If you use this second directory structure, make sure you point the <code>files</code> property in your <code>package.json</code> at all the generator folders.</p><p>Yeoman allows two different directory structures. It’ll look in <code>./</code> and in <code>generators/</code> to register available generators.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">├───package.json</span><br><span class="line">└───generators/</span><br><span class="line">    ├───app/</span><br><span class="line">    │   └───index.js</span><br><span class="line">    └───router/</span><br><span class="line">        └───index.js</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">├───package.json</span><br><span class="line">├───app/</span><br><span class="line">│   └───index.js</span><br><span class="line">└───router/</span><br><span class="line">    └───index.js</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;files&quot;: [</span><br><span class="line">    &quot;app&quot;,</span><br><span class="line">    &quot;subcommand&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>On the command line, from the root of your generator project (in the <code>generator-name/</code> folder), type:</p><figure class="highlight plain"><figcaption><span>link```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   That will install your project dependencies and symlink a global module to your local file. After npm is done, you’ll be able to call `yo name` and you should see the `this.log`, defined earlier, rendered in the terminal. Congratulations, you just built your first generator!</span><br><span class="line"></span><br><span class="line">### Finding the project root</span><br><span class="line"></span><br><span class="line">While running a generator, Yeoman will try to figure some things out based on the context of the folder it’s running from.</span><br><span class="line"></span><br><span class="line">Most importantly, Yeoman searches the directory tree for a `.yo-rc.json` file. If found, it considers the location of the file as the root of the project. Behind the scenes, Yeoman will change the current directory to the `.yo-rc.json` file location and run the requested generator there.</span><br><span class="line"></span><br><span class="line">The Storage module creates the `.yo-rc.json` file. Calling `this.config.save()` from a generator for the first time will create the file.</span><br><span class="line"></span><br><span class="line">So, if your generator is not running in your current working directory, make sure you don’t have a `.yo-rc.json` somewhere up the directory tree.</span><br><span class="line"></span><br><span class="line">### Each function on the object returned by `Object.getPrototypeOf(Generator)` will be automatically run.</span><br><span class="line"></span><br><span class="line">### Helper and private methods</span><br><span class="line"></span><br><span class="line">Now that you know the prototype methods are considered to be a task, you may wonder how to define helper or private methods that won’t be called automatically. There are three different ways to achieve this.</span><br><span class="line"></span><br><span class="line">1. Prefix method name by an underscore (e.g. `_private_method`).</span><br></pre></td></tr></table></figure><p>class extends Generator {</p><pre><code>method1() {
  console.log(&apos;hey 1&apos;);
}

_private_method() {
  console.log(&apos;private hey&apos;);
}
</code></pre><p>}</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. Use instance methods:</span><br></pre></td></tr></table></figure><p>class extends Generator {</p><pre><code>constructor(args, opts) {
  // Calling the super constructor is important so our generator is correctly set up
  super(args, opts)

  this.helperMethod = function () {
    console.log(&apos;won\&apos;t be called automatically&apos;);
  };
}
</code></pre><p>}</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. Extend a parent generator:</span><br></pre></td></tr></table></figure><p>class MyBase extends Generator {</p><pre><code>helper() {
  console.log(&apos;methods on the parent generator won\&apos;t be called automatically&apos;);
}
</code></pre><p>}</p><p>module.exports = class extends MyBase {</p><pre><code>exec() {
  this.helper();
}
</code></pre><p>};</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## The run loop</span><br><span class="line"></span><br><span class="line">Running tasks sequentially is alright if there’s a single generator. But it is not enough once you start composing generators together.</span><br><span class="line"></span><br><span class="line">That’s why Yeoman uses a **run loop**.</span><br><span class="line"></span><br><span class="line">The run loop is a queue system with priority support. We use the [Grouped-queue](https://github.com/SBoudrias/grouped-queue) module to handle the run loop.</span><br><span class="line"></span><br><span class="line">Priorities are defined in your code as special prototype method names. When a method name is the same as a priority name, the run loop pushes the method into this special queue. If the method name doesn’t match a priority, it is pushed in the `default` group.</span><br><span class="line"></span><br><span class="line">In code, it will look this way:</span><br></pre></td></tr></table></figure></li></ol><p>class extends Generator {<br>priorityName() {}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can also group multiple methods to be run together in a queue by using a hash instead of a single method:</span><br></pre></td></tr></table></figure><p></p><p>Generator.extend({<br>priorityName: {<br>method() {},<br>method2() {}<br>}<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(Note that this last technique doesn’t play well with JS `class` definition)</span><br><span class="line"></span><br><span class="line">The available priorities are (in running order):</span><br><span class="line"></span><br><span class="line">1. `initializing` - Your initialization methods (checking current project state, getting configs, etc)</span><br><span class="line">2. `prompting` - Where you prompt users for options (where you’d call `this.prompt()`)</span><br><span class="line">3. `configuring` - Saving configurations and configure the project (creating `.editorconfig` files and other metadata files)</span><br><span class="line">4. `default` - If the method name doesn’t match a priority, it will be pushed to this group.</span><br><span class="line">5. `writing` - Where you write the generator specific files (routes, controllers, etc)</span><br><span class="line">6. `conflicts` - Where conflicts are handled (used internally)</span><br><span class="line">7. `install` - Where installations are run (npm, bower)</span><br><span class="line">8. `end` - Called last, cleanup, say *good bye*, etc</span><br><span class="line"></span><br><span class="line">Follow these priorities guidelines and your generator will play nice with others.</span><br><span class="line"></span><br><span class="line"># Asynchronous tasks</span><br><span class="line"></span><br><span class="line">There are multiple ways to pause the run loop until a task is done doing work asynchronously.</span><br><span class="line"></span><br><span class="line">The easiest way is to **return a promise**. The loop will continue once the promise resolves, or it’ll raise an exception and stop if it fails.</span><br><span class="line"></span><br><span class="line">If the asynchronous API you’re relying upon doesn’t support promises, then you can rely on the legacy `this.async()` way. Calling `this.async()` will return a function to call once the task is done. For example:</span><br></pre></td></tr></table></figure><p></p><p>asyncTask() {<br>var done = this.async();</p><p>getUserEmail(function (err, name) {<br>done(err);<br>});<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">If the `done` function is called with an error parameter, the run loop will stop and an exception will be raised.</span><br><span class="line"></span><br><span class="line">## User interactions</span><br><span class="line"></span><br><span class="line">### Prompts</span><br><span class="line"></span><br><span class="line">Prompts are the main way a generator interacts with a user. The prompt module is provided by [Inquirer.js](https://github.com/SBoudrias/Inquirer.js) and you should refer [to its API](https://github.com/SBoudrias/Inquirer.js) for a list of available prompt options.</span><br><span class="line"></span><br><span class="line">The `prompt` method is asynchronous and returns a promise. You’ll need to return the promise from your task in order to wait for its completion before running the next one. ([learn more about asynchronous task](https://yeoman.io/authoring/running-context.html))</span><br></pre></td></tr></table></figure><p></p><p>module.exports = class extends Generator {<br>async prompting() {<br>const answers = await this.prompt([<br>{<br>type: “input”,<br>name: “name”,<br>message: “Your project name”,<br>default: this.appname // Default to current folder name<br>},<br>{<br>type: “confirm”,<br>name: “cool”,<br>message: “Would you like to enable the Cool feature?”<br>}<br>]);</p><pre><code>this.log(&quot;app name&quot;, answers.name);
this.log(&quot;cool feature&quot;, answers.cool);
</code></pre><p>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Note here that we use the [`prompting` queue](https://yeoman.io/authoring/running-context.html) to ask for feedback from the user.</span><br><span class="line"></span><br><span class="line">#### Using user answers at a later stage</span><br><span class="line"></span><br><span class="line">A very common scenario is to use the user answers at a later stage, e.g. in [`writing` queue](https://yeoman.io/authoring/file-system.html). This can be easily achieved by adding them to `this` context:</span><br></pre></td></tr></table></figure><p></p><p>module.exports = class extends Generator {<br>async prompting() {<br>this.answers = await this.prompt([<br>{<br>type: “confirm”,<br>name: “cool”,<br>message: “Would you like to enable the Cool feature?”<br>}<br>]);<br>}</p><p>writing() {<br>this.log(“cool feature”, this.answers.cool); // user answer <code>cool</code> used<br>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### Remembering user preferences</span><br><span class="line"></span><br><span class="line">A user may give the same input to certain questions every time they run your generator. For these questions, you probably want to remember what the user answered previously and use that answer as the new `default`.</span><br><span class="line"></span><br><span class="line">Yeoman extends the Inquirer.js API by adding a `store` property to question objects. This property allows you to specify that the user provided answer should be used as the default answer in the future. This can be done as follows:</span><br></pre></td></tr></table></figure><p></p><p>this.prompt({<br>type: “input”,<br>name: “username”,<br>message: “What’s your GitHub username”,<br>store: true<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*Note:* Providing a default value will prevent the user from returning any empty answers.</span><br><span class="line"></span><br><span class="line">If you’re only looking to store data without being directly tied to the prompt, make sure to checkout [the Yeoman storage documentation](https://yeoman.io/authoring/storage.html).</span><br><span class="line"></span><br><span class="line">### Arguments</span><br><span class="line"></span><br><span class="line">Arguments are passed directly from the command line:</span><br></pre></td></tr></table></figure><p></p><p>yo webapp my-project<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">In this example, `my-project` would be the first argument.</span><br><span class="line"></span><br><span class="line">To notify the system that we expect an argument, we use the `this.argument()` method. This method accepts a `name` (String) and an optional hash of options.</span><br><span class="line"></span><br><span class="line">The `name` argument will then be available as: `this.options[name]`.</span><br><span class="line"></span><br><span class="line">The options hash accepts multiple key-value pairs:</span><br><span class="line"></span><br><span class="line">- `desc` Description for the argument</span><br><span class="line">- `required` Boolean whether it is required</span><br><span class="line">- `type` String, Number, Array (can also be a custom function receiving the raw string value and parsing it)</span><br><span class="line">- `default` Default value for this argument</span><br><span class="line"></span><br><span class="line">This method must be called inside the `constructor` method. Otherwise Yeoman won’t be able to output the relevant help information when a user calls your generator with the help option: e.g. `yo webapp --help`.</span><br><span class="line"></span><br><span class="line">Here is an example:</span><br></pre></td></tr></table></figure><p></p><p>module.exports = class extends Generator {<br>// note: arguments and options should be defined in the constructor.<br>constructor(args, opts) {<br>super(args, opts);</p><pre><code>// This makes `appname` a required argument.
this.argument(&quot;appname&quot;, { type: String, required: true });

// And you can then access it later; e.g.
this.log(this.options.appname);
</code></pre><p>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Argument of type `Array` will contain all remaining arguments passed to the generator.</span><br><span class="line"></span><br><span class="line">### Options</span><br><span class="line"></span><br><span class="line">Options look a lot like arguments, but they are written as command line *flags*.</span><br></pre></td></tr></table></figure><p></p><p>yo webapp –coffee<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">To notify the system that we expect an option, we use the `this.option()` method. This method accepts a `name` (String) and an optional hash of options.</span><br><span class="line"></span><br><span class="line">The `name` value will be used to retrieve the option at the matching key `this.options[name]`.</span><br><span class="line"></span><br><span class="line">The options hash (the second argument) accepts multiple key-value pairs:</span><br><span class="line"></span><br><span class="line">- `desc` Description for the option</span><br><span class="line">- `alias` Short name for option</span><br><span class="line">- `type` Either Boolean, String or Number (can also be a custom function receiving the raw string value and parsing it)</span><br><span class="line">- `default` Default value</span><br><span class="line">- `hide` Boolean whether to hide from help</span><br><span class="line"></span><br><span class="line">Here is an example:</span><br></pre></td></tr></table></figure><p></p><p>module.exports = class extends Generator {<br>// note: arguments and options should be defined in the constructor.<br>constructor(args, opts) {<br>super(args, opts);</p><pre><code>// This method adds support for a `--coffee` flag
this.option(&quot;coffee&quot;);

// And you can then access it later; e.g.
this.scriptSuffix = this.options.coffee ? &quot;.coffee&quot; : &quot;.js&quot;;
</code></pre><p>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Outputting Information</span><br><span class="line"></span><br><span class="line">Outputting information is handled by the `this.log` module.</span><br><span class="line"></span><br><span class="line">The main method you’ll use is simply `this.log` (e.g. `this.log(&apos;Hey! Welcome to my awesome generator&apos;)`). It takes a string and outputs it to the user; basically it mimics `console.log()` when used inside of a terminal session. You can use it like so:</span><br></pre></td></tr></table></figure><p></p><p>module.exports = class extends Generator {<br>myAction() {<br>this.log(“Something has gone wrong!”);<br>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">There’s also some other helper methods you can find in the [API documentation](https://yeoman.github.io/environment/TerminalAdapter.html).</span><br><span class="line"></span><br><span class="line">### In Yeoman, composability can be initiated in two ways:</span><br><span class="line"></span><br><span class="line">- A generator can decide to compose itself with another generator (e.g., `generator-backbone` uses `generator-mocha`).</span><br><span class="line">- An end user may also initiate the composition (e.g., Simon wants to generate a Backbone project with SASS and Rails). Note: end user initiated composition is a planned feature and currently not available.</span><br><span class="line"></span><br><span class="line">## `this.composeWith()`</span><br><span class="line"></span><br><span class="line">The `composeWith` method allows the generator to run side-by-side with another generator (or subgenerator). That way it can use features from the other generator instead of having to do it all by itself.</span><br><span class="line"></span><br><span class="line">When composing, don’t forget about [the running context and the run loop](https://yeoman.io/authoring/running-context.html). On a given priority group execution, all composed generators will execute functions in that group. Afterwards, this will repeat for the next group. Execution between the generators is the same order as `composeWith` was called, see [execution example](https://yeoman.io/authoring/composability.html#order).</span><br><span class="line"></span><br><span class="line">`composeWith` takes two parameters.</span><br><span class="line"></span><br><span class="line">1. `generatorPath` - A full path pointing to the generator you want to compose with (usually using `require.resolve()`).</span><br><span class="line">2. `options` - An Object containing options to pass to the composed generator once it runs.</span><br><span class="line"></span><br><span class="line">When composing with a `peerDependencies` generator:</span><br></pre></td></tr></table></figure><p></p><p>this.composeWith(require.resolve(‘generator-bootstrap/generators/app’), {preprocessor: ‘sass’});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`require.resolve()` returns the path from where Node.js would load the provided module.</span><br><span class="line"></span><br><span class="line">Even though it is not an encouraged practice, you can also pass a generator namespace to `composeWith`. In that case, Yeoman will try to find that generator installed as a `peerDependencies` or globally on the end user system.</span><br></pre></td></tr></table></figure><p></p><p>this.composeWith(‘backbone:route’, {rjs: true});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### composing with a Generator class</span><br><span class="line"></span><br><span class="line">`composeWith` can also take an object as its first argument. The object should have the following properties defined:</span><br><span class="line"></span><br><span class="line">- `Generator` - The generator class to compose with</span><br><span class="line">- `path` - The path to the generator files</span><br><span class="line"></span><br><span class="line">This will let you compose with generator classes defined in your project or imported from other modules. Passing `options` as the second argument to `composeWith` works as expected.</span><br></pre></td></tr></table></figure><p></p><p>// Import generator-node’s main generator<br>const NodeGenerator = require(‘generator-node/generators/app/index.js’);</p><p>// Compose with it<br>this.composeWith({<br>Generator: NodeGenerator,<br>path: require.resolve(‘generator-node/generators/app’)<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### execution example</span><br></pre></td></tr></table></figure><p></p><p>// In my-generator/generators/turbo/index.js<br>module.exports = class extends Generator {<br>prompting() {<br>this.log(‘prompting - turbo’);<br>}</p><p>writing() {<br>this.log(‘writing - turbo’);<br>}<br>};</p><p>// In my-generator/generators/electric/index.js<br>module.exports = class extends Generator {<br>prompting() {<br>this.log(‘prompting - zap’);<br>}</p><p>writing() {<br>this.log(‘writing - zap’);<br>}<br>};</p><p>// In my-generator/generators/app/index.js<br>module.exports = class extends Generator {<br>initializing() {<br>this.composeWith(require.resolve(‘../turbo’));<br>this.composeWith(require.resolve(‘../electric’));<br>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Upon running `yo my-generator`, this will result in:</span><br></pre></td></tr></table></figure><p></p><p>prompting - turbo<br>prompting - zap<br>writing - turbo<br>writing - zap<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can alter the function call order by reversing the calls for `composeWith`.</span><br><span class="line"></span><br><span class="line">Keep in mind you can compose with other public generators available on npm.</span><br><span class="line"></span><br><span class="line">For a more complex example of composability, check out [generator-generator](https://github.com/yeoman/generator-generator/blob/master/app/index.js) which is composed of [generator-node](https://github.com/yeoman/generator-node).</span><br><span class="line"></span><br><span class="line">## dependencies or peerDependencies</span><br><span class="line"></span><br><span class="line">*npm* allows three types of dependencies:</span><br><span class="line"></span><br><span class="line">- `dependencies` get installed local to the generator. It is the best option to control the version of the dependency used. This is the preferred option.</span><br><span class="line"></span><br><span class="line">- `peerDependencies` get installed alongside the generator, as a sibling. For example, if `generator-backbone` declared `generator-gruntfile` as a peer dependency, the folder tree would look this way:</span><br></pre></td></tr></table></figure><p></p><p>├───generator-backbone/<br>└───generator-gruntfile/<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- `devDependencies` for testing and development utility. This is not needed here.</span><br><span class="line"></span><br><span class="line">When using `peerDependencies`, be aware other modules may also need the requested module. Take care not to create version conflicts by requesting a specific version (or a narrow range of versions). Yeoman’s recommendation with `peerDependencies` is to always request *higher or equal to (&gt;=)* or *any (\*)* available versions. For example:</span><br></pre></td></tr></table></figure><p></p><p>{<br>“peerDependencies”: {<br>“generator-gruntfile”: “*”,<br>“generator-bootstrap”: “&gt;=1.0.0”<br>}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**Note**: as of npm@3, `peerDependencies` are no longer automatically installed. To install these dependencies, they must be manually installed: `npm install generator-yourgenerator generator-gruntfile generator-bootstrap@&quot;&gt;=1.0.0&quot;`</span><br><span class="line"></span><br><span class="line">## Managing Dependencies</span><br><span class="line"></span><br><span class="line">## npm</span><br><span class="line"></span><br><span class="line">You just need to call `this.npmInstall()` to run an `npm` installation. Yeoman will ensure the `npm install` command is only run once even if it is called multiple times by multiple generators.</span><br><span class="line"></span><br><span class="line">For example you want to install lodash as a dev dependency:</span><br></pre></td></tr></table></figure><p></p><p>class extends Generator {<br>installingLodash() {<br>this.npmInstall([‘lodash’], { ‘save-dev’: true });<br>}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">This is equivalent to call:</span><br></pre></td></tr></table></figure><p></p><p>npm install lodash –save-dev<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">on the command line in your project.</span><br><span class="line"></span><br><span class="line">### Manage npm dependencies programmatically</span><br><span class="line"></span><br><span class="line">You can programatically create or extend your `package.json` file if you don’t want to use a template but like to have fixed versions of your dependencies. Yeomans file system tools can help you to get this job done.</span><br><span class="line"></span><br><span class="line">Example defining `eslint` as dev dependency and `react` as dependency:</span><br></pre></td></tr></table></figure><p></p><p>class extends Generator {<br>writing() {<br>const pkgJson = {<br>devDependencies: {<br>eslint: ‘^3.15.0’<br>},<br>dependencies: {<br>react: ‘^16.2.0’<br>}<br>};</p><pre><code>// Extend or create package.json file in destination path
this.fs.extendJSON(this.destinationPath(&apos;package.json&apos;), pkgJson);
</code></pre><p>}</p><p>install() {<br>this.npmInstall();<br>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Yarn</span><br><span class="line"></span><br><span class="line">You just need to call `this.yarnInstall()` to launch the installation. Yeoman will ensure the `yarn install` command is only run once even if it is called multiple time by multiple generators.</span><br><span class="line"></span><br><span class="line">For example you want to install lodash as a dev dependency:</span><br></pre></td></tr></table></figure><p></p><p>generators.Base.extend({<br>installingLodash: function() {<br>this.yarnInstall([‘lodash’], { ‘dev’: true });<br>}<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">This is equivalent to call:</span><br></pre></td></tr></table></figure><p></p><p>yarn add lodash –dev<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">on the command line in your project.</span><br><span class="line"></span><br><span class="line">## Bower</span><br><span class="line"></span><br><span class="line">You just need to call `this.bowerInstall()` to launch the installation. Yeoman will ensure the `bower install` command is only run once even if it is called multiple time by multiple generators.</span><br><span class="line"></span><br><span class="line">## Combined use</span><br><span class="line"></span><br><span class="line">Calling `this.installDependencies()` runs npm and bower by default. You can decide which ones to use by passing booleans for each package manager.</span><br><span class="line"></span><br><span class="line">Example for using Yarn with Bower:</span><br></pre></td></tr></table></figure><p></p><p>generators.Base.extend({<br>install: function () {<br>this.installDependencies({<br>npm: false,<br>bower: true,<br>yarn: true<br>});<br>}<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Using other tools</span><br><span class="line"></span><br><span class="line">Yeoman provides an abstraction to allow users to `spawn` any CLI commands. This abstraction will normalize to command so it can run seamlessly in Linux, Mac and Windows system.</span><br><span class="line"></span><br><span class="line">For example, if you’re a PHP aficionado and wished to run `composer`, you’d write it this way:</span><br></pre></td></tr></table></figure><p></p><p>class extends Generator {<br>install() {<br>this.spawnCommand(‘composer’, [‘install’]);<br>}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Make sure to call the `spawnCommand` method inside the `install` queue. Your users don’t want to wait for an installation command to complete.</span><br><span class="line"></span><br><span class="line">## Location contexts and paths</span><br><span class="line"></span><br><span class="line">Yeoman file utilities are based on the idea you always have two location contexts on disk. These contexts are folders your generator will most likely read from and write to.</span><br><span class="line"></span><br><span class="line">### Destination context</span><br><span class="line"></span><br><span class="line">The first context is the *destination context*. The destination is the folder in which Yeoman will be scaffolding a new application. It is your user project folder, it is where you’ll write most of the scaffolding.</span><br><span class="line"></span><br><span class="line">The destination context is defined as either the current working directory or the closest parent folder containing a `.yo-rc.json` file. The `.yo-rc.json` file defines the root of a Yeoman project. This file allows your user to run commands in subdirectories and have them work on the project. This ensures a consistent behaviour for the end user.</span><br><span class="line"></span><br><span class="line">You can **get** the *destination path* using `this.destinationRoot()` or by joining a path using `this.destinationPath(&apos;sub/path&apos;)`.</span><br></pre></td></tr></table></figure><p></p><p>// Given destination root is ~/projects<br>class extends Generator {<br>paths() {<br>this.destinationRoot();<br>// returns ‘~/projects’</p><pre><code>this.destinationPath(&apos;index.js&apos;);
// returns &apos;~/projects/index.js&apos;
</code></pre><p>}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">And you can manually set it using `this.destinationRoot(&apos;new/path&apos;)`. But for consistency, you probably shouldn’t change the default destination.</span><br><span class="line"></span><br><span class="line">If you want to know from where the user is running `yo`, then you can get the path with `this.contextRoot`. This is the raw path where `yo` was invoked from; before we determine the project root with `.yo-rc.json`.</span><br><span class="line"></span><br><span class="line">### Template context</span><br><span class="line"></span><br><span class="line">The template context is the folder in which you store your template files. It is usually the folder from which you’ll read and copy.</span><br><span class="line"></span><br><span class="line">The template context is defined as `./templates/` by default. You can overwrite this default by using `this.sourceRoot(&apos;new/template/path&apos;)`.</span><br><span class="line"></span><br><span class="line">You can get the path value using `this.sourceRoot()` or by joining a path using `this.templatePath(&apos;app/index.js&apos;)`.</span><br></pre></td></tr></table></figure><p></p><p>class extends Generator {<br>paths() {<br>this.sourceRoot();<br>// returns ‘./templates’</p><pre><code>this.templatePath(&apos;index.js&apos;);
// returns &apos;./templates/index.js&apos;
</code></pre><p>}<br>};<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## An “in memory” file system</span><br><span class="line"></span><br><span class="line">Yeoman is very careful when it comes to overwriting users files. Basically, every write happening on a pre-existing file will go through a conflict resolution process. This process requires that the user validate every file write that overwrites content to its file.</span><br><span class="line"></span><br><span class="line">This behaviour prevents bad surprises and limits the risk of errors. On the other hand, this means every file is written asynchronously to the disk.</span><br><span class="line"></span><br><span class="line">As asynchronous APIs are harder to use, Yeoman provide a synchronous file-system API where every file gets written to an [in-memory file system](https://github.com/sboudrias/mem-fs) and are only written to disk once when Yeoman is done running.</span><br><span class="line"></span><br><span class="line">This memory file system is shared between all [composed generators](https://yeoman.io/authoring/composability.html).</span><br><span class="line"></span><br><span class="line">## File utilities</span><br><span class="line"></span><br><span class="line">Generators expose all file methods on `this.fs`, which is an instance of [mem-fs editor](https://github.com/sboudrias/mem-fs-editor) - make sure to check the [module documentation](https://github.com/sboudrias/mem-fs-editor) for all available methods.</span><br><span class="line"></span><br><span class="line">It is worth noting that although `this.fs` exposes `commit`, you should not call it in your generator. Yeoman calls this internally after the conflicts stage of the run loop.</span><br><span class="line"></span><br><span class="line">### Example: Copying a template file</span><br><span class="line"></span><br><span class="line">Here’s an example where we’d want to copy and process a template file.</span><br><span class="line"></span><br><span class="line">Given the content of `./templates/index.html` is:</span><br></pre></td></tr></table></figure><p></p><p></p><html><br><head><meta name="generator" content="Hexo 3.8.0"><br><title>&lt;%= title %&gt;</title><br></head><br></html><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">We’ll then use the [`copyTpl`](https://github.com/sboudrias/mem-fs-editor#copytplfrom-to-context-templateoptions--copyoptions) method to copy the file while processing the content as a template. `copyTpl` is using [ejs template syntax](http://ejs.co/).</span><br></pre></td></tr></table></figure><p></p><p>class extends Generator {<br>writing() {<br>this.fs.copyTpl(<br>this.templatePath(‘index.html’),<br>this.destinationPath(‘public/index.html’),<br>{ title: ‘Templating with Yeoman’ }<br>);<br>}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Once the generator is done running, `public/index.html` will contain:</span><br></pre></td></tr></table></figure><p></p><p></p><html><br><head><meta name="generator" content="Hexo 3.8.0"><br><title>Templating with Yeoman</title><br></head><br></html><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">A very common scenario is to store user answers at the [prompting stage](https://yeoman.io/authoring/user-interactions.html) and use them for templating:</span><br></pre></td></tr></table></figure><p></p><p>class extends Generator {<br>async prompting() {<br>this.answers = await this.prompt([{<br>type : ‘input’,<br>name : ‘title’,<br>message : ‘Your project title’,<br>}]);<br>}</p><p>writing() {<br>this.fs.copyTpl(<br>this.templatePath(‘index.html’),<br>this.destinationPath(‘public/index.html’),<br>{ title: this.answers.title } // user answer <code>title</code> used<br>);<br>}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Transform output files through streams</span><br><span class="line"></span><br><span class="line">The generator system allows you to apply custom filters on every file writes. Automatically beautifying files, normalizing whitespace, etc, is totally possible.</span><br><span class="line"></span><br><span class="line">Once per Yeoman process, we will write every modified file to disk. This process is passed through a [vinyl](https://github.com/wearefractal/vinyl) object stream (just like [gulp](http://gulpjs.com/)). Any generator author can register a `transformStream` to modify the file path and/or the content.</span><br><span class="line"></span><br><span class="line">Registering a new modifier is done through the `registerTransformStream()` method. Here’s an example:</span><br></pre></td></tr></table></figure><p></p><p>var beautify = require(“gulp-beautify”);<br>this.registerTransformStream(beautify({ indent_size: 2 }));<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Note that **every file of any type will be passed through this stream**. Make sure any transform stream will passthrough the files it doesn’t support. Tools like [gulp-if](https://github.com/robrich/gulp-if) or [gulp-filter](https://github.com/sindresorhus/gulp-filter) will help filter invalid types and pass them through.</span><br><span class="line"></span><br><span class="line">You can basically use any *gulp* plugins with the Yeoman transform stream to process generated files during the writing phase.</span><br><span class="line"></span><br><span class="line">## Tip: Update existing file’s content</span><br><span class="line"></span><br><span class="line">Updating a pre-existing file is not always a simple task. The most reliable way to do so is to parse the file AST ([abstract syntax tree](http://en.wikipedia.org/wiki/Abstract_syntax_tree)) and edit it. The main issue with this solution is that editing an AST can be verbose and a bit hard to grasp.</span><br><span class="line"></span><br><span class="line">Some popular AST parsers are:</span><br><span class="line"></span><br><span class="line">- [Cheerio](https://github.com/cheeriojs/cheerio) for parsing HTML.</span><br><span class="line">- [Esprima](https://github.com/ariya/esprima) for parsing JavaScript - you might be interested in [AST-Query](https://github.com/SBoudrias/ast-query) which provide a lower level API to edit Esprima syntax tree.</span><br><span class="line">- For JSON files, you can use the native [`JSON` object methods](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON).</span><br><span class="line">- [Gruntfile Editor](https://github.com/SBoudrias/gruntfile-editor) to dynamically modify a Gruntfile.</span><br><span class="line"></span><br><span class="line">Parsing a code file with RegEx is a perilous path, and before doing so, you should read [this CS anthropological answers](http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags#answer-1732454) and grasp the flaws of RegEx parsing. If you do choose to edit existing files using RegEx rather than AST tree, please be careful and provide complete unit tests. - Please please, don’t break your users’ code.</span><br><span class="line"></span><br><span class="line">## Storing user configs</span><br><span class="line"></span><br><span class="line">Storing user configuration options and sharing them between sub-generators is a common task. For example, it is common to share preferences like the language (does the user use CoffeeScript?), style options (indenting with spaces or tabs), etc.</span><br><span class="line"></span><br><span class="line">These configurations can be stored in the `.yo-rc.json` file through the [Yeoman Storage API](https://yeoman.github.io/generator/Storage.html). This API is accessible through the `generator.config` object.</span><br><span class="line"></span><br><span class="line">Here are some common methods you’ll use.</span><br><span class="line"></span><br><span class="line">## Methods</span><br><span class="line"></span><br><span class="line">### `this.config.save()`</span><br><span class="line"></span><br><span class="line">This method will write the configuration to the `.yo-rc.json` file. If the file doesn’t exist yet, the `save` method will create it.</span><br><span class="line"></span><br><span class="line">The `.yo-rc.json` file also determines the root of a project. Because of that, even if you’re not using storage for anything, it is considered to be a best practice to always call `save` inside your `:app` generator.</span><br><span class="line"></span><br><span class="line">Also note that the `save` method is called automatically each time you `set` a configuration option. So you usually won’t need to call it explicitly.</span><br><span class="line"></span><br><span class="line">### `this.config.set()`</span><br><span class="line"></span><br><span class="line">`set` either takes a key and an associated value, or an object hash of multiple keys/values.</span><br><span class="line"></span><br><span class="line">Note that values must be JSON serializable (String, Number or non-recursive objects).</span><br><span class="line"></span><br><span class="line">### `this.config.get()`</span><br><span class="line"></span><br><span class="line">`get` takes a `String` key as parameter and returns the associated value.</span><br><span class="line"></span><br><span class="line">### `this.config.getAll()`</span><br><span class="line"></span><br><span class="line">Returns an object of the full available configuration.</span><br><span class="line"></span><br><span class="line">The returned object is passed by value, not reference. This means you still need to use the `set` method to update the configuration store.</span><br><span class="line"></span><br><span class="line">### `this.config.delete()`</span><br><span class="line"></span><br><span class="line">Deletes a key.</span><br><span class="line"></span><br><span class="line">### `this.config.defaults()`</span><br><span class="line"></span><br><span class="line">Accepts a hash of options to use as defaults values. If a key/value pair already exist, the value will remain untouched. If a key is missing, it will be added.</span><br><span class="line"></span><br><span class="line">## `.yo-rc.json` structure</span><br><span class="line"></span><br><span class="line">The `.yo-rc.json` file is a JSON file where configuration objects from multiple generators are stored. Each generator configuration is namespaced to ensure no naming conflicts occur between generators.</span><br><span class="line"></span><br><span class="line">This also means each generator configuration is sandboxed and can only be shared between sub-generators. You cannot share configurations between different generators using the storage API. Use options and arguments during invocation to share data between different generators.</span><br><span class="line"></span><br><span class="line">Here’s what a `.yo-rc.json` file looks like internally:</span><br></pre></td></tr></table></figure><p></p><p>{<br>“generator-backbone”: {<br>“requirejs”: true,<br>“coffee”: true<br>},<br>“generator-gruntfile”: {<br>“compass”: false<br>}<br>}<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The structure is pretty comprehensive for your end user. This means, you may wish to store advanced configurations inside this file and ask advanced users to edit the file directly when it doesn’t make sense to use prompts for every option.</span><br><span class="line"></span><br><span class="line">## Unit testing</span><br><span class="line"></span><br><span class="line">Read on to learn more about the testing helpers Yeoman add to ease the pain of unit testing a generator.</span><br><span class="line"></span><br><span class="line">The examples below assume you use [Mocha](http://mochajs.org/) in BDD mode. The global concept should apply easily to your unit testing framework of choice.</span><br><span class="line"></span><br><span class="line">## Organizing your tests</span><br><span class="line"></span><br><span class="line">It is important to keep your tests simple and easily editable.</span><br><span class="line"></span><br><span class="line">Usually the best way to organize your tests is to separate each generator and sub-generator into its own `describe` block. Then, add a `describe` block for each option your generator accepts. And then, use an `it` block for each assertion (or related assertion).</span><br><span class="line"></span><br><span class="line">In code, you should end up with a structure similar to this:</span><br></pre></td></tr></table></figure><p></p><p>describe(‘backbone:app’, function () {<br>it(‘generates a project with require.js’, function () {<br>// assert the file exist<br>// assert the file uses AMD definition<br>});</p><p>it(‘generates a project with webpack’);<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Test helpers</span><br><span class="line"></span><br><span class="line">Yeoman provide test helpers methods. They’re contained inside the `yeoman-test` package.</span><br></pre></td></tr></table></figure><p></p><p>var helpers = require(‘yeoman-test’);<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can check [the full helpers API here](https://github.com/yeoman/yeoman-test).</span><br><span class="line"></span><br><span class="line">The most useful method when unit testing a generator is `helpers.run()`. This method will return a [RunContext](https://github.com/yeoman/yeoman-test/blob/master/lib/run-context.js) instance on which you can call method to setup a directory, mock prompt, mock arguments, etc.</span><br></pre></td></tr></table></figure><p></p><p>var path = require(‘path’);</p><p>it(‘generate a project’, function () {<br>// The object returned acts like a promise, so return it to wait until the process is done<br>return helpers.run(path.join(__dirname, ‘../app’))<br>.withOptions({ foo: ‘bar’ }) // Mock options passed in<br>.withArguments([‘name-x’]) // Mock the arguments<br>.withPrompts({ coffee: false }) // Mock the prompt answers<br>.withLocalConfig({ lang: ‘en’ }) // Mock the local config<br>.then(function() {<br>// assert something about the generator<br>});<br>})<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Sometimes you may want to construct a test scenario for the generator to run with existing contents in the target directory. In which case, you could invoke `inTmpDir()` with a callback function, like so:</span><br></pre></td></tr></table></figure><p></p><p>var path = require(‘path’);<br>var fs = require(‘fs-extra’);</p><p>helpers.run(path.join(<strong>dirname, ‘../app’))<br>.inTmpDir(function (dir) {<br>// <code>dir</code> is the path to the new temporary directory<br>fs.copySync(path.join(</strong>dirname, ‘../templates/common’), dir)<br>})<br>.withPrompts({ coffee: false })<br>.then(function () {<br>assert.file(‘common/file.txt’);<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can also perform asynchronous task in your callback:</span><br></pre></td></tr></table></figure><p></p><p>var path = require(‘path’);<br>var fs = require(‘fs-extra’);</p><p>helpers.run(path.join(<strong>dirname, ‘../app’))<br>.inTmpDir(function (dir) {<br>var done = this.async(); // <code>this</code> is the RunContext object.<br>fs.copy(path.join(</strong>dirname, ‘../templates/common’), dir, done);<br>})<br>.withPrompts({ coffee: false });<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The run Promise will resolve with the directory that the generator was run in. This can be useful if you want to use a temporary directory that the generator was run in:</span><br></pre></td></tr></table></figure><p></p><p>helpers.run(path.join(<strong>dirname, ‘../app’))<br>.inTmpDir(function (dir) {<br>var done = this.async(); // <code>this</code> is the RunContext object.<br>fs.copy(path.join(</strong>dirname, ‘../templates/common’), dir, done);<br>})<br>.withPrompts({ coffee: false })<br>.then(function (dir) {<br>// assert something about the stuff in <code>dir</code><br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">If your generator calls `composeWith()`, you may want to mock those dependent generators. Using `#withGenerators()`, pass in array of arrays that use `#createDummyGenerator()` as the first item and a namespace for the mocked generator as a second item:</span><br></pre></td></tr></table></figure><p></p><p>var deps = [<br>[helpers.createDummyGenerator(), ‘karma:app’]<br>];<br>return helpers.run(path.join(__dirname, ‘../app’)).withGenerators(deps);<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">If you hate promises, you can use the `&apos;ready&apos;`, `&apos;error&apos;`, and `&apos;end&apos;` Events emitted:</span><br></pre></td></tr></table></figure><p></p><p>helpers.run(path.join(__dirname, ‘../app’))<br>.on(‘error’, function (error) {<br>console.log(‘Oh Noes!’, error);<br>})<br>.on(‘ready’, function (generator) {<br>// This is called right before <code>generator.run()</code> is called<br>})<br>.on(‘end’, done);<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can also run a generator importing it as a module. This is usefull if the source code of your generator is transpiled.</span><br><span class="line"></span><br><span class="line">You will need to provide the following settings to `run`:</span><br><span class="line"></span><br><span class="line">- `resolved`: Path to the generator, e.g. `../src/app/index.js`</span><br><span class="line">- `namespace`: Namespace of the generator, e.g. `mygenerator:app`</span><br></pre></td></tr></table></figure><p></p><p>var MyGenerator = require(‘../src/app’);</p><p>helpers.run(MyGenerator, {<br>resolved: require.resolve(__dirname, ‘../src/app/index.js’),<br>namespace: ‘mygenerator:app’<br>});<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Assertions helpers</span><br><span class="line"></span><br><span class="line">Yeoman extends the [native assert module](https://nodejs.org/api/assert.html) with generator related assertions helpers. You can see the full list of assertions helpers on the [`yeoman-assert` repository](https://github.com/yeoman/yeoman-assert).</span><br><span class="line"></span><br><span class="line">Require the assertion helpers:</span><br></pre></td></tr></table></figure><p></p><p>var assert = require(‘yeoman-assert’);<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Assert files exists</span><br></pre></td></tr></table></figure><p></p><p>assert.file([‘Gruntfile.js’, ‘app/router.js’, ‘app/views/main.js’]);<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`assert.noFile()` assert the contrary.</span><br><span class="line"></span><br><span class="line">### Assert a file content</span><br></pre></td></tr></table></figure><p></p><p>assert.fileContent(‘controllers/user.js’, /App.UserController = Ember.ObjectController.extend/);<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`assert.noFileContent()` assert the contrary.</span><br><span class="line"></span><br><span class="line">## Debuging generators</span><br><span class="line"></span><br><span class="line">To debug a generator, you can pass Node.js debug flags by running it like this:</span><br></pre></td></tr></table></figure><p></p><h1 id="OS-X-Linux-Windows"><a href="#OS-X-Linux-Windows" class="headerlink" title="OS X / Linux / Windows"></a>OS X / Linux / Windows</h1><p>npx –node-arg=–inspect yo<generator>[arguments]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can then debug your generator using the Chrome Devtools or your preferred IDE. See [Node Debugging Guide](https://nodejs.org/en/docs/inspector/) for more info.</span><br><span class="line"></span><br><span class="line">Yeoman generators also provide a debug mode to log relevant lifecycle information. You can activate it by setting the `DEBUG` environment variable to the desired scope (the scope of the generator system is `yeoman:generator`).</span><br></pre></td></tr></table></figure></generator></p><h1 id="OS-X-Linux"><a href="#OS-X-Linux" class="headerlink" title="OS X / Linux"></a>OS X / Linux</h1><p>DEBUG=yeoman:generator</p><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>set DEBUG=yeoman:generator<br><code>`</code></p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/Yeoman/" title="Yeoman" target="_blank" rel="external">https://molly2molly.github.io/Yeoman/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/Babel/" title="Babel"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/FreeOnlineProgrammingCSCourses/" title="FreeOnlineProgrammingCSCourses"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html>