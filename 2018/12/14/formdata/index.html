<!-- build time:Fri Dec 14 2018 11:42:49 GMT+0800 (CST) --><!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>FormData 与 Blob | Hexo</title><meta name="description" content="FormData对象用以将数据编译成键值对，以便用XMLHttpRequest来发送数据。如果表单 enctype 设置为 multipart/form-data , 则会使用表单的 submit() 方法来发送数据。var formData = new FormData();  formData.append(&amp;quot;username&amp;quot;,&amp;quot;Zhang Yingzi&amp;quo"><meta property="og:type" content="article"><meta property="og:title" content="FormData 与 Blob"><meta property="og:url" content="https://molly2molly.github.io/2018/12/14/formdata/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="FormData对象用以将数据编译成键值对，以便用XMLHttpRequest来发送数据。如果表单 enctype 设置为 multipart/form-data , 则会使用表单的 submit() 方法来发送数据。var formData = new FormData();  formData.append(&amp;quot;username&amp;quot;,&amp;quot;Zhang Yingzi&amp;quo"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2018-12-14T02:11:54.459Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="FormData 与 Blob"><meta name="twitter:description" content="FormData对象用以将数据编译成键值对，以便用XMLHttpRequest来发送数据。如果表单 enctype 设置为 multipart/form-data , 则会使用表单的 submit() 方法来发送数据。var formData = new FormData();  formData.append(&amp;quot;username&amp;quot;,&amp;quot;Zhang Yingzi&amp;quo"><link rel="canonical" href="https://molly2molly.github.io/2018/12/14/formdata/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html5/">html5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据可视化/">数据可视化</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/d3/">d3</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/d3/" style="font-size:13px">d3</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/javascript/">javascript</a></p><p class="item-title"><a href="/2018/12/14/XMLHttpRequest详解/" class="title">XMLHttpRequest详解</a></p><p class="item-date"><time datetime="2018-12-14T02:15:43.000Z" itemprop="datePublished">2018-12-14</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/html5/">html5</a></p><p class="item-title"><a href="/2018/12/14/formdata/" class="title">FormData 与 Blob</a></p><p class="item-date"><time datetime="2018-12-13T16:00:00.000Z" itemprop="datePublished">2018-12-14</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/11/15/hello-world/" class="title">Hexo 操作手册</a></p><p class="item-date"><time datetime="2018-11-15T07:47:13.752Z" itemprop="datePublished">2018-11-15</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/数据可视化/">数据可视化</a></p><p class="item-title"><a href="/2018/05/10/D3.js阅读笔记/" class="title">D3.js阅读笔记</a></p><p class="item-date"><time datetime="2018-05-09T23:48:49.000Z" itemprop="datePublished">2018-05-10</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/D3-js/">D3.js</a></p><p class="item-title"><a href="/2018/05/09/d3-js/" class="title">d3.js</a></p><p class="item-date"><time datetime="2018-05-09T01:20:29.000Z" itemprop="datePublished">2018-05-09</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-formdata" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">FormData 与 Blob</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2018/12/14/formdata/" class="article-date"><time datetime="2018-12-13T16:00:00.000Z" itemprop="datePublished">2018-12-14</time></a></span> <span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/html5/">html5</a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2018/12/14/formdata/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p>FormData对象用以将数据编译成键值对，以便用XMLHttpRequest来发送数据。</p><p>如果表单 enctype 设置为 multipart/form-data , 则会使用表单的 submit() 方法来发送数据。</p><pre><code>var formData = new FormData();

formData.append(&quot;username&quot;,&quot;Zhang Yingzi&quot;);
formData.append(&quot;account&quot;,123456); // 会被转化成字符串

formData.append(&quot;userfile&quot;, fileInputElement,files[0]);

var content = &quot;&lt;div&gt;Hey Guys!&lt;/div&gt;&quot;;
var blob = new Blob([content],{type:&quot;text/html&quot;});
formData.append(&quot;webfile&quot;, blob);

var request = new XMLHttpRequest();
request.open(&quot;POST&quot;, &quot;http://sample.com/action.php&quot;);
request.send(formData);
</code></pre><p>####通过HTML表单创建FormData对象</p><pre><code>var formData = new FormData(someFormElement);
</code></pre><p>####使用FormData对象上传文件</p><pre><code>&lt;form enctype=&quot;multipart/form-data&quot; method=&quot;post&quot; name=&quot;fileinfo&quot;&gt;
  &lt;label&gt;Your email address:&lt;/label&gt;
  &lt;input type=&quot;email&quot; autocomplete=&quot;on&quot; autofocus name=&quot;userid&quot; placeholder=&quot;email&quot; required size=&quot;32&quot; maxlength=&quot;64&quot; /&gt;&lt;br /&gt;
  &lt;label&gt;Custom file label:&lt;/label&gt;
  &lt;input type=&quot;text&quot; name=&quot;filelabel&quot; size=&quot;12&quot; maxlength=&quot;32&quot; /&gt;&lt;br /&gt;
  &lt;label&gt;File to stash:&lt;/label&gt;
  &lt;input type=&quot;file&quot; name=&quot;file&quot; required /&gt;
  &lt;input type=&quot;submit&quot; value=&quot;Stash the file!&quot; /&gt;
&lt;/form&gt;
&lt;div&gt;&lt;/div&gt;

var form = document.forms.namedItem(&quot;fileinfo&quot;);
form.addEventListener(&apos;submit&apos;, function(ev) {

  var oOutput = document.querySelector(&quot;div&quot;),
      oData = new FormData(form);

  oData.append(&quot;CustomField&quot;, &quot;This is some extra data&quot;);

  var oReq = new XMLHttpRequest();
  oReq.open(&quot;POST&quot;, &quot;stash.php&quot;, true);
  oReq.onload = function(oEvent) {
    if (oReq.status == 200) {
      oOutput.innerHTML = &quot;Uploaded!&quot;;
    } else {
      oOutput.innerHTML = &quot;Error &quot; + oReq.status + &quot; occurred when trying to upload your file.&lt;br \/&gt;&quot;;
    }
  };

  oReq.send(oData);
  ev.preventDefault();
}, false);
</code></pre><p>你还可以直接向FormData对象附加File或Blob类型的文件，如下所示：</p><pre><code>data.append(&quot;myfile&quot;, myBlob, &quot;filename.txt&quot;);
</code></pre><p>使用append()方法时，可以通过第三个可选参数设置发送请求的头 Content-Disposition 指定文件名。如果不指定文件名（或者不支持该参数时），将使用名字“blob”。</p><p>如果你设置正确的配置项，你也可以通过jQuery来使用FormData对象：</p><pre><code>var fd = new FormData(document.querySelector(&quot;form&quot;));
fd.append(&quot;CustomField&quot;, &quot;This is some extra data&quot;);
$.ajax({
  url: &quot;stash.php&quot;,
  type: &quot;POST&quot;,
  data: fd,
  processData: false,  // 不处理数据
  contentType: false   // 不设置内容类型
});
</code></pre><p>使用 FormData api 虽然是最简单和最快速的上传表单和文件的方法，但它的缺点也很明显，就是它不能被字符串化。</p><p>不使用FormData api 的情况下，可以通过使用FileReader api来使用ajax上传。</p><p>一个form有4种发送方式:</p><pre><code>1.method = POST , enctype = application/x-www-form-urlencoded (default);

2.method = POST , enctype = text/plain;

3.method = POST , enctype = multipart/form-data;

4.method = GET , enctype 标签将会被忽略
</code></pre><p>假设一个form有2个字段 foo 和 baz.</p><p>第一种发送方式：</p><pre><code>Content-Type: application/x-www-form-urlencoded

foo=bar&amp;baz=The+first+line.%0D%0AThe+second+line.%0D%0A
Method: POST; Encoding type: text/plain:
</code></pre><p>第二种发送方式：</p><pre><code>Content-Type: text/plain

foo=bar
baz=The first line.
The second line.
</code></pre><p>第三种发送方式</p><pre><code>Content-Type: multipart/form-data; boundary=---------------------------314911788813839

-----------------------------314911788813839
Content-Disposition: form-data; name=&quot;foo&quot;

bar
-----------------------------314911788813839
Content-Disposition: form-data; name=&quot;baz&quot;

The first line.
The second line.

-----------------------------314911788813839--
</code></pre><p>第四种发送方式会把下面的字段添加到url尾部</p><pre><code>?foo=bar&amp;baz=The%20first%20line.%0AThe%20second%20line.
</code></pre><p>使用 pure ajax 的一个小示例框架</p><pre><code>&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
&lt;title&gt;Sending forms with pure AJAX &amp;ndash; MDN&lt;/title&gt;
&lt;script type=&quot;text/javascript&quot;&gt;

&quot;use strict&quot;;

/*\
|*|
|*|  :: XMLHttpRequest.prototype.sendAsBinary() Polyfill ::
|*|
|*|  https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#sendAsBinary()
\*/

if (!XMLHttpRequest.prototype.sendAsBinary) {
  XMLHttpRequest.prototype.sendAsBinary = function(sData) {
    var nBytes = sData.length, ui8Data = new Uint8Array(nBytes);
    for (var nIdx = 0; nIdx &lt; nBytes; nIdx++) {
      ui8Data[nIdx] = sData.charCodeAt(nIdx) &amp; 0xff;
    }
    /* send as ArrayBufferView...: */
    this.send(ui8Data);
    /* ...or as ArrayBuffer (legacy)...: this.send(ui8Data.buffer); */
  };
}

/*\
|*|
|*|  :: AJAX Form Submit Framework ::
|*|
|*|  https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest
|*|
|*|  This framework is released under the GNU Public License, version 3 or later.
|*|  https://www.gnu.org/licenses/gpl-3.0-standalone.html
|*|
|*|  Syntax:
|*|
|*|   AJAXSubmit(HTMLFormElement);
\*/

var AJAXSubmit = (function () {

  function ajaxSuccess () {
    /* console.log(&quot;AJAXSubmit - Success!&quot;); */
    console.log(this.responseText);
    /* you can get the serialized data through the &quot;submittedData&quot; custom property: */
    /* console.log(JSON.stringify(this.submittedData)); */
  }

  function submitData (oData) {
    /* the AJAX request... */
    var oAjaxReq = new XMLHttpRequest();
    oAjaxReq.submittedData = oData;
    oAjaxReq.onload = ajaxSuccess;
    if (oData.technique === 0) {
      /* method is GET */
      oAjaxReq.open(&quot;get&quot;, oData.receiver.replace(/(?:\?.*)?$/,
          oData.segments.length &gt; 0 ? &quot;?&quot; + oData.segments.join(&quot;&amp;&quot;) : &quot;&quot;), true);
      oAjaxReq.send(null);
    } else {
      /* method is POST */
      oAjaxReq.open(&quot;post&quot;, oData.receiver, true);
      if (oData.technique === 3) {
        /* enctype is multipart/form-data */
        var sBoundary = &quot;---------------------------&quot; + Date.now().toString(16);
        oAjaxReq.setRequestHeader(&quot;Content-Type&quot;, &quot;multipart\/form-data; boundary=&quot; + sBoundary);
        oAjaxReq.sendAsBinary(&quot;--&quot; + sBoundary + &quot;\r\n&quot; +
            oData.segments.join(&quot;--&quot; + sBoundary + &quot;\r\n&quot;) + &quot;--&quot; + sBoundary + &quot;--\r\n&quot;);
      } else {
        /* enctype is application/x-www-form-urlencoded or text/plain */
        oAjaxReq.setRequestHeader(&quot;Content-Type&quot;, oData.contentType);
        oAjaxReq.send(oData.segments.join(oData.technique === 2 ? &quot;\r\n&quot; : &quot;&amp;&quot;));
      }
    }
  }

  function processStatus (oData) {
    if (oData.status &gt; 0) { return; }
    /* the form is now totally serialized! do something before sending it to the server... */
    /* doSomething(oData); */
    /* console.log(&quot;AJAXSubmit - The form is now serialized. Submitting...&quot;); */
    submitData (oData);
  }

  function pushSegment (oFREvt) {
    this.owner.segments[this.segmentIdx] += oFREvt.target.result + &quot;\r\n&quot;;
    this.owner.status--;
    processStatus(this.owner);
  }

  function plainEscape (sText) {
    /* How should I treat a text/plain form encoding?
       What characters are not allowed? this is what I suppose...: */
    /* &quot;4\3\7 - Einstein said E=mc2&quot; ----&gt; &quot;4\\3\\7\ -\ Einstein\ said\ E\=mc2&quot; */
    return sText.replace(/[\s\=\\]/g, &quot;\\$&amp;&quot;);
  }

  function SubmitRequest (oTarget) {
    var nFile, sFieldType, oField, oSegmReq, oFile, bIsPost = oTarget.method.toLowerCase() === &quot;post&quot;;
    /* console.log(&quot;AJAXSubmit - Serializing form...&quot;); */
    this.contentType = bIsPost &amp;&amp; oTarget.enctype ? oTarget.enctype : &quot;application\/x-www-form-urlencoded&quot;;
    this.technique = bIsPost ?
        this.contentType === &quot;multipart\/form-data&quot; ? 3 : this.contentType === &quot;text\/plain&quot; ? 2 : 1 : 0;
    this.receiver = oTarget.action;
    this.status = 0;
    this.segments = [];
    var fFilter = this.technique === 2 ? plainEscape : escape;
    for (var nItem = 0; nItem &lt; oTarget.elements.length; nItem++) {
      oField = oTarget.elements[nItem];
      if (!oField.hasAttribute(&quot;name&quot;)) { continue; }
      sFieldType = oField.nodeName.toUpperCase() === &quot;INPUT&quot; ? oField.getAttribute(&quot;type&quot;).toUpperCase() : &quot;TEXT&quot;;
      if (sFieldType === &quot;FILE&quot; &amp;&amp; oField.files.length &gt; 0) {
        if (this.technique === 3) {
          /* enctype is multipart/form-data */
          for (nFile = 0; nFile &lt; oField.files.length; nFile++) {
            oFile = oField.files[nFile];
            oSegmReq = new FileReader();
            /* (custom properties:) */
            oSegmReq.segmentIdx = this.segments.length;
            oSegmReq.owner = this;
            /* (end of custom properties) */
            oSegmReq.onload = pushSegment;
            this.segments.push(&quot;Content-Disposition: form-data; name=\&quot;&quot; +
                oField.name + &quot;\&quot;; filename=\&quot;&quot; + oFile.name +
                &quot;\&quot;\r\nContent-Type: &quot; + oFile.type + &quot;\r\n\r\n&quot;);
            this.status++;
            oSegmReq.readAsBinaryString(oFile);
          }
        } else {
          /* enctype is application/x-www-form-urlencoded or text/plain or
             method is GET: files will not be sent! */
          for (nFile = 0; nFile &lt; oField.files.length;
              this.segments.push(fFilter(oField.name) + &quot;=&quot; + fFilter(oField.files[nFile++].name)));
        }
      } else if ((sFieldType !== &quot;RADIO&quot; &amp;&amp; sFieldType !== &quot;CHECKBOX&quot;) || oField.checked) {
        /* NOTE: this will submit _all_ submit buttons. Detecting the correct one is non-trivial. */
        /* field type is not FILE or is FILE but is empty */
        this.segments.push(
          this.technique === 3 ? /* enctype is multipart/form-data */
            &quot;Content-Disposition: form-data; name=\&quot;&quot; + oField.name + &quot;\&quot;\r\n\r\n&quot; + oField.value + &quot;\r\n&quot;
          : /* enctype is application/x-www-form-urlencoded or text/plain or method is GET */
            fFilter(oField.name) + &quot;=&quot; + fFilter(oField.value)
        );
      }
    }
    processStatus(this);
  }

  return function (oFormElement) {
    if (!oFormElement.action) { return; }
    new SubmitRequest(oFormElement);
  };

})();

&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;Sending forms with pure AJAX&lt;/h1&gt;

&lt;h2&gt;Using the GET method&lt;/h2&gt;

&lt;form action=&quot;register.php&quot; method=&quot;get&quot; onsubmit=&quot;AJAXSubmit(this); return false;&quot;&gt;
  &lt;fieldset&gt;
    &lt;legend&gt;Registration example&lt;/legend&gt;
    &lt;p&gt;
      First name: &lt;input type=&quot;text&quot; name=&quot;firstname&quot; /&gt;&lt;br /&gt;
      Last name: &lt;input type=&quot;text&quot; name=&quot;lastname&quot; /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;
    &lt;/p&gt;
  &lt;/fieldset&gt;
&lt;/form&gt;

&lt;h2&gt;Using the POST method&lt;/h2&gt;
&lt;h3&gt;Enctype: application/x-www-form-urlencoded (default)&lt;/h3&gt;

&lt;form action=&quot;register.php&quot; method=&quot;post&quot; onsubmit=&quot;AJAXSubmit(this); return false;&quot;&gt;
  &lt;fieldset&gt;
    &lt;legend&gt;Registration example&lt;/legend&gt;
    &lt;p&gt;
      First name: &lt;input type=&quot;text&quot; name=&quot;firstname&quot; /&gt;&lt;br /&gt;
      Last name: &lt;input type=&quot;text&quot; name=&quot;lastname&quot; /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;
    &lt;/p&gt;
  &lt;/fieldset&gt;
&lt;/form&gt;

&lt;h3&gt;Enctype: text/plain&lt;/h3&gt;

&lt;form action=&quot;register.php&quot; method=&quot;post&quot; enctype=&quot;text/plain&quot;
    onsubmit=&quot;AJAXSubmit(this); return false;&quot;&gt;
  &lt;fieldset&gt;
    &lt;legend&gt;Registration example&lt;/legend&gt;
    &lt;p&gt;
      Your name: &lt;input type=&quot;text&quot; name=&quot;user&quot; /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      Your message:&lt;br /&gt;
      &lt;textarea name=&quot;message&quot; cols=&quot;40&quot; rows=&quot;8&quot;&gt;&lt;/textarea&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;
    &lt;/p&gt;
  &lt;/fieldset&gt;
&lt;/form&gt;

&lt;h3&gt;Enctype: multipart/form-data&lt;/h3&gt;

&lt;form action=&quot;register.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;
    onsubmit=&quot;AJAXSubmit(this); return false;&quot;&gt;
  &lt;fieldset&gt;
    &lt;legend&gt;Upload example&lt;/legend&gt;
    &lt;p&gt;
      First name: &lt;input type=&quot;text&quot; name=&quot;firstname&quot; /&gt;&lt;br /&gt;
      Last name: &lt;input type=&quot;text&quot; name=&quot;lastname&quot; /&gt;&lt;br /&gt;
      Sex:
      &lt;input id=&quot;sex_male&quot; type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;male&quot; /&gt;
      &lt;label for=&quot;sex_male&quot;&gt;Male&lt;/label&gt;
      &lt;input id=&quot;sex_female&quot; type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;female&quot; /&gt;
      &lt;label for=&quot;sex_female&quot;&gt;Female&lt;/label&gt;&lt;br /&gt;
      Password: &lt;input type=&quot;password&quot; name=&quot;secret&quot; /&gt;&lt;br /&gt;
      What do you prefer:
      &lt;select name=&quot;image_type&quot;&gt;
        &lt;option&gt;Books&lt;/option&gt;
        &lt;option&gt;Cinema&lt;/option&gt;
        &lt;option&gt;TV&lt;/option&gt;
      &lt;/select&gt;
    &lt;/p&gt;
    &lt;p&gt;
      Post your photos:
      &lt;input type=&quot;file&quot; multiple name=&quot;photos[]&quot;&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;input id=&quot;vehicle_bike&quot; type=&quot;checkbox&quot; name=&quot;vehicle[]&quot; value=&quot;Bike&quot; /&gt;
      &lt;label for=&quot;vehicle_bike&quot;&gt;I have a bike&lt;/label&gt;&lt;br /&gt;
      &lt;input id=&quot;vehicle_car&quot; type=&quot;checkbox&quot; name=&quot;vehicle[]&quot; value=&quot;Car&quot; /&gt;
      &lt;label for=&quot;vehicle_car&quot;&gt;I have a car&lt;/label&gt;
    &lt;/p&gt;
    &lt;p&gt;
      Describe yourself:&lt;br /&gt;
      &lt;textarea name=&quot;description&quot; cols=&quot;50&quot; rows=&quot;8&quot;&gt;&lt;/textarea&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;
    &lt;/p&gt;
  &lt;/fieldset&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>register.php</p><pre><code> &lt;?php
/* register.php */

header(&quot;Content-type: text/plain&quot;);

/*
NOTE: You should never use `print_r()` in production scripts, or
otherwise output client-submitted data without sanitizing it first.
Failing to sanitize can lead to cross-site scripting vulnerabilities.
*/

echo &quot;:: data received via GET ::\n\n&quot;;
print_r($_GET);

echo &quot;\n\n:: Data received via POST ::\n\n&quot;;
print_r($_POST);

echo &quot;\n\n:: Data received as \&quot;raw\&quot; (text/plain encoding) ::\n\n&quot;;
if (isset($HTTP_RAW_POST_DATA)) { echo $HTTP_RAW_POST_DATA; }

echo &quot;\n\n:: Files received ::\n\n&quot;;
print_r($_FILES);
</code></pre><p>调用方法：AJAXSubmit(myForm);</p><p>参考链接：</p><p>1.<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData/Using_FormData_Objects" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/FormData/Using_FormData_Objects</a><br>2.<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Submitting_forms_and_uploading_files" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Submitting_forms_and_uploading_files</a></p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/2018/12/14/formdata/" title="FormData 与 Blob" target="_blank" rel="external">https://molly2molly.github.io/2018/12/14/formdata/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2018/12/14/XMLHttpRequest详解/" title="XMLHttpRequest详解"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/2018/11/15/hello-world/" title="Hexo 操作手册"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(T){var n={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=n}(window)</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta="nick,mail,link";meta=meta.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html><!-- rebuild by neat -->