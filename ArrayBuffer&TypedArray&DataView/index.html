<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>ArrayBuffer | Hexo</title><meta name="description" content="ArrayBufferThe ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer.It is an array of bytes, often referred to in other languages as a “byte array”.You cannot directl"><meta property="og:type" content="article"><meta property="og:title" content="ArrayBuffer"><meta property="og:url" content="https://molly2molly.github.io/ArrayBuffer&TypedArray&DataView/index.html"><meta property="og:site_name" content="张英姿的博客"><meta property="og:description" content="ArrayBufferThe ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer.It is an array of bytes, often referred to in other languages as a “byte array”.You cannot directl"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2021-01-05T09:07:54.116Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ArrayBuffer"><meta name="twitter:description" content="ArrayBufferThe ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer.It is an array of bytes, often referred to in other languages as a “byte array”.You cannot directl"><link rel="canonical" href="https://molly2molly.github.io/ArrayBuffer&TypedArray&DataView/index.html"><link rel="alternate" href="/atom.xml" title="张英姿的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/molly2molly" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">张英姿</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">前端工程师</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 苏州, 中国</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech=""> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/D3-js/">D3.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-javascript/">es6 javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/React/" style="font-size:13px">React</a> <a href="/tags/TCP/" style="font-size:13px">TCP</a> <a href="/tags/Webpack/" style="font-size:13px">Webpack</a> <a href="/tags/es6-javascript/" style="font-size:13px">es6 javascript</a> <a href="/tags/javascript/" style="font-size:14px">javascript</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/数据结构/" style="font-size:14px">数据结构</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Babel/" class="title">Babel</a></p><p class="item-date"><time datetime="2021-03-26T07:05:01.000Z" itemprop="datePublished">2021-03-26</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Yeoman/" class="title">Yeoman</a></p><p class="item-date"><time datetime="2021-03-23T06:56:23.000Z" itemprop="datePublished">2021-03-23</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/FreeOnlineProgrammingCSCourses/" class="title">FreeOnlineProgrammingCSCourses</a></p><p class="item-date"><time datetime="2021-01-13T01:18:08.000Z" itemprop="datePublished">2021-01-13</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/Question/" class="title">Question</a></p><p class="item-date"><time datetime="2021-01-12T05:38:46.000Z" itemprop="datePublished">2021-01-12</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/URL/" class="title">URL</a></p><p class="item-date"><time datetime="2021-01-11T06:39:46.000Z" itemprop="datePublished">2021-01-11</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-ArrayBuffer&amp;TypedArray&amp;DataView" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">ArrayBuffer</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/ArrayBuffer&TypedArray&DataView/" class="article-date"><time datetime="2020-12-31T08:46:27.000Z" itemprop="datePublished">2020-12-31</time></a></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/ArrayBuffer&TypedArray&DataView/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h2 id="ArrayBuffer"><a href="#ArrayBuffer" class="headerlink" title="ArrayBuffer"></a>ArrayBuffer</h2><p>The <strong><code>ArrayBuffer</code></strong> object is used to represent a generic, fixed-length raw binary data buffer.</p><p>It is an array of bytes, often referred to in other languages as a “byte array”.You cannot directly manipulate the contents of an <code>ArrayBuffer</code>; instead, you create one of the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noopener">typed array objects</a> or a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noopener"><code>DataView</code></a> object which represents the buffer in a specific format, and use that to read and write the contents of the buffer.</p><p>The <code>ArrayBuffer()</code> constructor creates a new <code>ArrayBuffer</code> of the given length in bytes. You can also get an array buffer from existing data, for example <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#Appendix_to_Solution_1_Decode_a_Base64_string_to_Uint8Array_or_ArrayBuffer" target="_blank" rel="noopener">from a Base64 string</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsArrayBuffer" target="_blank" rel="noopener">from a local file</a>.</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># Constructor</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(byteLength)</span><br><span class="line"></span><br><span class="line"># Static properties</span><br><span class="line">get <span class="built_in">ArrayBuffer</span>[@@species]</span><br><span class="line"># The constructor function that is used to create derived objects.</span><br><span class="line"></span><br><span class="line"># Static methods</span><br><span class="line"><span class="built_in">ArrayBuffer</span>.isView(arg)</span><br><span class="line"># Returns true if arg is one of the ArrayBuffer views, such as typed array objects or a DataView. Returns false otherwise.</span><br><span class="line"></span><br><span class="line"># Instance properties</span><br><span class="line"><span class="built_in">ArrayBuffer</span>.prototype.byteLength</span><br><span class="line"># The read-only size, in bytes, of the ArrayBuffer. This is established when the array is constructed and cannot be changed.</span><br><span class="line"></span><br><span class="line"># Instance methods</span><br><span class="line"><span class="built_in">ArrayBuffer</span>.prototype.slice(begin[, end])</span><br><span class="line"># Returns a new ArrayBuffer whose contents are a copy of this ArrayBuffer's bytes from begin (inclusive) up to end (exclusive). If either begin or end is negative, it refers to an index from the end of the array, as opposed to from the beginning.</span><br><span class="line"># 允许将内存区域的一部分，拷贝生成一个新的ArrayBuffer对象</span><br><span class="line"># 除了slice方法，ArrayBuffer对象不提供任何直接读写内存的方法，只允许在其上方建立视图，然后通过视图读写。</span><br></pre></td></tr></table></figure><h3 id="Creating-an-ArrayBuffer"><a href="#Creating-an-ArrayBuffer" class="headerlink" title="Creating an ArrayBuffer"></a>Creating an ArrayBuffer</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buffer = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">8</span>);</span><br><span class="line"><span class="keyword">const</span> view = <span class="keyword">new</span> <span class="built_in">Int32Array</span>(buffer);</span><br></pre></td></tr></table></figure><h2 id="TypedArray"><a href="#TypedArray" class="headerlink" title="TypedArray"></a>TypedArray</h2><p>A <strong>TypedArray</strong> object describes an array-like view of an underlying <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noopener">binary data buffer</a>. There is no global property named <code>TypedArray</code>, nor is there a directly visible <code>TypedArray</code> constructor. Instead, there are a number of different global properties, whose values are typed array constructors for specific element types, listed below. On the following pages you will find common properties and methods that can be used with any typed array containing elements of any type.</p><h3 id="TypedArray-objects"><a href="#TypedArray-objects" class="headerlink" title="TypedArray objects"></a>TypedArray objects</h3><table><thead><tr><th style="text-align:left">Type</th><th style="text-align:left">Value Range</th><th style="text-align:left">Size in bytes</th><th style="text-align:left">Description</th><th style="text-align:left">Web IDL type</th><th style="text-align:left">Equivalent C type</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array" target="_blank" rel="noopener"><code>Int8Array</code></a></td><td style="text-align:left"><code>-128</code> to <code>127</code></td><td style="text-align:left">1</td><td style="text-align:left">8-bit two’s complement signed integer</td><td style="text-align:left"><code>byte</code></td><td style="text-align:left"><code>int8_t</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noopener"><code>Uint8Array</code></a></td><td style="text-align:left"><code>0</code> to <code>255</code></td><td style="text-align:left">1</td><td style="text-align:left">8-bit unsigned integer</td><td style="text-align:left"><code>octet</code></td><td style="text-align:left"><code>uint8_t</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray" target="_blank" rel="noopener"><code>Uint8ClampedArray</code></a></td><td style="text-align:left"><code>0</code> to <code>255</code></td><td style="text-align:left">1</td><td style="text-align:left">8-bit unsigned integer (clamped)</td><td style="text-align:left"><code>octet</code></td><td style="text-align:left"><code>uint8_t</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array" target="_blank" rel="noopener"><code>Int16Array</code></a></td><td style="text-align:left"><code>-32768</code> to <code>32767</code></td><td style="text-align:left">2</td><td style="text-align:left">16-bit two’s complement signed integer</td><td style="text-align:left"><code>short</code></td><td style="text-align:left"><code>int16_t</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array" target="_blank" rel="noopener"><code>Uint16Array</code></a></td><td style="text-align:left"><code>0</code> to <code>65535</code></td><td style="text-align:left">2</td><td style="text-align:left">16-bit unsigned integer</td><td style="text-align:left"><code>unsigned short</code></td><td style="text-align:left"><code>uint16_t</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array" target="_blank" rel="noopener"><code>Int32Array</code></a></td><td style="text-align:left"><code>-2147483648</code> to <code>2147483647</code></td><td style="text-align:left">4</td><td style="text-align:left">32-bit two’s complement signed integer</td><td style="text-align:left"><code>long</code></td><td style="text-align:left"><code>int32_t</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array" target="_blank" rel="noopener"><code>Uint32Array</code></a></td><td style="text-align:left"><code>0</code> to <code>4294967295</code></td><td style="text-align:left">4</td><td style="text-align:left">32-bit unsigned integer</td><td style="text-align:left"><code>unsigned long</code></td><td style="text-align:left"><code>uint32_t</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array" target="_blank" rel="noopener"><code>Float32Array</code></a></td><td style="text-align:left"><code>1.2</code>×10<sup>-38</sup> to <code>3.4</code>×10<sup>38</sup></td><td style="text-align:left">4</td><td style="text-align:left">32-bit IEEE floating point number (7 significant digits e.g., <code>1.234567</code>)</td><td style="text-align:left"><code>unrestricted float</code></td><td style="text-align:left"><code>float</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array" target="_blank" rel="noopener"><code>Float64Array</code></a></td><td style="text-align:left"><code>5.0</code>×10<sup>-324</sup> to <code>1.8</code>×10<sup>308</sup></td><td style="text-align:left">8</td><td style="text-align:left">64-bit IEEE floating point number (16 significant digits e.g., <code>1.23456789012345</code>)</td><td style="text-align:left"><code>unrestricted double</code></td><td style="text-align:left"><code>double</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array" target="_blank" rel="noopener"><code>BigInt64Array</code></a></td><td style="text-align:left">-2<sup>63</sup> to 2<sup>63</sup>-1</td><td style="text-align:left">8</td><td style="text-align:left">64-bit two’s complement signed integer</td><td style="text-align:left"><code>bigint</code></td><td style="text-align:left"><code>int64_t (signed long long)</code></td></tr><tr><td style="text-align:left"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array" target="_blank" rel="noopener"><code>BigUint64Array</code></a></td><td style="text-align:left"><code>0</code> to 2<sup>64</sup>-1</td><td style="text-align:left">8</td><td style="text-align:left">64-bit unsigned integer</td><td style="text-align:left"><code>bigint</code></td><td style="text-align:left"><code>uint64_t (unsigned long long)</code></td></tr></tbody></table><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"># Constructor</span><br><span class="line"># This object cannot be instantiated directly. Instead, you create an instance of an array of a particular type, such as a Int8Array or a BigInt64Array. These objects all have a common syntax for their constructors:</span><br><span class="line"><span class="keyword">new</span> TypedArray();</span><br><span class="line"><span class="keyword">new</span> TypedArray(length);</span><br><span class="line"><span class="keyword">new</span> TypedArray(typedArray);</span><br><span class="line"><span class="keyword">new</span> TypedArray(object); <span class="comment">// object = TypedArray.from()</span></span><br><span class="line"><span class="keyword">new</span> TypedArray(buffer [, byteOffset [, length]]);</span><br><span class="line"></span><br><span class="line"># Static properties</span><br><span class="line">TypedArray.BYTES_PER_ELEMENT</span><br><span class="line"># Returns a number value of the element size for the different TypedArray objects.</span><br><span class="line"></span><br><span class="line">TypedArray.name</span><br><span class="line"># Returns the string value of the constructor name (e.g, "Int8Array").</span><br><span class="line"></span><br><span class="line">get TypedArray[@@species]</span><br><span class="line"># The constructor function used to create derived objects.</span><br><span class="line"></span><br><span class="line">TypedArray.prototype</span><br><span class="line"># Prototype for TypedArray objects.</span><br><span class="line"></span><br><span class="line"># Static methods</span><br><span class="line">TypedArray.from()</span><br><span class="line"># Creates a new TypedArray from an array-like or iterable object. See also Array.from().</span><br><span class="line"></span><br><span class="line">TypedArray.of()</span><br><span class="line"># Creates a new TypedArray with a variable number of arguments. See also Array.of().</span><br><span class="line"></span><br><span class="line"># Instance properties</span><br><span class="line">TypedArray.prototype.buffer</span><br><span class="line"># Returns the ArrayBuffer referenced by the typed array. Fixed at construction time and thus read only.</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.byteLength</span><br><span class="line"># Returns the length (in bytes) of the typed array. Fixed at construction time and thus read only.</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.byteOffset</span><br><span class="line"># Returns the offset (in bytes) of the typed array from the start of its ArrayBuffer. Fixed at construction time and thus read only.</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.length</span><br><span class="line"># Returns the number of elements held in the typed array. Fixed at construction time and thus read only.</span><br><span class="line"></span><br><span class="line"># Instance methods</span><br><span class="line">TypedArray.prototype.copyWithin()</span><br><span class="line"># Copies a sequence of array elements within the array. See also Array.prototype.copyWithin().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.entries()</span><br><span class="line"># Returns a new array iterator object that contains the key/value pairs for each index in the array. See also Array.prototype.entries().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.every()</span><br><span class="line"># Tests whether all elements in the array pass the test provided by a function. See also Array.prototype.every().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.fill()</span><br><span class="line"># Fills all the elements of an array from a start index to an end index with a static value. See also Array.prototype.fill().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.filter()</span><br><span class="line"># Creates a new array with all of the elements of this array for which the provided filtering function returns true. See also Array.prototype.filter().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.find()</span><br><span class="line"># Returns the found value in the array, if an element in the array satisfies the provided testing function, or undefined if not found. See also Array.prototype.find().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.findIndex()</span><br><span class="line"># Returns the found index in the array, if an element in the array satisfies the provided testing function or -1 if not found. See also Array.prototype.findIndex().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.forEach()</span><br><span class="line"># Calls a function for each element in the array. See also Array.prototype.forEach().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.includes()</span><br><span class="line"># Determines whether a typed array includes a certain element, returning true or false as appropriate. See also Array.prototype.includes().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.indexOf()</span><br><span class="line"># Returns the first (least) index of an element within the array equal to the specified value, or -1 if none is found. See also Array.prototype.indexOf().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.join()</span><br><span class="line"># Joins all elements of an array into a string. See also Array.prototype.join().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.keys()</span><br><span class="line"># Returns a new array iterator that contains the keys for each index in the array. See also Array.prototype.keys().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.lastIndexOf()</span><br><span class="line"># Returns the last (greatest) index of an element within the array equal to the specified value, or -1 if none is found. See also Array.prototype.lastIndexOf().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.map()</span><br><span class="line"># Creates a new array with the results of calling a provided function on every element in this array. See also Array.prototype.map().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.reduce()</span><br><span class="line"># Apply a function against an accumulator and each value of the array (from left-to-right) as to reduce it to a single value. See also Array.prototype.reduce().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.reduceRight()</span><br><span class="line"># Apply a function against an accumulator and each value of the array (from right-to-left) as to reduce it to a single value. See also Array.prototype.reduceRight().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.reverse()</span><br><span class="line"># Reverses the order of the elements of an array — the first becomes the last, and the last becomes the first. See also Array.prototype.reverse().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.set()</span><br><span class="line"># Stores multiple values in the typed array, reading input values from a specified array.</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.slice()</span><br><span class="line"># Extracts a section of an array and returns a new array. See also Array.prototype.slice().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.some()</span><br><span class="line"># Returns true if at least one element in this array satisfies the provided testing function. See also Array.prototype.some().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.sort()</span><br><span class="line"># Sorts the elements of an array in place and returns the array. See also Array.prototype.sort().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.subarray()</span><br><span class="line"># Returns a new TypedArray from the given start and end element index.</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.values()</span><br><span class="line"># Returns a new array iterator object that contains the values for each index in the array. See also Array.prototype.values().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.toLocaleString()</span><br><span class="line"># Returns a localized string representing the array and its elements. See also Array.prototype.toLocaleString().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype.toString()</span><br><span class="line"># Returns a string representing the array and its elements. See also Array.prototype.toString().</span><br><span class="line"></span><br><span class="line">TypedArray.prototype[@@iterator]()</span><br><span class="line"># Returns a new array iterator object that contains the values for each index in the array.</span><br></pre></td></tr></table></figure><h3 id="TypedArray-数组没有concat方法。如果想要合并多个-TypedArray-数组，可以用下面这个函数"><a href="#TypedArray-数组没有concat方法。如果想要合并多个-TypedArray-数组，可以用下面这个函数" class="headerlink" title="TypedArray 数组没有concat方法。如果想要合并多个 TypedArray 数组，可以用下面这个函数"></a>TypedArray 数组没有concat方法。如果想要合并多个 TypedArray 数组，可以用下面这个函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenate</span>(<span class="params">resultConstructor, ...arrays</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> totalLength = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> arr <span class="keyword">of</span> arrays) &#123;</span><br><span class="line">    totalLength += arr.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">new</span> resultConstructor(totalLength);</span><br><span class="line">  <span class="keyword">let</span> offset = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> arr <span class="keyword">of</span> arrays) &#123;</span><br><span class="line">    result.set(arr, offset);</span><br><span class="line">    offset += arr.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concatenate(<span class="built_in">Uint8Array</span>, <span class="built_in">Uint8Array</span>.of(<span class="number">1</span>, <span class="number">2</span>), <span class="built_in">Uint8Array</span>.of(<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"><span class="comment">// Uint8Array [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TypedArray 数组与普通数组一样，部署了 Iterator 接口，所以可以被遍历。</span></span><br><span class="line"><span class="keyword">let</span> ui8 = <span class="built_in">Uint8Array</span>.of(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> byte <span class="keyword">of</span> ui8) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(byte);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h3 id="Property-access"><a href="#Property-access" class="headerlink" title="Property access"></a>Property access</h3><p>You can reference elements in the array using standard array index syntax (that is, using bracket notation). However, getting or setting indexed properties on typed arrays will not search in the prototype chain for this property, even when the indices are out of bound. Indexed properties will consult the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noopener"><code>ArrayBuffer</code></a> and will never look at object properties. You can still use named properties, just like with all objects.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dv = <span class="keyword">new</span> <span class="built_in">Int8Array</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setting and getting using standard array syntax</span></span><br><span class="line"><span class="keyword">var</span> int16 = <span class="keyword">new</span> <span class="built_in">Int16Array</span>(<span class="number">2</span>);</span><br><span class="line">int16[<span class="number">0</span>] = <span class="number">42</span>;</span><br><span class="line"><span class="built_in">console</span>.log(int16[<span class="number">0</span>]); <span class="comment">// 42</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Indexed properties on prototypes are not consulted (Fx 25)</span></span><br><span class="line"><span class="built_in">Int8Array</span>.prototype[<span class="number">20</span>] = <span class="string">'foo'</span>;</span><br><span class="line">(<span class="keyword">new</span> <span class="built_in">Int8Array</span>(<span class="number">32</span>))[<span class="number">20</span>]; <span class="comment">// 0</span></span><br><span class="line"><span class="comment">// even when out of bound</span></span><br><span class="line"><span class="built_in">Int8Array</span>.prototype[<span class="number">20</span>] = <span class="string">'foo'</span>;</span><br><span class="line">(<span class="keyword">new</span> <span class="built_in">Int8Array</span>(<span class="number">8</span>))[<span class="number">20</span>]; <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// or with negative integers</span></span><br><span class="line"><span class="built_in">Int8Array</span>.prototype[<span class="number">-1</span>] = <span class="string">'foo'</span>;</span><br><span class="line">(<span class="keyword">new</span> <span class="built_in">Int8Array</span>(<span class="number">8</span>))[<span class="number">-1</span>]; <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Named properties are allowed, though (Fx 30)</span></span><br><span class="line"><span class="built_in">Int8Array</span>.prototype.foo = <span class="string">'bar'</span>;</span><br><span class="line">(<span class="keyword">new</span> <span class="built_in">Int8Array</span>(<span class="number">32</span>)).foo; <span class="comment">// "bar"</span></span><br></pre></td></tr></table></figure><h2 id="DataView"><a href="#DataView" class="headerlink" title="DataView"></a>DataView</h2><p>The <strong><code>DataView</code></strong> view provides a low-level interface for reading and writing multiple number types in a binary <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noopener"><code>ArrayBuffer</code></a>, without having to care about the platform’s <a href="https://developer.mozilla.org/en-US/docs/Glossary/Endianness" target="_blank" rel="noopener">endianness</a>.</p><p>Multi-byte number formats are represented in memory differently depending on machine architecture — see <a href="https://developer.mozilla.org/en-US/docs/Glossary/Endianness" target="_blank" rel="noopener">Endianness</a> for an explanation. <code>DataView</code> accessors provide explicit control of how data is accessed, regardless of the executing computer’s endianness.</p><p>Because JavaScript does not currently include standard support for 64-bit integer values, <code>DataView</code> does not offer native 64-bit operations. As a workaround, you could implement your own <code>getUint64()</code> function to obtain a value with precision up to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" target="_blank" rel="noopener"><code>Number.MAX_SAFE_INTEGER</code></a>, which could suffice for certain cases.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUint64</span>(<span class="params">dataview, byteOffset, littleEndian</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// split 64-bit number into two 32-bit (4-byte) parts</span></span><br><span class="line">  <span class="keyword">const</span> left =  dataview.getUint32(byteOffset, littleEndian);</span><br><span class="line">  <span class="keyword">const</span> right = dataview.getUint32(byteOffset+<span class="number">4</span>, littleEndian);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// combine the two 32-bit values</span></span><br><span class="line">  <span class="keyword">const</span> combined = littleEndian? left + <span class="number">2</span>**<span class="number">32</span>*right : <span class="number">2</span>**<span class="number">32</span>*left + right;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Number</span>.isSafeInteger(combined))</span><br><span class="line">    <span class="built_in">console</span>.warn(combined, <span class="string">'exceeds MAX_SAFE_INTEGER. Precision may be lost'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> combined;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Alternatively, if you need full 64-bit range, you can create a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noopener"><code>BigInt</code></a>. Further, although native BigInts are much faster than user-land library equivalents, BigInts will always be much slower than 32-bit integers in JavaScript due to the nature of their variable size.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BigInt = <span class="built_in">window</span>.BigInt, bigThirtyTwo = BigInt(<span class="number">32</span>), bigZero = BigInt(<span class="number">0</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUint64BigInt</span>(<span class="params">dataview, byteOffset, littleEndian</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// split 64-bit number into two 32-bit (4-byte) parts</span></span><br><span class="line">  <span class="keyword">const</span> left = BigInt(dataview.getUint32(byteOffset|<span class="number">0</span>, !!littleEndian)&gt;&gt;&gt;<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> right = BigInt(dataview.getUint32((byteOffset|<span class="number">0</span>) + <span class="number">4</span>|<span class="number">0</span>, !!littleEndian)&gt;&gt;&gt;<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// combine the two 32-bit values and return</span></span><br><span class="line">  <span class="keyword">return</span> littleEndian ? (right&lt;&lt;bigThirtyTwo)|left : (left&lt;&lt;bigThirtyTwo)|right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"># Constructor</span><br><span class="line"><span class="built_in">DataView</span>()</span><br><span class="line"># Creates a new DataView object.</span><br><span class="line"></span><br><span class="line"># Instance properties</span><br><span class="line"><span class="built_in">DataView</span>.prototype.buffer</span><br><span class="line"># The ArrayBuffer referenced by this view. Fixed at construction time and thus read only.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.byteLength</span><br><span class="line"># The length (in bytes) of this view from the start of its ArrayBuffer. Fixed at construction time and thus read only.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.byteOffset</span><br><span class="line"># The offset (in bytes) of this view from the start of its ArrayBuffer. Fixed at construction time and thus read only.</span><br><span class="line"></span><br><span class="line"># Instance methods</span><br><span class="line"><span class="built_in">DataView</span>.prototype.getInt8()</span><br><span class="line"># Gets a signed 8-bit integer (byte) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getUint8()</span><br><span class="line"># Gets an unsigned 8-bit integer (unsigned byte) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getInt16()</span><br><span class="line"># Gets a signed 16-bit integer (short) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getUint16()</span><br><span class="line"># Gets an unsigned 16-bit integer (unsigned short) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getInt32()</span><br><span class="line"># Gets a signed 32-bit integer (long) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getUint32()</span><br><span class="line"># Gets an unsigned 32-bit integer (unsigned long) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getFloat32()</span><br><span class="line"># Gets a signed 32-bit float (float) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getFloat64()</span><br><span class="line"># Gets a signed 64-bit float (double) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getBigInt64()</span><br><span class="line"># Gets a signed 64-bit integer (long long) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.getBigUint64()</span><br><span class="line"># Gets an unsigned 64-bit integer (unsigned long long) at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setInt8()</span><br><span class="line"># Stores a signed 8-bit integer (byte) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setUint8()</span><br><span class="line"># Stores an unsigned 8-bit integer (unsigned byte) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setInt16()</span><br><span class="line"># Stores a signed 16-bit integer (short) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setUint16()</span><br><span class="line"># Stores an unsigned 16-bit integer (unsigned short) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setInt32()</span><br><span class="line"># Stores a signed 32-bit integer (long) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setUint32()</span><br><span class="line"># Stores an unsigned 32-bit integer (unsigned long) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setFloat32()</span><br><span class="line"># Stores a signed 32-bit float (float) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setFloat64()</span><br><span class="line"># Stores a signed 64-bit float (double) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setBigInt64()</span><br><span class="line"># Stores a signed 64-bit integer (long long) value at the specified byte offset from the start of the view.</span><br><span class="line"></span><br><span class="line"><span class="built_in">DataView</span>.prototype.setBigUint64()</span><br><span class="line"># Stores an unsigned 64-bit integer (unsigned long long) value at the specified byte offset from the start of the view.</span><br></pre></td></tr></table></figure><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">16</span>);</span><br><span class="line"><span class="keyword">var</span> view = <span class="keyword">new</span> <span class="built_in">DataView</span>(buffer, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">view.setInt16(<span class="number">1</span>, <span class="number">42</span>);</span><br><span class="line">view.getInt16(<span class="number">1</span>); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure><h3 id="Receiving-binary-data-using-JavaScript-typed-arrays"><a href="#Receiving-binary-data-using-JavaScript-typed-arrays" class="headerlink" title="Receiving binary data using JavaScript typed arrays"></a>Receiving binary data using JavaScript typed arrays</h3><p>The <code>responseType</code> property of the XMLHttpRequest object can be set to change the expected response type from the server. Possible values are the empty string (default), <code>&quot;arraybuffer&quot;</code>, <code>&quot;blob&quot;</code>, <code>&quot;document&quot;</code>, <code>&quot;json&quot;</code>, and <code>&quot;text&quot;</code>. The <code>response</code> property will contain the entity body according to <code>responseType</code>, as an <code>ArrayBuffer</code>, <code>Blob</code>, <code>Document</code>, <code>JSON</code>, or string. This is <code>null</code> if the request is not complete or was not successful.</p><p>This example reads an image as a binary file and creates an 8-bit unsigned integer array from the raw bytes. Note that this will not decode the image and read the pixels. You will need a <a href="https://github.com/devongovett/png.js/" target="_blank" rel="noopener">png decoding library</a> for that.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">oReq.open(<span class="string">"GET"</span>, <span class="string">"/myfile.png"</span>, <span class="literal">true</span>);</span><br><span class="line">oReq.responseType = <span class="string">"arraybuffer"</span>;</span><br><span class="line"></span><br><span class="line">oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params">oEvent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arrayBuffer = oReq.response; <span class="comment">// Note: not oReq.responseText</span></span><br><span class="line">  <span class="keyword">if</span> (arrayBuffer) &#123;</span><br><span class="line">    <span class="keyword">var</span> byteArray = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(arrayBuffer);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; byteArray.byteLength; i++) &#123;</span><br><span class="line">      <span class="comment">// do something with each byte in the array</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">oReq.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">oReq.open(<span class="string">"GET"</span>, <span class="string">"/myfile.png"</span>, <span class="literal">true</span>);</span><br><span class="line">oReq.responseType = <span class="string">"blob"</span>;</span><br><span class="line"></span><br><span class="line">oReq.onload = <span class="function"><span class="keyword">function</span>(<span class="params">oEvent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> blob = oReq.response;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">oReq.send();</span><br></pre></td></tr></table></figure><h3 id="Receiving-binary-data-in-older-browsers"><a href="#Receiving-binary-data-in-older-browsers" class="headerlink" title="Receiving binary data in older browsers"></a>Receiving binary data in older browsers</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">load_binary_resource</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  req.open(<span class="string">'GET'</span>, url, <span class="literal">false</span>);</span><br><span class="line">  <span class="comment">//XHR binary charset opt by Marcus Granado 2006 [http://mgran.blogspot.com]</span></span><br><span class="line">  req.overrideMimeType(<span class="string">'text\/plain; charset=x-user-defined'</span>);</span><br><span class="line">  req.send(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">if</span> (req.status != <span class="number">200</span>) <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">return</span> req.responseText;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> filestream = load_binary_resource(url);</span><br><span class="line"><span class="keyword">var</span> abyte = filestream.charCodeAt(x) &amp; <span class="number">0xff</span>; <span class="comment">// throw away high-order byte (f7)</span></span><br></pre></td></tr></table></figure><h3 id="Sending-binary-data"><a href="#Sending-binary-data" class="headerlink" title="Sending binary data"></a>Sending binary data</h3><p>The <code>send</code> method of the XMLHttpRequest has been extended to enable easy transmission of binary data by accepting an <a href="https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBuffer" target="_blank" rel="noopener"><code>ArrayBuffer</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" target="_blank" rel="noopener"><code>Blob</code></a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/API/File" target="_blank" rel="noopener"><code>File</code></a> object.</p><p>The following example creates a text file on-the-fly and uses the <code>POST</code> method to send the “file” to the server. This example uses plain text, but you can imagine the data being a binary file instead.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">oReq.open(<span class="string">"POST"</span>, url, <span class="literal">true</span>);</span><br><span class="line">oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params">oEvent</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Uploaded.</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> blob = <span class="keyword">new</span> Blob([<span class="string">'abc123'</span>], &#123;<span class="attr">type</span>: <span class="string">'text/plain'</span>&#125;);</span><br><span class="line"></span><br><span class="line">oReq.send(blob);</span><br></pre></td></tr></table></figure><h3 id="Sending-typed-arrays-as-binary-data"><a href="#Sending-typed-arrays-as-binary-data" class="headerlink" title="Sending typed arrays as binary data"></a>Sending typed arrays as binary data</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myArray = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">512</span>);</span><br><span class="line"><span class="keyword">var</span> longInt8View = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(myArray);</span><br><span class="line"></span><br><span class="line"><span class="comment">// generate some data</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt; longInt8View.length; i++) &#123;</span><br><span class="line">  longInt8View[i] = i % <span class="number">256</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span><br><span class="line">xhr.open(<span class="string">"POST"</span>, url, <span class="literal">false</span>);</span><br><span class="line">xhr.send(myArray);</span><br></pre></td></tr></table></figure><h5 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h5><ol><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data</a></li></ol></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://molly2molly.github.io/ArrayBuffer&TypedArray&DataView/" title="ArrayBuffer" target="_blank" rel="external">https://molly2molly.github.io/ArrayBuffer&TypedArray&DataView/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/molly2molly" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/molly2molly" target="_blank"><span class="text-dark">张英姿</span><small class="ml-1x">前端工程师</small></a></h3><div>梦里寻他千百度 蓦然回首 那人却在灯火阑珊处</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom=""><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/Fetch/" title="Fetch"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/Blob&File&FileReader/" title="Blob&amp;File&amp;FileReader"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/molly2molly" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html>